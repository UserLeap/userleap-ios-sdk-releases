(function(){"use strict";var dc=Object.defineProperty;var uc=(Se,U,Qe)=>U in Se?dc(Se,U,{enumerable:!0,configurable:!0,writable:!0,value:Qe}):Se[U]=Qe;var qe=(Se,U,Qe)=>uc(Se,typeof U!="symbol"?U+"":U,Qe);var Se,U,Qe,We,Fn,qn,Ft,Bn,ht={},Vn=[],Ti=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,bt=Array.isArray;function De(e,t){for(var n in t)e[n]=t[n];return e}function zn(e){var t=e.parentNode;t&&t.removeChild(e)}function ke(e,t,n){var r,o,i,a={};for(i in t)i=="key"?r=t[i]:i=="ref"?o=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?Se.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)a[i]===void 0&&(a[i]=e.defaultProps[i]);return mt(e,a,r,o,null)}function mt(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++Qe,__i:-1,__u:0};return o==null&&U.vnode!=null&&U.vnode(i),i}function Qn(){return{current:null}}function ae(e){return e.children}function Ee(e,t){this.props=e,this.context=t}function nt(e,t){if(t==null)return e.__?nt(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?nt(e):null}function Wn(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Wn(e)}}function qt(e){(!e.__d&&(e.__d=!0)&&We.push(e)&&!_t.__r++||Fn!==U.debounceRendering)&&((Fn=U.debounceRendering)||qn)(_t)}function _t(){var e,t,n,r,o,i,a,l,c;for(We.sort(Ft);e=We.shift();)e.__d&&(t=We.length,r=void 0,i=(o=(n=e).__v).__e,l=[],c=[],(a=n.__P)&&((r=De({},o)).__v=o.__v+1,U.vnode&&U.vnode(r),Bt(a,r,o,n.__n,a.ownerSVGElement!==void 0,32&o.__u?[i]:null,l,i??nt(o),!!(32&o.__u),c),r.__.__k[r.__i]=r,Xn(l,r,c),r.__e!=i&&Wn(r)),We.length>t&&We.sort(Ft));_t.__r=0}function Gn(e,t,n,r,o,i,a,l,c,u,h){var d,p,m,g,f,x=r&&r.__k||Vn,v=t.length;for(n.__d=c,Ri(n,t,x),c=n.__d,d=0;d<v;d++)(m=n.__k[d])!=null&&typeof m!="boolean"&&typeof m!="function"&&(p=m.__i===-1?ht:x[m.__i]||ht,m.__i=d,Bt(e,m,p,o,i,a,l,c,u,h),g=m.__e,m.ref&&p.ref!=m.ref&&(p.ref&&Vt(p.ref,null,m),h.push(m.ref,m.__c||g,m)),f==null&&g!=null&&(f=g),65536&m.__u||p.__k===m.__k?c=Zn(m,c,e):typeof m.type=="function"&&m.__d!==void 0?c=m.__d:g&&(c=g.nextSibling),m.__d=void 0,m.__u&=-196609);n.__d=c,n.__e=f}function Ri(e,t,n){var r,o,i,a,l,c=t.length,u=n.length,h=u,d=0;for(e.__k=[],r=0;r<c;r++)(o=e.__k[r]=(o=t[r])==null||typeof o=="boolean"||typeof o=="function"?null:typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?mt(null,o,null,null,o):bt(o)?mt(ae,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?mt(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)!=null?(o.__=e,o.__b=e.__b+1,l=Ii(o,n,a=r+d,h),o.__i=l,i=null,l!==-1&&(h--,(i=n[l])&&(i.__u|=131072)),i==null||i.__v===null?(l==-1&&d--,typeof o.type!="function"&&(o.__u|=65536)):l!==a&&(l===a+1?d++:l>a?h>c-a?d+=l-a:d--:d=l<a&&l==a-1?l-a:0,l!==r+d&&(o.__u|=65536))):(i=n[r])&&i.key==null&&i.__e&&(i.__e==e.__d&&(e.__d=nt(i)),zt(i,i,!1),n[r]=null,h--);if(h)for(r=0;r<u;r++)(i=n[r])!=null&&(131072&i.__u)==0&&(i.__e==e.__d&&(e.__d=nt(i)),zt(i,i))}function Zn(e,t,n){var r,o;if(typeof e.type=="function"){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=Zn(r[o],t,n));return t}return e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e),t&&t.nextSibling}function je(e,t){return t=t||[],e==null||typeof e=="boolean"||(bt(e)?e.some(function(n){je(n,t)}):t.push(e)),t}function Ii(e,t,n,r){var o=e.key,i=e.type,a=n-1,l=n+1,c=t[n];if(c===null||c&&o==c.key&&i===c.type)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;a>=0||l<t.length;){if(a>=0){if((c=t[a])&&(131072&c.__u)==0&&o==c.key&&i===c.type)return a;a--}if(l<t.length){if((c=t[l])&&(131072&c.__u)==0&&o==c.key&&i===c.type)return l;l++}}return-1}function Yn(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Ti.test(t)?n:n+"px"}function xt(e,t,n,r,o){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Yn(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Yn(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,i?Jn:Kn,i)):e.removeEventListener(t,i?Jn:Kn,i);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function Kn(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(U.event?U.event(e):e)}function Jn(e){return this.l[e.type+!0](U.event?U.event(e):e)}function Bt(e,t,n,r,o,i,a,l,c,u){var h,d,p,m,g,f,x,v,_,b,w,S,R,E,N,y=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),i=[l=t.__e=n.__e]),(h=U.__b)&&h(t);e:if(typeof y=="function")try{if(v=t.props,_=(h=y.contextType)&&r[h.__c],b=h?_?_.props.value:h.__:r,n.__c?x=(d=t.__c=n.__c).__=d.__E:("prototype"in y&&y.prototype.render?t.__c=d=new y(v,b):(t.__c=d=new Ee(v,b),d.constructor=y,d.render=Pi),_&&_.sub(d),d.props=v,d.state||(d.state={}),d.context=b,d.__n=r,p=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),y.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=De({},d.__s)),De(d.__s,y.getDerivedStateFromProps(v,d.__s))),m=d.props,g=d.state,d.__v=t,p)y.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(y.getDerivedStateFromProps==null&&v!==m&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(v,b),!d.__e&&(d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(v,d.__s,b)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(d.props=v,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(P){P&&(P.__=t)}),w=0;w<d._sb.length;w++)d.__h.push(d._sb[w]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(v,d.__s,b),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(m,g,f)})}if(d.context=b,d.props=v,d.__P=e,d.__e=!1,S=U.__r,R=0,"prototype"in y&&y.prototype.render){for(d.state=d.__s,d.__d=!1,S&&S(t),h=d.render(d.props,d.state,d.context),E=0;E<d._sb.length;E++)d.__h.push(d._sb[E]);d._sb=[]}else do d.__d=!1,S&&S(t),h=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++R<25);d.state=d.__s,d.getChildContext!=null&&(r=De(De({},r),d.getChildContext())),p||d.getSnapshotBeforeUpdate==null||(f=d.getSnapshotBeforeUpdate(m,g)),Gn(e,bt(N=h!=null&&h.type===ae&&h.key==null?h.props.children:h)?N:[N],t,n,r,o,i,a,l,c,u),d.base=t.__e,t.__u&=-161,d.__h.length&&a.push(d),x&&(d.__E=d.__=null)}catch(P){t.__v=null,c||i!=null?(t.__e=l,t.__u|=c?160:32,i[i.indexOf(l)]=null):(t.__e=n.__e,t.__k=n.__k),U.__e(P,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Li(n.__e,t,n,r,o,i,a,c,u);(h=U.diffed)&&h(t)}function Xn(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)Vt(n[r],n[++r],n[++r]);U.__c&&U.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){U.__e(i,o.__v)}})}function Li(e,t,n,r,o,i,a,l,c){var u,h,d,p,m,g,f,x=n.props,v=t.props,_=t.type;if(_==="svg"&&(o=!0),i!=null){for(u=0;u<i.length;u++)if((m=i[u])&&"setAttribute"in m==!!_&&(_?m.localName===_:m.nodeType===3)){e=m,i[u]=null;break}}if(e==null){if(_===null)return document.createTextNode(v);e=o?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,v.is&&v),i=null,l=!1}if(_===null)x===v||l&&e.data===v||(e.data=v);else{if(i=i&&Se.call(e.childNodes),x=n.props||ht,!l&&i!=null)for(x={},u=0;u<e.attributes.length;u++)x[(m=e.attributes[u]).name]=m.value;for(u in x)m=x[u],u=="children"||(u=="dangerouslySetInnerHTML"?d=m:u==="key"||u in v||xt(e,u,null,m,o));for(u in v)m=v[u],u=="children"?p=m:u=="dangerouslySetInnerHTML"?h=m:u=="value"?g=m:u=="checked"?f=m:u==="key"||l&&typeof m!="function"||x[u]===m||xt(e,u,m,x[u],o);if(h)l||d&&(h.__html===d.__html||h.__html===e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(d&&(e.innerHTML=""),Gn(e,bt(p)?p:[p],t,n,r,o&&_!=="foreignObject",i,a,i?i[0]:n.__k&&nt(n,0),l,c),i!=null)for(u=i.length;u--;)i[u]!=null&&zn(i[u]);l||(u="value",g!==void 0&&(g!==e[u]||_==="progress"&&!g||_==="option"&&g!==x[u])&&xt(e,u,g,x[u],!1),u="checked",f!==void 0&&f!==e[u]&&xt(e,u,f,x[u],!1))}return e}function Vt(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){U.__e(r,n)}}function zt(e,t,n){var r,o;if(U.unmount&&U.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Vt(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){U.__e(i,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&zt(r[o],t,n||typeof e.type!="function");n||e.__e==null||zn(e.__e),e.__=e.__e=e.__d=void 0}function Pi(e,t,n){return this.constructor(e,n)}function rt(e,t,n){var r,o,i,a;U.__&&U.__(e,t),o=(r=typeof n=="function")?null:n&&n.__k||t.__k,i=[],a=[],Bt(t,e=(!r&&n||t).__k=ke(ae,null,[e]),o||ht,ht,t.ownerSVGElement!==void 0,!r&&n?[n]:o?null:t.firstChild?Se.call(t.childNodes):null,i,!r&&n?n:o?o.__e:t.firstChild,r,a),Xn(i,e,a)}function er(e,t){rt(e,t,er)}function Ni(e,t,n){var r,o,i,a,l=De({},e.props);for(i in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)i=="key"?r=t[i]:i=="ref"?o=t[i]:l[i]=t[i]===void 0&&a!==void 0?a[i]:t[i];return arguments.length>2&&(l.children=arguments.length>3?Se.call(arguments,2):n),mt(e.type,l,r||e.key,o||e.ref,null)}function Qt(e,t){var n={__c:t="__cC"+Bn++,__:e,Consumer:function(r,o){return r.children(o)},Provider:function(r){var o,i;return this.getChildContext||(o=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&o.some(function(l){l.__e=!0,qt(l)})},this.sub=function(a){o.push(a);var l=a.componentWillUnmount;a.componentWillUnmount=function(){o.splice(o.indexOf(a),1),l&&l.call(a)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}Se=Vn.slice,U={__e:function(e,t,n,r){for(var o,i,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),a=o.__d),a)return o.__E=o}catch(l){e=l}throw e}},Qe=0,Ee.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=De({},this.state),typeof e=="function"&&(e=e(De({},n),this.props)),e&&De(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),qt(this))},Ee.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),qt(this))},Ee.prototype.render=ae,We=[],qn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ft=function(e,t){return e.__v.__b-t.__v.__b},_t.__r=0,Bn=0;var Di=0;function s(e,t,n,r,o,i){var a,l,c={};for(l in t)l=="ref"?a=t[l]:c[l]=t[l];var u={type:e,props:c,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Di,__i:-1,__u:0,__source:o,__self:i};if(typeof e=="function"&&(a=e.defaultProps))for(l in a)c[l]===void 0&&(c[l]=a[l]);return U.vnode&&U.vnode(u),u}var Ae,se,Wt,tr,ot=0,nr=[],yt=[],rr=U.__b,or=U.__r,ir=U.diffed,sr=U.__c,ar=U.unmount;function Ge(e,t){U.__h&&U.__h(se,e,ot||t),ot=0;var n=se.__H||(se.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:yt}),n.__[e]}function q(e){return ot=1,Gt(ur,e)}function Gt(e,t,n){var r=Ge(Ae++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):ur(void 0,t),function(l){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,l);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=se,!se.u)){var o=function(l,c,u){if(!r.__c.__H)return!0;var h=r.__c.__H.__.filter(function(p){return p.__c});if(h.every(function(p){return!p.__N}))return!i||i.call(this,l,c,u);var d=!1;return h.forEach(function(p){if(p.__N){var m=p.__[0];p.__=p.__N,p.__N=void 0,m!==p.__[0]&&(d=!0)}}),!(!d&&r.__c.props===l)&&(!i||i.call(this,l,c,u))};se.u=!0;var i=se.shouldComponentUpdate,a=se.componentWillUpdate;se.componentWillUpdate=function(l,c,u){if(this.__e){var h=i;i=void 0,o(l,c,u),i=h}a&&a.call(this,l,c,u)},se.shouldComponentUpdate=o}return r.__N||r.__}function K(e,t){var n=Ge(Ae++,3);!U.__s&&Jt(n.__H,t)&&(n.__=e,n.i=t,se.__H.__h.push(n))}function it(e,t){var n=Ge(Ae++,4);!U.__s&&Jt(n.__H,t)&&(n.__=e,n.i=t,se.__h.push(n))}function oe(e){return ot=5,he(function(){return{current:e}},[])}function lr(e,t,n){ot=6,it(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function he(e,t){var n=Ge(Ae++,7);return Jt(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function we(e,t){return ot=8,he(function(){return e},t)}function Zt(e){var t=se.context[e.__c],n=Ge(Ae++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(se)),t.props.value):e.__}function Yt(e,t){U.useDebugValue&&U.useDebugValue(t?t(e):e)}function ji(e){var t=Ge(Ae++,10),n=q();return t.__=e,se.componentDidCatch||(se.componentDidCatch=function(r,o){t.__&&t.__(r,o),n[1](r)}),[n[0],function(){n[1](void 0)}]}function cr(){var e=Ge(Ae++,11);if(!e.__){for(var t=se.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function Ai(){for(var e;e=nr.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(kt),e.__H.__h.forEach(Kt),e.__H.__h=[]}catch(t){e.__H.__h=[],U.__e(t,e.__v)}}U.__b=function(e){se=null,rr&&rr(e)},U.__r=function(e){or&&or(e),Ae=0;var t=(se=e.__c).__H;t&&(Wt===se?(t.__h=[],se.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=yt,n.__N=n.i=void 0})):(t.__h.forEach(kt),t.__h.forEach(Kt),t.__h=[],Ae=0)),Wt=se},U.diffed=function(e){ir&&ir(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(nr.push(t)!==1&&tr===U.requestAnimationFrame||((tr=U.requestAnimationFrame)||Oi)(Ai)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==yt&&(n.__=n.__V),n.i=void 0,n.__V=yt})),Wt=se=null},U.__c=function(e,t){t.some(function(n){try{n.__h.forEach(kt),n.__h=n.__h.filter(function(r){return!r.__||Kt(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],U.__e(r,n.__v)}}),sr&&sr(e,t)},U.unmount=function(e){ar&&ar(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{kt(r)}catch(o){t=o}}),n.__H=void 0,t&&U.__e(t,n.__v))};var dr=typeof requestAnimationFrame=="function";function Oi(e){var t,n=function(){clearTimeout(r),dr&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);dr&&(t=requestAnimationFrame(n))}function kt(e){var t=se,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),se=t}function Kt(e){var t=se;e.__c=e.__(),se=t}function Jt(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function ur(e,t){return typeof t=="function"?t(e):t}function pr(e,t){for(var n in t)e[n]=t[n];return e}function Xt(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function wt(e){this.props=e}function hr(e,t){function n(o){var i=this.props.ref,a=i==o.ref;return!a&&i&&(i.call?i(null):i.current=null),t?!t(this.props,o)||!a:Xt(this.props,o)}function r(o){return this.shouldComponentUpdate=n,ke(e,o)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(wt.prototype=new Ee).isPureReactComponent=!0,wt.prototype.shouldComponentUpdate=function(e,t){return Xt(this.props,e)||Xt(this.state,t)};var mr=U.__b;U.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),mr&&mr(e)};var Mi=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function en(e){function t(n){var r=pr({},n);return delete r.ref,e(r,n.ref||null)}return t.$$typeof=Mi,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var fr=function(e,t){return e==null?null:je(je(e).map(t))},gr={map:fr,forEach:fr,count:function(e){return e?je(e).length:0},only:function(e){var t=je(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:je},$i=U.__e;U.__e=function(e,t,n,r){if(e.then){for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),o.__c(e,t)}$i(e,t,n,r)};var vr=U.unmount;function br(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),e.__c.__H=null),(e=pr({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(r){return br(r,t,n)})),e}function _r(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(r){return _r(r,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function Ze(){this.__u=0,this.t=null,this.__b=null}function xr(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Ct(e){var t,n,r;function o(i){if(t||(t=e()).then(function(a){n=a.default||a},function(a){r=a}),r)throw r;if(!n)throw t;return ke(n,i)}return o.displayName="Lazy",o.__f=!0,o}function st(){this.u=null,this.o=null}U.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),vr&&vr(e)},(Ze.prototype=new Ee).__c=function(e,t){var n=t.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var o=xr(r.__v),i=!1,a=function(){i||(i=!0,n.__R=null,o?o(l):l())};n.__R=a;var l=function(){if(!--r.__u){if(r.state.__a){var c=r.state.__a;r.__v.__k[0]=_r(c,c.__c.__P,c.__c.__O)}var u;for(r.setState({__a:r.__b=null});u=r.t.pop();)u.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(a,a)},Ze.prototype.componentWillUnmount=function(){this.t=[]},Ze.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=br(this.__b,n,r.__O=r.__P)}this.__b=null}var o=t.__a&&ke(ae,null,e.fallback);return o&&(o.__u&=-33),[ke(ae,null,t.__a?null:e.children),o]};var yr=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function Ui(e){return this.getChildContext=function(){return e.context},e.children}function Hi(e){var t=this,n=e.i;t.componentWillUnmount=function(){rt(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(r){this.childNodes.push(r),t.i.appendChild(r)},insertBefore:function(r,o){this.childNodes.push(r),t.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),t.i.removeChild(r)}}),rt(ke(Ui,{context:t.context},e.__v),t.l)}function kr(e,t){var n=ke(Hi,{__v:e,i:t});return n.containerInfo=t,n}(st.prototype=new Ee).__a=function(e){var t=this,n=xr(t.__v),r=t.o.get(e);return r[0]++,function(o){var i=function(){t.props.revealOrder?(r.push(o),yr(t,e,r)):o()};n?n(i):i()}},st.prototype.render=function(e){this.u=null,this.o=new Map;var t=je(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},st.prototype.componentDidUpdate=st.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){yr(e,n,t)})};var wr=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Fi=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,qi=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Bi=/[A-Z0-9]/g,Vi=typeof document<"u",zi=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function Cr(e,t,n){return t.__k==null&&(t.textContent=""),rt(e,t),typeof n=="function"&&n(),e?e.__c:null}function Sr(e,t,n){return er(e,t),typeof n=="function"&&n(),e?e.__c:null}Ee.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Ee.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Er=U.event;function Qi(){}function Wi(){return this.cancelBubble}function Gi(){return this.defaultPrevented}U.event=function(e){return Er&&(e=Er(e)),e.persist=Qi,e.isPropagationStopped=Wi,e.isDefaultPrevented=Gi,e.nativeEvent=e};var tn,Zi={enumerable:!1,configurable:!0,get:function(){return this.class}},Tr=U.vnode;U.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,r=t.type,o={};for(var i in n){var a=n[i];if(!(i==="value"&&"defaultValue"in n&&a==null||Vi&&i==="children"&&r==="noscript"||i==="class"||i==="className")){var l=i.toLowerCase();i==="defaultValue"&&"value"in n&&n.value==null?i="value":i==="download"&&a===!0?a="":l==="ondoubleclick"?i="ondblclick":l!=="onchange"||r!=="input"&&r!=="textarea"||zi(n.type)?l==="onfocus"?i="onfocusin":l==="onblur"?i="onfocusout":qi.test(i)?i=l:r.indexOf("-")===-1&&Fi.test(i)?i=i.replace(Bi,"-$&").toLowerCase():a===null&&(a=void 0):l=i="oninput",l==="oninput"&&o[i=l]&&(i="oninputCapture"),o[i]=a}}r=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=je(n.children).forEach(function(c){c.props.selected=o.value.indexOf(c.props.value)!=-1})),r=="select"&&o.defaultValue!=null&&(o.value=je(n.children).forEach(function(c){c.props.selected=o.multiple?o.defaultValue.indexOf(c.props.value)!=-1:o.defaultValue==c.props.value})),n.class&&!n.className?(o.class=n.class,Object.defineProperty(o,"className",Zi)):(n.className&&!n.class||n.class&&n.className)&&(o.class=o.className=n.className),t.props=o}(e),e.$$typeof=wr,Tr&&Tr(e)};var Rr=U.__r;U.__r=function(e){Rr&&Rr(e),tn=e.__c};var Ir=U.diffed;U.diffed=function(e){Ir&&Ir(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value),tn=null};var Lr={ReactCurrentDispatcher:{current:{readContext:function(e){return tn.__n[e.__c].props.value}}}},Yi="17.0.2";function Pr(e){return ke.bind(null,e)}function ft(e){return!!e&&e.$$typeof===wr}function Nr(e){return ft(e)&&e.type===ae}function Dr(e){return ft(e)?Ni.apply(null,arguments):e}function nn(e){return!!e.__k&&(rt(null,e),!0)}function jr(e){return e&&(e.base||e.nodeType===1&&e)||null}var Ar=function(e,t){return e(t)},Or=function(e,t){return e(t)},Mr=ae;function rn(e){e()}function $r(e){return e}function Ur(){return[!1,rn]}var Hr=it,Fr=ft;function qr(e,t){var n=t(),r=q({h:{__:n,v:t}}),o=r[0].h,i=r[1];return it(function(){o.__=n,o.v=t,on(o)&&i({h:o})},[e,n,t]),K(function(){return on(o)&&i({h:o}),e(function(){on(o)&&i({h:o})})},[e]),n}function on(e){var t,n,r=e.v,o=e.__;try{var i=r();return!((t=o)===(n=i)&&(t!==0||1/t==1/n)||t!=t&&n!=n)}catch{return!0}}var sn={useState:q,useId:cr,useReducer:Gt,useEffect:K,useLayoutEffect:it,useInsertionEffect:Hr,useTransition:Ur,useDeferredValue:$r,useSyncExternalStore:qr,startTransition:rn,useRef:oe,useImperativeHandle:lr,useMemo:he,useCallback:we,useContext:Zt,useDebugValue:Yt,version:"17.0.2",Children:gr,render:Cr,hydrate:Sr,unmountComponentAtNode:nn,createPortal:kr,createElement:ke,createContext:Qt,createFactory:Pr,cloneElement:Dr,createRef:Qn,Fragment:ae,isValidElement:ft,isElement:Fr,isFragment:Nr,findDOMNode:jr,Component:Ee,PureComponent:wt,memo:hr,forwardRef:en,flushSync:Or,unstable_batchedUpdates:Ar,StrictMode:Mr,Suspense:Ze,SuspenseList:st,lazy:Ct,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Lr};const Ki=Object.freeze(Object.defineProperty({__proto__:null,Children:gr,Component:Ee,Fragment:ae,PureComponent:wt,StrictMode:Mr,Suspense:Ze,SuspenseList:st,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Lr,cloneElement:Dr,createContext:Qt,createElement:ke,createFactory:Pr,createPortal:kr,createRef:Qn,default:sn,findDOMNode:jr,flushSync:Or,forwardRef:en,hydrate:Sr,isElement:Fr,isFragment:Nr,isValidElement:ft,lazy:Ct,memo:hr,render:Cr,startTransition:rn,unmountComponentAtNode:nn,unstable_batchedUpdates:Ar,useCallback:we,useContext:Zt,useDebugValue:Yt,useDeferredValue:$r,useEffect:K,useErrorBoundary:ji,useId:cr,useImperativeHandle:lr,useInsertionEffect:Hr,useLayoutEffect:it,useMemo:he,useReducer:Gt,useRef:oe,useState:q,useSyncExternalStore:qr,useTransition:Ur,version:Yi},Symbol.toStringTag,{value:"Module"})),Oe="ul-app",at="#e6e6e6",Be="#bd282a",Ji=1030,Br=e=>{let t;const n=new Set,r=(c,u)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const d=t;t=u??typeof h!="object"?h:Object.assign({},t,h),n.forEach(p=>p(t,d))}},o=()=>t,l={setState:r,getState:o,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return t=e(r,o,l),l},Xi=e=>e?Br(e):Br;function es(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ts(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var an={exports:{}},ln={};const Vr=ts(Ki);var cn={exports:{}},dn={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zr;function ns(){if(zr)return dn;zr=1;var e=Vr;function t(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,i=e.useLayoutEffect,a=e.useDebugValue;function l(d,p){var m=p(),g=r({inst:{value:m,getSnapshot:p}}),f=g[0].inst,x=g[1];return i(function(){f.value=m,f.getSnapshot=p,c(f)&&x({inst:f})},[d,m,p]),o(function(){return c(f)&&x({inst:f}),d(function(){c(f)&&x({inst:f})})},[d]),a(m),m}function c(d){var p=d.getSnapshot;d=d.value;try{var m=p();return!n(d,m)}catch{return!0}}function u(d,p){return p()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return dn.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,dn}var Qr;function rs(){return Qr||(Qr=1,cn.exports=ns()),cn.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wr;function os(){if(Wr)return ln;Wr=1;var e=Vr,t=rs();function n(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,i=e.useRef,a=e.useEffect,l=e.useMemo,c=e.useDebugValue;return ln.useSyncExternalStoreWithSelector=function(u,h,d,p,m){var g=i(null);if(g.current===null){var f={hasValue:!1,value:null};g.current=f}else f=g.current;g=l(function(){function v(R){if(!_){if(_=!0,b=R,R=p(R),m!==void 0&&f.hasValue){var E=f.value;if(m(E,R))return w=E}return w=R}if(E=w,r(b,R))return E;var N=p(R);return m!==void 0&&m(E,N)?E:(b=R,w=N)}var _=!1,b,w,S=d===void 0?null:d;return[function(){return v(h())},S===null?void 0:function(){return v(S())}]},[h,d,p,m]);var x=o(u,g[0],g[1]);return a(function(){f.hasValue=!0,f.value=x},[x]),c(x),x},ln}var Gr;function is(){return Gr||(Gr=1,an.exports=os()),an.exports}var ss=is();const as=es(ss),{useSyncExternalStoreWithSelector:ls}=as;function cs(e,t=e.getState,n){const r=ls(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return Yt(r),r}const Zr=e=>{const t=typeof e=="function"?Xi(e):e,n=(r,o)=>cs(t,r,o);return Object.assign(n,t),n},un=e=>e?Zr(e):Zr;var Te=(e=>(e.RIGHT="right",e.LEFT="left",e))(Te||{});const Yr={And:1,Or:2},Kr=1,pn={eq(e,t){return e==t},neq(e,t){return!this.eq(e,t)},gt(e,t){return e>t},gte(e,t){return e>=t},lt(e,t){return e<t},lte(e,t){return e<=t},list_exact(e,t){return!Array.isArray(e)||!Array.isArray(t)?!1:e.slice().sort().join(",")===t.slice().sort().join(",")},list_all(e,t){return!Array.isArray(e)||!Array.isArray(t)?!1:!t.some(n=>e.indexOf(n)===-1)},list_alo(e,t){if(!Array.isArray(t))return!1;const n=Array.isArray(e)?e:[e],r=new Set(n);return t.some(o=>r.has(o))},list_dni(e,t){if(!Array.isArray(t))return!1;const n=Array.isArray(e)?e:[e],r=new Set(n);return t.every(o=>!r.has(o))},contains(e,t){const n=e.toLowerCase(),r=t.toLowerCase();return n.includes(r)},notcontains(e,t){return!this.contains(e,t)}},ds=(e,t,n)=>{switch(t){case"videovoice":return!!(e&&e.value);case"open":return!!n;case"multipleselect":return!!(n&&Object.keys(n).length);case"recordedtask":return(n==null?void 0:n.taskStatus)==="completed";case"texturlprompt":return!e.value;case"consentlegal":return n!==null;case"multiplechoice":return n!==void 0;case"matrix":return!!(n&&Object.values(n).every(r=>r!==null));case"nps":return n!==null;case"likert":return n!==null;default:return!0}},Jr=(e,t)=>{if(t==="matrix"){const n=Object.keys(e).length,r=Object.values(e).filter(o=>o!==null).length;return r>0&&r<n}return!1},Xr=({cards:e,index:t,hasEndCard:n,allResponses:r,uploadProgress:o={}})=>{var h,d;if(t>=e.length||t<0)return null;const i=e[t];let a=t+1;const l=i.props.routingOptions||[];for(const p of l){const{group:m,target:g}=p;if(eo(m,r,e)){a=g===-1&&n?e.length-1:g;break}}const c=e.findIndex(p=>p.type==="uploading");let u;for(c>0?u=n?e.length-3:e.length-2:u=e.length-1;a!==null&&a!==-1&&a<=u&&((d=(h=e[a])==null?void 0:h.props)!=null&&d.displayLogic)&&e[a].props.displayLogic.length>0&&!(e[a].props.displayLogic||[]).some(g=>eo(g.group,r,e));)a++;return t>=u||a===-1||a!==null&&a>u?c>0&&Object.values(o).some(m=>m.isSubmitted&&!m.isComplete)?c:n?e.length-1:null:a===-1?null:a},eo=(e,t,n)=>{if(!e||e.length===0)return!1;const r=e[0];if(r.questionIndex===void 0||r.questionIndex>=t.length)return!1;let o=!!to({comparator:r.comparator,response:t[r.questionIndex],type:n[r.questionIndex].type,value:r.value});for(let i=1;i<e.length;i+=2){const a=e[i],l=e[i+1];if(!l)continue;const c=!!to({comparator:l.comparator,response:t[l.questionIndex],type:n[l.questionIndex].type,value:l.value});a===Yr.And?o=o&&c:a===Yr.Or&&(o=o||c)}return o},to=({comparator:e,response:t,type:n,value:r})=>{if(e==="answered")switch(n){case"texturlprompt":return t===void 0;case"consentlegal":return t&&t.submitted===!0;case"recordedtask":return"taskStatus"in t&&t.taskStatus==="completed";case"likert":return Number.isInteger(t);case"rankorder":case"matrix":return Object.values(t).every(o=>o!==null);case"maxdiff":return t===null||!Array.isArray(t)?!1:t.every(o=>{if(!Array.isArray(o))return!1;const i=o.some(l=>l.selected==="left"),a=o.some(l=>l.selected==="right");return i&&a});case"multiplechoice":return!!t;case"multipleselect":return(t==null?void 0:t.length)>0;case"nps":return Number.isInteger(t);case"open":return t&&t.length>0;case"videovoice":return!!(t!=null&&t.mediaRecordingUid);default:return!1}if(e==="given_up")return n==="recordedtask"?"taskStatus"in t&&t.taskStatus==="given.up":!0;if(e==="partial")return n==="matrix"?Jr(t,n):!1;if(e==="skipped")switch(n){case"texturlprompt":return t==null?void 0:t.skipped;case"consentlegal":return t===null;case"recordedtask":return"taskStatus"in t&&t.taskStatus==="abandoned";case"likert":return t===null;case"open":return t===null||(t==null?void 0:t.length)===0;case"multiplechoice":return t==null;case"multipleselect":return t===null||(t==null?void 0:t.length)===0;case"matrix":return t===null||Object.values(t).every(o=>o===null);case"maxdiff":return t===null||!Array.isArray(t)?!0:t.some(o=>{if(!Array.isArray(o))return!0;const i=o.some(l=>l.selected==="left"),a=o.some(l=>l.selected==="right");return!(i&&a)});case"nps":return t===null;case"videovoice":return t===null;case"rankorder":return t===null||Object.values(t).some(o=>o===null);default:return!1}return pn[e](t,r)},us=13,ps=(e,t)=>e.reduce((n,r)=>n.concat(n.map(o=>[...o,r])),[[]]).filter(n=>t||n.length>0),hs=e=>{var t,n,r;switch(e.type){case"multipleselect":return!e||!e.props||!e.props.options?null:e.props.options.length>us?e.props.options.map(o=>[o.value]):ps(e.props.options.map(o=>o.value),!e.props.properties.required);case"multiplechoice":{if(!e||!e.props||!e.props.options)return null;const o=e.props.options.map(i=>i.value);return e.props.properties.required||o.push(void 0),o}case"matrix":{if(!((t=e==null?void 0:e.props)!=null&&t.options))return null;const o=e.props.properties.matrixColumn,i=e.props.options,a=i.reduce((h,d)=>(h[d.id]=null,h),{}),l={...a,[i[0].id]:o[0].value},c=i.reduce((h,d)=>(h[d.id]=o[0].value,h),{}),u=[l,c];return e.props.properties.required||u.push(a),u}case"likert":{const o=Number((r=(n=e.props)==null?void 0:n.properties)==null?void 0:r.range)||5;return[...Array.from(Array(o).keys()).map(a=>a+1),...e.props.properties.required?[]:[null]]}case"nps":return[0,1,2,3,4,5,6,7,8,9,10,...e.props.properties.required?[]:[null]];case"videovoice":case"open":return["1",...e.props.properties.required?[]:[""]];case"recordedtask":{const o=[{taskStatus:"completed"},{taskStatus:"given.up"}];return e.props.properties.required||o.push({taskStatus:"abandoned"}),o}case"texturlprompt":return[void 0,...e.props.properties.required?[]:[{skipped:!0}]];case"consentlegal":return[Kr,...e.props.properties.required?[]:[null]];default:return[Kr]}},ms=e=>e in pn,fs=e=>typeof e=="object"&&e!==null&&"taskStatus"in e,gs=(e,t=[])=>t.reduce((n,r)=>{const{group:o,target:i}=r;if(!(o!=null&&o.length))return[...n];const a=o.filter(l=>Number(l)?!0:typeof l=="object"?l.questionIndex===e:!1).map(l=>{const{comparator:c,value:u}=l;return{comparator:c,target:i,value:u}});return[...n,...a]},[]),vs=(e,t)=>{const n=new Set(["thanks","uploading"]);if(t>=e.length||t<0||n.has(e[t].type))return 0;const r=e.filter(i=>!n.has(i.type));if(t===r.length-1)return 1;const o={[r.length-1]:1,[-1]:0};for(let i=r.length-2;i>=t;i--){const a=r[i],l=gs(i,a.props.routingOptions);if(l.length===0){o[i]=o[i+1]+1;continue}let c=0,u=hs(a);if(u===null)return r.length-1-t;for(let h=0;h<l.length&&u.length!==0;h++){const{comparator:d,target:p,value:m}=l[h],g=u.filter(f=>{const x=ds({value:f},a.type,f),v=Jr(f,a.type);return!(x&&d==="answered"||v&&d==="partial"||!x&&!v&&d==="skipped"||d==="given_up"&&fs(f)&&f.taskStatus==="given.up"||x&&a.type==="open"&&(d==="contains"||d==="notcontains")||x&&ms(d)&&pn[d](f,m))});if(g.length<u.length){const f=parseInt(String(p),10);if(f!==-1&&f<=i||f>=r.length)return r.length-1-t;c=Math.max(o[f]+1,c)}u=g}u.length>0&&(c=Math.max(o[i+1]+1,c)),o[i]=c}return o[t]};var hn=(e=>(e.Closed="close.click",e.Complete="survey.completed",e.FeedbackClosed="feedback.closed",e.PageChange="page.change",e.API="api",e.Override="override",e))(hn||{}),Ce=(e=>(e.ReplayCapture="replay.capture",e.ReplayPaused="replay.paused",e.ReplayResumed="replay.resumed",e.FeedbackButtonLoaded="feedback.button.loaded",e.SDKReady="sdk.ready",e.SurveyAppeared="survey.appeared",e.SurveyCloseRequested="survey.closeRequested",e.SurveyClosed="survey.closed",e.SurveyDimensions="survey.dimensions",e.SurveyFadingOut="survey.fadingOut",e.SurveyHeight="survey.height",e.SurveyPresented="survey.presented",e.SurveyLifeCycle="survey.lifeCycle",e.SurveyWidth="survey.width",e.SurveyWillClose="survey.willClose",e.SurveyWillPresent="survey.will.present",e.CloseSurveyOnOverlayClick="close.survey.overlayClick",e.VisitorIDUpdated="visitor.id.updated",e.QuestionAnswered="question.answered",e))(Ce||{});const bs=360,_s=300;class xs{constructor(){qe(this,"breadcrumbs",[])}getTimeStamp(){return new Date().toISOString()}addBreadcrumb(t){this.breadcrumbs.push(t),this.breadcrumbs.length>_s&&this.breadcrumbs.shift()}debug(t,n="debug"){this.addBreadcrumb({category:n,level:"info",message:t,timestamp:this.getTimeStamp(),type:"debug"})}error(t,n={}){this.addBreadcrumb({category:"error",data:n,level:"error",message:t,timestamp:this.getTimeStamp(),type:"error"})}http(t,n){this.addBreadcrumb({category:"xhr",data:n,message:t,timestamp:this.getTimeStamp(),type:"http"})}info(t,n={}){this.addBreadcrumb({category:"info",data:n,level:"info",message:t,timestamp:this.getTimeStamp(),type:"info"})}navigation(t,n){this.addBreadcrumb({category:"navigation",data:n,message:t,timestamp:this.getTimeStamp(),type:"navigation"})}}const mn=new xs,no=()=>{try{return window.parent.Intercom}catch{return null}},ro=[Object.freeze(Object.defineProperty({__proto__:null,disable:()=>{const e=no();e&&(e.ul_wasVisible=!!document.querySelector("iframe.intercom-launcher-frame"),e.ul_wasVisible&&e("update",{hide_default_launcher:!0}))},enable:()=>{const e=no();e&&(e.ul_wasVisible&&e("update",{hide_default_launcher:!1}),delete e.ul_wasVisible)}},Symbol.toStringTag,{value:"Module"}))];class oo{static disable(){ro.forEach(t=>t.disable())}static enable(){ro.forEach(t=>t.enable())}}const Me=e=>e?e.nodeType===Node.ELEMENT_NODE:!1,ys=2,fn=({document:e,elementId:t,styleString:n,nonce:r})=>{const o=e.getElementById(t);if(o){o.textContent=n;return}const i=e.createElement("style");r&&(i.nonce=r),i.textContent=n,i.id=t,e.head.appendChild(i)},ks=e=>{const t=e.querySelector(".sprig-question-body"),n=e.querySelector(".ul-card"),r=e.querySelector(".ul-card-main-content"),o=e.querySelector(".ul-footer"),i=e.querySelector(".sprig-container");let a=0;return Me(n)&&(a+=n.scrollHeight-n.clientHeight),Me(r)&&(a+=r.scrollHeight-r.clientHeight),Me(t)&&(a+=t.scrollHeight-t.clientHeight),Me(o)&&Me(i)&&i.clientHeight===0&&(a+=o.clientHeight),a},io=(e,t)=>{const n=t.querySelector(e);if(!Me(n))return 0;const r=getComputedStyle(n),o=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i=parseFloat(r.marginLeft)+parseFloat(r.marginRight),a=parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth);return o+i+a},ws=(e,t,n)=>{const r=e.querySelector(".ul-card__container"),o=e.querySelector(".ul-app");let i=600,a=360;if(Me(r)&&Me(o)){const c=r.querySelector(".ul-card--matrix_grid"),u=!c&&t&&n;try{u&&(o.style.width="360px"),i=r.scrollHeight,i+=ks(e);const h=getComputedStyle(r),d=parseFloat(h.marginTop)+parseFloat(h.marginBottom),p=parseFloat(h.borderTopWidth)+parseFloat(h.borderBottomWidth);i+=d+p,c&&(a=c.scrollWidth,a+=io(".ul-card__container",e),a+=io(".sprig-question-body",e))}finally{u&&o.style.removeProperty("width")}}return[i+ys,a]},Cs=e=>{const t=e.querySelector(".ul-card__container");t&&(t.scrollTop=0)};var Ss=class extends Error{constructor(e,t,n){super(`Possible EventEmitter memory leak detected. ${n} ${t.toString()} listeners added. Use emitter.setMaxListeners() to increase limit`),this.emitter=e,this.type=t,this.count=n,this.name="MaxListenersExceededWarning"}},so=class{static listenerCount(e,t){return e.listenerCount(t)}constructor(){this.events=new Map,this.maxListeners=so.defaultMaxListeners,this.hasWarnedAboutPotentialMemoryLeak=!1}_emitInternalEvent(e,t,n){this.emit(e,t,n)}_getListeners(e){return Array.prototype.concat.apply([],this.events.get(e))||[]}_removeListener(e,t){const n=e.indexOf(t);return n>-1&&e.splice(n,1),[]}_wrapOnceListener(e,t){const n=(...r)=>(this.removeListener(e,n),t.apply(this,r));return Object.defineProperty(n,"name",{value:t.name}),n}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}eventNames(){return Array.from(this.events.keys())}emit(e,...t){const n=this._getListeners(e);return n.forEach(r=>{r.apply(this,t)}),n.length>0}addListener(e,t){this._emitInternalEvent("newListener",e,t);const n=this._getListeners(e).concat(t);if(this.events.set(e,n),this.maxListeners>0&&this.listenerCount(e)>this.maxListeners&&!this.hasWarnedAboutPotentialMemoryLeak){this.hasWarnedAboutPotentialMemoryLeak=!0;const r=new Ss(this,e,this.listenerCount(e));console.warn(r)}return this}on(e,t){return this.addListener(e,t)}once(e,t){return this.addListener(e,this._wrapOnceListener(e,t))}prependListener(e,t){const n=this._getListeners(e);if(n.length>0){const r=[t].concat(n);this.events.set(e,r)}else this.events.set(e,n.concat(t));return this}prependOnceListener(e,t){return this.prependListener(e,this._wrapOnceListener(e,t))}removeListener(e,t){const n=this._getListeners(e);return n.length>0&&(this._removeListener(n,t),this.events.set(e,n),this._emitInternalEvent("removeListener",e,t)),this}off(e,t){return this.removeListener(e,t)}removeAllListeners(e){return e?this.events.delete(e):this.events.clear(),this}listeners(e){return Array.from(this._getListeners(e))}listenerCount(e){return this._getListeners(e).length}rawListeners(e){return this.listeners(e)}},ao=so;ao.defaultMaxListeners=10;const gt=new ao,lo=async e=>{await new Promise(t=>{setTimeout(t,e)})},St=({"userleap-platform":e})=>{var t;return((t=window.UserLeap)==null?void 0:t.forceDirectEmbed)||e!=="web"};class co{constructor(t){qe(this,"storage");qe(this,"tempStorage",{});qe(this,"isStorageAvailable");try{this.storage=window[t];const n="__storage_test__";this.storage.setItem(n,n),this.storage.removeItem(n),this.isStorageAvailable=!0}catch{this.isStorageAvailable=!1}}setItem(t,n){this.isStorageAvailable&&this.storage?this.storage.setItem(t,n):this.tempStorage[t]=n}setItemObject(t,n){try{this.setItem(t,JSON.stringify(n))}catch(r){r instanceof Error&&(r.stack=t+": "+n,window.UserLeap.reportError("Failed to save to local storage",r))}}getItem(t){return this.isStorageAvailable&&this.storage?this.storage.getItem(t):this.tempStorage[t]}getItemObject(t){const n=this.getItem(t);if(n)try{return JSON.parse(n)}catch(r){r instanceof Error&&(r.stack=t+": "+n,window.UserLeap.reportError("Failed to parse local storage",r))}return{}}removeItem(t){this.isStorageAvailable&&this.storage?this.storage.removeItem(t):delete this.tempStorage[t]}clear(){this.isStorageAvailable&&this.storage?this.storage.clear():this.tempStorage={}}}const Es=(e,t)=>{const n=[e[t]],r=e[t].groupId;return r?e.slice(t).reduce((o,i)=>(i.groupId===r&&o.push(i),o),[]):n},ve=e=>e==="longFormSurvey";new co("sessionStorage"),new co("localStorage");class Ts{constructor(t){qe(this,"payload");qe(this,"promise");qe(this,"reject",()=>{});qe(this,"resolve",()=>{});this.payload=t,this.promise=new Promise((n,r)=>{this.reject=r,this.resolve=n})}resolveRequest(t){this.resolve(t)}}const Rs={RATELIMIT_RESET_DEFAULT:10};let uo=!1,po="",Et=!1,Is=!1,Tt=[];const Ls=(e="")=>{uo=!0,po=e},ho=async({shouldDropOnRateLimit:e,...t})=>{if(e)return{status:429};{const n=new Ts(t);return Tt.push(n),n.promise}},lt=async(e,t)=>{const{retries:n=0,shouldDropOnRateLimit:r=!1,shouldRetryRequest:o=!1,...i}=t,a={url:e,options:i,retries:n,shouldDropOnRateLimit:r};if(Et&&!o)return ho(a);const l={ok:!1,reportError:!1};if(uo)return console.info(`UserLeap - ${po}`),l;try{const c=await fetch(e,i);if(c.status===429)if(!Et&&!r||o){Et=!0;const h=c.headers.has("ratelimit-reset")?Number(c.headers.get("ratelimit-reset")):Rs.RATELIMIT_RESET_DEFAULT;return await lo(h*1e3),lt(e,{...i,shouldDropOnRateLimit:r,shouldRetryRequest:!0})}else return ho(a);if(Et=!1,Tt.length&&(Tt.map(u=>{const h=u.payload;lt(h.url,{...h.options,retries:h.retries,shouldDropOnRateLimit:h.shouldDropOnRateLimit}).then(d=>{u.resolveRequest(d)})}),Tt=[]),c.ok){if(c.status===249)return Ls(),l;const u=await c.text();try{return u&&u!=="OK"&&(c.json=JSON.parse(u)),c}catch{return{ok:!1,reportError:!1,error:new Error(`failed parsing response json for ${e} - ${u}`)}}}return c}catch(c){const u=n+1;return u>5||Is?{ok:!1,reportError:!1,error:c}:(await lo(Math.pow(2,n)*1e3),lt(e,{...i,retries:u}))}},gn=new Set(["thanks","uploading"]),Ps=e=>e&&!gn.has(e.type),H=un()((e,t)=>({addResponseGroupMeta:void 0,allResponses:[],answers:void 0,apiURL:"",avatars:{agentAvatar:{"1x":"","2x":""},respondentAvatar:{"1x":"","2x":""}},border:"#000000",cards:[],close:async(n=Oe)=>{const r=t(),{fadeout:o,remove:i,trackHistory:a,studyType:l}=r;await o(n),vn(r)||a({event:"closed"}),mn.info("SurveyClosing",{surveyId:r.surveyId}),oo.enable(),i({initiator:hn.Closed,studyType:l})},configureExitOnOverlayClick:()=>{},customMetadata:{},destroy:async n=>{const{eventEmitFn:r,fadeout:o,remove:i,studyType:a,surveyId:l}=t();r("survey.complete",l),await o(n),oo.enable(),i({initiator:hn.Complete,studyType:a})},enableCspTrustedTypes:!1,endCard:{headline:""},envId:"",eventEmitFn:gt.emit.bind(gt),fadeout:async n=>{const{eventEmitFn:r,headers:o,viewDocument:i}=t();return St(o)?Promise.resolve():(r(Ce.SurveyFadingOut),new Promise(a=>{const l=i.getElementById(n);l?(l.addEventListener("transitionend",()=>{a()}),l.classList.remove("ul-app--visible")):a()}))},forceBrandedLogo:!1,frame:document.createElement("iframe"),handleClickEmbedButton:n=>{const{cards:r,eventEmitFn:o,index:i}=t();o(n,{qid:r[i].name,props:r[i].props}),e(()=>({hasViewedEmbed:!0}))},handleUploadUpdate:({mediaRecordingUid:n,isComplete:r,progressPct:o,isSubmitted:i})=>{var m,g,f;const{cards:a,destroy:l,index:c,uploadProgress:u}=t(),h=r||((m=u[n])==null?void 0:m.isComplete),d={...u,[n]:{progressPct:h?100:o||((g=u[n])==null?void 0:g.progressPct),isComplete:h,isSubmitted:i||((f=u[n])==null?void 0:f.isSubmitted)}};if(e({uploadProgress:d}),a[c].type!=="uploading")return;const p=Object.entries(u).every(([x,v])=>!v.isSubmitted||v.isComplete||n==x&&r);if(p&&c>=a.length-1)return l(Oe);e({index:p?c+1:c,uploadingCardViewed:!0})},hasViewedEmbed:!1,headers:{Authorization:"","Content-Type":"","userleap-platform":"web","x-ul-environment-id":"","x-ul-installation-method":"web-snippet","x-ul-sdk-version":"","x-ul-visitor-id":""},index:0,isConversationalUI:!1,isPreview:!1,layout:"default",marketingUrl:"https://sprig.com",meta:{ch:0,cw:0,l:"",mode:null,p:"",sh:0,sw:0},mode:void 0,next:n=>{const{allResponses:r,cards:o,eventEmitFn:i,index:a,responseGroupUid:l,submit:c,trackHistory:u,uploadProgress:h,viewedCardCount:d}=t(),p=Array.isArray(n.data)?n.data:[n.data],m=Date.now(),g=[...o],f={response:[],responseGroupUid:l,questionIndex:a};let x=null;const v=r.slice(0);p.forEach((w,S)=>{const R=g[a+S],{type:E,...N}=w,y={...N,answeredAt:m};y.questionId=Math.floor(y.questionId);const P=y.value;Ps(R)&&(R.value=P,R.secondaryValue=y.secondaryValue||null),f.response.push(y);let T=P;(E==="multipleselect"||E==="multiplechoice")&&P!==null&&(T=E==="multiplechoice"?Object.values(P).find(C=>C!==!1):P,E==="multipleselect"&&(T=g[a+S].props.options.reduce((C,k)=>(P[k.id]&&C.push(k.value),C),[]))),v[a+S]=T,x=Xr({cards:g,index:a+S,hasEndCard:!!n.endCard,uploadProgress:h,allResponses:v})}),e({allResponses:v}),(x===null||gn.has(g[x].type))&&(f.completedAt=m);const _=c(f);if(x===null){n.completeSurvey();return}x&&!gn.has(g[x].type)&&_.finally(()=>{u({event:"seen",index:x})});const b=g[x];g[x]&&i&&i("survey.question",{qid:b.name,props:b.props}),e({cards:g,hasViewedEmbed:!1,index:x,viewedCardCount:d+1})},pendingRemoveIframeReason:null,previewKey:null,previewMode:void 0,recorder:()=>{},recorderEventEmitter:gt,resolveTrackedPromise:()=>{const{removeIframeIfReady:n}=t();e(r=>({unresolvedRequestCount:r.unresolvedRequestCount-1})),n()},responseGroupUid:"",remove:({initiator:n,studyType:r})=>{const{eventEmitFn:o,removeIframeIfReady:i,surveyId:a}=t();e({pendingRemoveIframeReason:n,studyType:r}),o(Ce.SurveyCloseRequested,{name:Ce.SurveyCloseRequested,initiator:n,studyType:r,"survey.id":a}),i()},removeIframeIfReady:()=>{const{eventEmitFn:n,pendingRemoveIframeReason:r,unresolvedRequestCount:o,studyType:i,surveyId:a}=t();r&&o===0&&(n(Ce.SurveyWillClose,{name:Ce.SurveyWillClose,initiator:r,studyType:i,"survey.id":a}),e({pendingRemoveIframeReason:null,studyType:i}))},seen:async()=>{const{trackHistory:n}=t();return n({event:"seen",isNew:!0})},slugName:null,showStripes:!1,showSurveyBrand:!1,startingQuestionIdx:null,styleNonce:"",submit:async({completedAt:n,questionIndex:r,response:o,responseGroupUid:i})=>{const a=t();if(!i||vn(a))return;const l={responseGroupUid:i,meta:a.meta,customMetadata:a.customMetadata,responses:o,completedAt:n,previewKey:a.previewKey};if(typeof a.addResponseGroupMeta=="function")try{const u=await a.addResponseGroupMeta();typeof u=="object"&&u!==null?l.meta={...l.meta,...u}:mn.error("addResponseGroupMeta must return an object")}catch(u){mn.error("addResponseGroupMeta promise failed",u)}const c=await a.trackPromise(lt(`${a.apiURL}/sdk/1/environments/${a.envId}/visitors/${a.userId}/responses/submit`,{body:JSON.stringify(l),headers:a.headers,method:"POST"}));if(!c.ok){c.reportError&&(console.warn("[Sprig] (ERR-427) Failed to submit response",c.error),await a.trackPromise(mo(a,"submitResponse",c.error)));return}o.forEach((u,h)=>{a.eventEmitFn(Ce.QuestionAnswered,{...u,questionIndex:r?r+h:void 0,"survey.id":a.surveyId})})},surveyId:0,surveyVisitorAttributes:{},tabTitle:"",trackHistory:async({event:n,index:r,isNew:o=!1})=>{const i=t();if(vn(i))return;const{cards:a,index:l}=i;let c=r??l,u=a[c];for(;u;){const h={sid:i.surveyId,qid:Math.floor(u.name),action:n,vid:i.userId,eid:i.envId,isNew:o,responseGroupUid:i.responseGroupUid,previewKey:i.previewKey},d=await i.trackPromise(lt(`${i.apiURL}/sdk/1/visitors/${i.userId}/surveys/${i.surveyId}/history`,{method:"POST",headers:i.headers,body:JSON.stringify(h)}));!d.ok&&d.reportError&&(console.warn("[Sprig] (ERR-428) Failed to track survey event",d.error),await i.trackPromise(mo(i,"trackHistory",d.error)));const p=a[c+1];if(u.groupId&&(p!=null&&p.groupId)&&p.groupId===u.groupId)c++,u=p,o=!1;else break}},trackPromise:async n=>{const{resolveTrackedPromise:r}=t();return e(o=>({unresolvedRequestCount:o.unresolvedRequestCount+1})),n.then(o=>(r(),o)).catch(o=>{throw r(),o})},unresolvedRequestCount:0,update:()=>{var b,w,S;const{cards:n,index:r,headers:o,eventEmitFn:i,frame:a,useMobileStyling:l,surveyId:c,viewDocument:u,isConversationalUI:h}=t(),d=o["userleap-platform"]==="web",p=St(o),m=n[r],g=m.type==="matrix"&&!(m.props.properties.displayMatrixAsAccordion||l);!p&&!l&&((b=a==null?void 0:a.setWidth)==null||b.call(a,bs));const[x,v]=ws(u,d&&!l,p),_=h&&x<532?532:x;p?(i(Ce.SurveyHeight,{name:Ce.SurveyHeight,contentFrameHeight:_,"survey.id":c}),i(Ce.SurveyWidth,{name:Ce.SurveyWidth,contentFrameWidth:v,"survey.id":c})):((w=a.setHeight)==null||w.call(a,_),!l&&g&&((S=a.setWidth)==null||S.call(a,v)))},uploadingCardViewed:!1,uploadProgress:{},useDesktopPrototype:void 0,useMobileStyling:!1,userId:"",viewDocument:window.document,viewedCardCount:0,focusedQuestionId:null,setFocusedQuestionId:n=>e({focusedQuestionId:n})})),vn=e=>!e.userId||e.meta&&e.meta.mode==="test"||e.isPreview||e.previewMode,mo=async(e,t,n)=>{const{mode:r,userId:o,envId:i,apiURL:a,headers:l,viewDocument:c}=e,u=c.documentElement,h={mode:r,screenWidth:window.screen.width,screenHeight:window.screen.height,clientWidth:u.clientWidth,clientHeight:u.clientHeight,location:window.location.href,language:window.navigator.language},d={action:t,err:{message:`${n==null?void 0:n.name} - ${n==null?void 0:n.message}`,stack:n==null?void 0:n.stack},meta:h,vid:o,envId:i};(await lt(`${a}/sdk/1/errors`,{method:"POST",headers:Object.assign({"x-ul-error":window.btoa(`userleap-${Date.now()}-error`)},l),body:JSON.stringify(d)})).ok||console.warn("[Sprig] (ERR-444) Failed to report error to API",n)},Ns=()=>{const{cards:e,close:t,endCard:n,headers:r,index:o}=H(u=>({cards:u.cards,close:u.close,endCard:u.endCard,headers:u.headers,index:u.index,useMobileStyling:u.useMobileStyling})),i=e.length,a=he(()=>()=>t(Oe),[t]),l=u=>{u.key==="Enter"&&a()};return(["email","link"].includes(r["userleap-platform"])?!1:!n||o+1!==i)?s("div",{"aria-label":"Close button",className:"close-btn",onClick:a,onKeyPress:l,role:"button",tabIndex:0,children:s("svg",{fill:"none",height:"16px",viewBox:"0 0 13 13",width:"16px",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M2.54964 1.78369L1.78369 2.54964L5.73405 6.5L1.78369 10.4504L2.54964 11.2163L6.5 7.26595L10.4504 11.2163L11.2163 10.4504L7.26595 6.5L11.2163 2.54964L10.4504 1.78369L6.5 5.73405L2.54964 1.78369Z",fill:"#262136"})})}):null},fo=e=>ke("svg",{fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",...e},ke("path",{d:"M17 10L12 15L7 10",stroke:"#0B2330",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5})),go=e=>ke("svg",{fill:"none",height:10,viewBox:"0 0 10 10",width:10,xmlns:"http://www.w3.org/2000/svg",...e},ke("path",{d:"M9.15377 1.30774L4.07685 8.23082L1.30762 5.00005",stroke:"white",strokeLinecap:"round",strokeWidth:2})),Ds=({visible:e})=>s("div",{className:"sprig-check-background",style:{opacity:e?1:0},children:s(go,{className:"sprig-check"})}),vo="250ms",bo=en(({animate:e,children:t,header:n,isOpen:r,onClick:o,showHeaderCheck:i},a)=>{const l=H(f=>f.update),c=oe(null),[u,h]=q(0),[d,p]=q("none"),[m,g]=q(!0);return K(()=>{var x;const f=(x=c.current)==null?void 0:x.getBoundingClientRect();h(r&&f?f.height:0)},[r]),K(()=>{l()},[u,l]),K(()=>{(u||!r)&&m&&g(!1),p(e&&!m?`height ${vo} ease`:"none")},[e,m,u,r]),s("div",{className:"sprig-accordion",ref:a,children:[s("button",{className:"sprig-accordion-header-container",onClick:o,type:"button",children:[s("div",{className:"sprig-header-label-container",children:[s("span",{className:"sprig-header-label",children:n}),s(Ds,{visible:i})]}),s(fo,{className:"sprig-caret",style:{transitionDuration:e?vo:"0",transform:r?"rotate(-180deg)":"none"}})]}),s("div",{className:"sprig-accordion-body",style:{transition:d,height:u},children:s("div",{ref:c,children:t})})]})}),bn=({style:e,stroke:t="black"})=>s("svg",{fill:"none",height:"10",style:e,viewBox:"0 0 12 10",width:"12",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{d:"M1.47839 5.2085L10.9384 5.2085",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.35"}),s("path",{d:"M7.0686 1.15845L10.9386 5.20845L7.0686 9.25845",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.35"})]}),O=(...e)=>e.filter(Boolean).join(" "),ne=(e,t,n)=>{const r=t?"--mobile":"--desktop",o=n?`${r}_${n}`:"";return`${e+r} ${e+o} ${e}`},js=(e,t)=>`${e} ${e}__${t}`,ie=e=>s("button",{...e,className:O("ul-card-text__button",e.className),id:"ul-card-text__button"}),_o=new WeakMap,As="sprig-sdk",Os=e=>{var r,o;const t=_o.get(e);if(t)return t;if(!((r=e.trustedTypes)!=null&&r.createPolicy))throw new Error("Trusted types not supported");const n=(o=e.trustedTypes)==null?void 0:o.createPolicy(As,{createHTML(i){return i},createScript(i){return i},createScriptURL(i){return i}});return _o.set(e,n),n},Ms=(e,t)=>{try{return Os(t).createHTML(e)}catch(n){return console.warn("Could not create TrustedHTML object",n),e}},Rt=(e,t,n=window)=>{var r;return t&&((r=n.trustedTypes)!=null&&r.createPolicy)?Ms(e,n):e},Re=({html:e,...t})=>{const{enableCspTrustedTypes:n}=H(o=>({enableCspTrustedTypes:o.enableCspTrustedTypes})),r=he(()=>Rt(e,n),[n,e]);return s("div",{...t,dangerouslySetInnerHTML:{__html:r}})},xo=()=>{const{viewDocument:e}=H(r=>({viewDocument:r.viewDocument})),[t,n]=q(!1);return K(()=>{const r=e.querySelector(".sprig-question-body"),o=new ResizeObserver(()=>{window.requestAnimationFrame(()=>{n(!!(r&&Me(r)&&r.scrollHeight>r.offsetHeight))})});return r&&o.observe(r),()=>{r&&o.disconnect()}},[e]),t},yo=({plainText:e,richText:t,id:n,className:r,isHeader:o,showAsterisk:i})=>t?s(Re,{className:r,html:t,id:n}):e?o?s("h1",{className:r,id:n,children:[e,i&&"*"]}):s("p",{className:r,id:n,children:e}):null,xe=({message:e,properties:t,isRequired:n})=>{const r=oe(null),o=t==null?void 0:t.captionText,i=xo();return s("div",{className:O("question-header-container","sprig-header-container",i?"sprig-border-bottom":null),ref:r,children:[s("div",{className:"question-header-button-container",children:s(yo,{className:"ul-question",id:"ul-question",isHeader:!0,plainText:e,richText:t==null?void 0:t.questionHtml,showAsterisk:n})}),s(yo,{className:"ul-caption",id:"ul-caption",plainText:o,richText:t==null?void 0:t.captionHtml})]})},$s=()=>s("svg",{fill:"none",height:"10",viewBox:"0 0 13 10",width:"13",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M11.5 1.5L4.5 8.5L1 5",stroke:"#FFFFFF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})}),ct=({isSubmitDisabled:e,handleSubmit:t})=>s("div",{className:"ul-card-longform__submit-button-container",children:s(ie,{className:"ul-card-longform__submit-button",disabled:e,onClick:t,children:["OK ",s($s,{})]})}),_n=(e,t)=>{const n=oe(0);return()=>{if(e.current){const o=e.current;o.style.height="1px";const i=o.scrollHeight,a=o.offsetHeight-o.clientHeight,l=i+a,c=parseInt(window.getComputedStyle(o).getPropertyValue("max-height")),u=l<=c?l:c;n.current!==u&&requestAnimationFrame(()=>{t()}),n.current=u,o.style.height=`${u}px`}}},Us=(e,t)=>{let n;return r=>{clearTimeout(n),n=window.setTimeout(()=>e(r),t)}},Hs=()=>{const{update:e,index:t,isConversationalUI:n,viewDocument:r}=H(({update:i,index:a,isConversationalUI:l,viewDocument:c})=>({update:i,index:a,isConversationalUI:l,viewDocument:c})),o=Us(e,100);K(()=>{if(n)return;const i=new ResizeObserver(o),a=r.querySelector(".ul-card__container");return a&&i.observe(a,{box:"border-box"}),()=>{i.disconnect()}},[o,e,t,n,r])},ko=({buttonText:e="View Prototype",handleClick:t})=>s("button",{className:"prototype-button",onClick:t,children:e},"prototype-btn"),ue=({embeddedType:e="prototype",properties:t,children:n})=>{var d;const{handleClickEmbedButton:r,hasViewedEmbed:o,headers:i,useDesktopPrototype:a}=H(p=>({handleClickEmbedButton:p.handleClickEmbedButton,hasViewedEmbed:p.hasViewedEmbed,headers:p.headers,useDesktopPrototype:p.useDesktopPrototype})),l=(t==null?void 0:t.conceptUrl)||((d=t==null?void 0:t.consentDocument)==null?void 0:d.url),c=window.innerWidth<Ji,u=i["userleap-platform"],h=(p,m)=>{p.preventDefault(),r(m)};if(Hs(),!a&&c&&!o&&l&&["email","link"].includes(u)){if(e==="prototype")return s(ko,{handleClick:p=>{h(p,"question.prototype.click")}});if(e==="pdf")return s(ko,{buttonText:(t==null?void 0:t.viewDocumentText)||"View Document",handleClick:p=>{h(p,"question.agreement.click")}})}return s(ae,{children:n})},wo=({isSelected:e,id:t,divId:n,themeColor:r,disabled:o=!1})=>s("div",{"aria-checked":e,"aria-disabled":o,"aria-labelledby":`label-${t}`,className:"select-checkbox",id:n,role:"checkbox",style:{...e?{backgroundColor:r,borderColor:r,boxShadow:"none"}:{},...o?{opacity:.5}:{}},tabIndex:o?-1:0,children:e&&s(go,{})}),$e=({ariaLabel:e,border:t,choiceStyle:n={},label:r,isSelected:o,value:i,text:a,id:l,isRadio:c,useMobileStyling:u,error:h,allowTextEntry:d,noneOfTheAbove:p,promptText:m,disabled:g=!1,onUserInputChanged:f})=>{const{styleNonce:x,viewDocument:v}=H(I=>({styleNonce:I.styleNonce,viewDocument:I.viewDocument})),[_,b]=q(!1);Bs(v,t,x);const w=({isSelected:I,userText:A})=>{f&&f({id:l,selected:I,value:i,userText:A,noneOfTheAbove:p})},S=I=>{g||(I.stopPropagation(),w({isSelected:c||!o,userText:a}),b(!1))},R=()=>{_||b(!0)},E=()=>{_&&b(!1)},N=I=>{g||(I.key==="Enter"||I.key===" ")&&S(I)},y={onClick:I=>S(I),onKeyPress:I=>N(I)};"ontouchstart"in v.documentElement?(y.onTouchStart=E,y.onTouchCancel=E,y.onTouchEnd=E):(y.onMouseDown=R,y.onMouseLeave=E);const P=c?`radio-${l}`:`checkbox-${l}`,T=o||_?[It]:[],C=[...h?[So]:[],...T,...g?["ul-choice-disabled"]:[]],k=r?{"aria-labelledby":`label-${l}`}:{"aria-label":e};return s("div",{className:O(ne("choice",u),...C),id:`choice-div-${l}`,style:{...n,...h?{borderColor:Be}:{},...g?{opacity:.5,cursor:"not-allowed"}:{}},...g?{}:y,"aria-disabled":g,children:[s("div",{className:O("choice-label-container"),children:[c?s("div",{...k,className:O("select-radio",...T),id:P,role:"radio",tabIndex:0}):s(wo,{disabled:g,divId:P,id:l,isSelected:o,themeColor:t}),r&&s("label",{className:O(ne("select-label",u)),htmlFor:P,id:`label-${l}`,children:r})]}),d&&o&&s("div",{className:O("choice-text-entry-container",...T),children:s(Fs,{onTextChange:I=>w({isSelected:o,userText:I}),promptText:m||"Please specify",textValue:a,useMobileStyling:u})})]})},Fs=({promptText:e,textValue:t,onTextChange:n,useMobileStyling:r})=>{const o=oe(null),{update:i}=H(l=>({update:l.update})),a=_n(o,()=>i());return K(()=>(a(),o.current&&o.current.focus(),()=>{i()}),[]),s("textarea",{"aria-label":e,"aria-multiline":"true","aria-placeholder":e,className:O(ne("choice-text-input",r)),"data-gramm":"false",maxLength:5e3,name:"text",onChange:l=>{a(),l.stopPropagation(),n(l.currentTarget.value)},onClick:l=>{l.stopPropagation()},onKeyPress:l=>{l.stopPropagation()},placeholder:e,ref:o,role:"textbox",rows:1,value:t})},Co="ul-select-style-element",It="ul-select-active-dynamic-style",So="ul-select-error-dynamic-style",qs=e=>e.tagName.toLowerCase()==="style",Bs=(e,t,n)=>{let r=e.getElementById(Co),o=!1;r||(r=e.createElement("style"),o=!0),qs(r)&&(r.id=Co,n&&(r.nonce=n),r.textContent=Vs(t),o&&e.head.appendChild(r))},Vs=e=>`
    .${It} {
      border-color: ${e};
    }
    .${It} .select-radio, .${It}.select-radio {
      border: 6px solid ${e};
      box-shadow: none;
    }
    .${So} {
      border-color: ${Be};
    }
  `,ce=({children:e})=>s("div",{className:"sprig-question-body",children:e}),me=({children:e})=>{const t=xo(),{isConversationalUI:n}=H(r=>({isConversationalUI:r.isConversationalUI}));return s("div",{className:O("sprig-question-footer-container",t&&!n?"sprig-border-top":null),children:e})},Eo=({logoOnly:e=!1,style:t={}})=>{const n=e?"35":"112",r=e?"79 0 31 15":"0 0 112 15";return s("svg",{alt:`${e?"Powered by ":""}Sprig`,fill:"none",height:"15",style:{display:"block",...t},viewBox:r,width:n,xmlns:"http://www.w3.org/2000/svg",children:[!e&&s("path",{d:"M0.648926 12.0181V2.8584H4.21631C6.0127 2.8584 7.25684 4.06445 7.25684 5.86084V5.87354C7.25684 7.66357 6.0127 8.88867 4.21631 8.88867H2.0708V12.0181H0.648926ZM3.86084 4.05811H2.0708V7.69531H3.86084C5.09229 7.69531 5.80957 7.02881 5.80957 5.87988V5.86719C5.80957 4.72461 5.09229 4.05811 3.86084 4.05811ZM11.6621 12.1514C9.63721 12.1514 8.39941 10.7993 8.39941 8.57764V8.56494C8.39941 6.34961 9.64355 4.99121 11.6621 4.99121C13.6743 4.99121 14.9185 6.34326 14.9185 8.56494V8.57764C14.9185 10.7993 13.6807 12.1514 11.6621 12.1514ZM11.6621 11.0024C12.8428 11.0024 13.5156 10.1011 13.5156 8.57764V8.56494C13.5156 7.03516 12.8428 6.14014 11.6621 6.14014C10.4751 6.14014 9.80859 7.03516 9.80859 8.56494V8.57764C9.80859 10.1074 10.4751 11.0024 11.6621 11.0024ZM17.6226 12.0181L15.7183 5.12451H17.1021L18.3398 10.4438H18.4414L19.8633 5.12451H21.1709L22.5928 10.4438H22.7007L23.9321 5.12451H25.2969L23.3989 12.0181H21.9834L20.5552 6.87646H20.4473L19.0254 12.0181H17.6226ZM29.334 12.1514C27.3154 12.1514 26.0967 10.7739 26.0967 8.59033V8.58398C26.0967 6.43213 27.3408 4.99121 29.2642 4.99121C31.1875 4.99121 32.3682 6.38135 32.3682 8.45068V8.93311H27.4805C27.5059 10.2534 28.2295 11.0215 29.3657 11.0215C30.248 11.0215 30.7749 10.5835 30.9399 10.228L30.9653 10.1772L32.292 10.1709L32.2793 10.228C32.0508 11.1357 31.0986 12.1514 29.334 12.1514ZM29.2705 6.12109C28.3311 6.12109 27.6201 6.76221 27.4995 7.94922H31.0034C30.8955 6.71777 30.2036 6.12109 29.2705 6.12109ZM34.0059 12.0181V5.12451H35.3833V6.16553H35.4849C35.7324 5.43555 36.3735 5.00391 37.2939 5.00391C37.5161 5.00391 37.7573 5.03564 37.897 5.06738V6.33691C37.6494 6.28613 37.4146 6.25439 37.1543 6.25439C36.1006 6.25439 35.3833 6.90186 35.3833 7.89844V12.0181H34.0059ZM41.9277 12.1514C39.9092 12.1514 38.6904 10.7739 38.6904 8.59033V8.58398C38.6904 6.43213 39.9346 4.99121 41.8579 4.99121C43.7812 4.99121 44.9619 6.38135 44.9619 8.45068V8.93311H40.0742C40.0996 10.2534 40.8232 11.0215 41.9595 11.0215C42.8418 11.0215 43.3687 10.5835 43.5337 10.228L43.5591 10.1772L44.8857 10.1709L44.873 10.228C44.6445 11.1357 43.6924 12.1514 41.9277 12.1514ZM41.8643 6.12109C40.9248 6.12109 40.2139 6.76221 40.0933 7.94922H43.5972C43.4893 6.71777 42.7974 6.12109 41.8643 6.12109ZM49.1133 12.1323C47.3804 12.1323 46.2568 10.7422 46.2568 8.57764V8.56494C46.2568 6.38135 47.3613 5.00391 49.1133 5.00391C50.0591 5.00391 50.8652 5.47363 51.2334 6.21631H51.3413V2.42041H52.7124V12.0181H51.3413V10.9326H51.2334C50.8335 11.688 50.0781 12.1323 49.1133 12.1323ZM49.5068 10.958C50.6558 10.958 51.3604 10.0503 51.3604 8.57764V8.56494C51.3604 7.09229 50.6494 6.18457 49.5068 6.18457C48.3516 6.18457 47.6597 7.08594 47.6597 8.56494V8.57764C47.6597 10.0566 48.3516 10.958 49.5068 10.958ZM61.98 12.1323C61.0151 12.1323 60.2598 11.688 59.8599 10.9326H59.7583V12.0181H58.3809V2.42041H59.7583V6.21631H59.8599C60.228 5.47363 61.0342 5.00391 61.98 5.00391C63.7319 5.00391 64.8364 6.38135 64.8364 8.56494V8.57764C64.8364 10.7422 63.7192 12.1323 61.98 12.1323ZM61.5928 10.958C62.7417 10.958 63.4336 10.0566 63.4336 8.57764V8.56494C63.4336 7.08594 62.7417 6.18457 61.5928 6.18457C60.4438 6.18457 59.7329 7.09229 59.7329 8.56494V8.57764C59.7329 10.0503 60.4438 10.958 61.5928 10.958ZM66.8867 14.4429C66.7153 14.4429 66.5122 14.4302 66.3345 14.4111V13.3257C66.4678 13.3447 66.6392 13.3511 66.7979 13.3511C67.439 13.3511 67.8262 13.0781 68.0293 12.3799L68.1309 12.0244L65.6299 5.12451H67.1152L68.8418 10.6343H68.9624L70.6826 5.12451H72.1299L69.5654 12.2847C68.9814 13.9287 68.2832 14.4429 66.8867 14.4429Z",fill:"black",fillOpacity:"0.7"}),s("path",{d:"M81.1088 6.63629C79.6878 6.32154 78.9672 5.76865 78.9672 4.99369C78.9672 4.19299 79.736 3.5886 80.7556 3.5886C81.8066 3.5886 82.5995 4.25285 82.5995 5.13336V5.20352H84.0518V5.13336C84.0518 3.52424 82.6405 2.30774 80.7693 2.30774C79.8676 2.30774 79.0414 2.58451 78.4433 3.08655C78.1463 3.33144 77.9077 3.63818 77.7448 3.98479C77.5818 4.33141 77.4984 4.70934 77.5005 5.09153C77.4946 5.44197 77.5675 5.78934 77.714 6.10857C77.8605 6.42779 78.0769 6.71092 78.3475 6.93752C78.8512 7.37584 79.5659 7.70024 80.4709 7.90299C81.9949 8.23898 82.7676 8.81054 82.7676 9.60094C82.7676 10.4576 81.9258 11.1032 80.813 11.1032C79.6571 11.1032 78.7854 10.3856 78.7854 9.43424V9.36408H77.3318V9.43424C77.3318 11.1167 78.8219 12.3847 80.7973 12.3847C81.7421 12.3847 82.6093 12.0983 83.2393 11.5769C83.5519 11.3237 83.8034 11.0048 83.9753 10.6433C84.1472 10.2818 84.2352 9.88702 84.2329 9.48766C84.2329 8.05875 83.1833 7.09907 81.1088 6.63629Z",fill:"black",fillOpacity:"0.7"}),s("path",{d:"M89.2394 4.68276C88.6963 4.67605 88.1596 4.79915 87.6751 5.04156C87.1905 5.28397 86.7725 5.63851 86.4566 6.07497V4.85204H85.0747V14.8479H86.4566V11.0356C86.7725 11.472 87.1906 11.8265 87.6751 12.0688C88.1596 12.3111 88.6963 12.434 89.2394 12.4272C91.3836 12.4272 93 10.7627 93 8.55495C93 6.34723 91.3836 4.68276 89.2394 4.68276ZM91.5608 8.84202C91.5057 9.41605 91.2512 9.95356 90.8406 10.3633C90.4299 10.773 89.8883 11.0296 89.3078 11.0896C88.5363 11.1669 87.8177 10.9461 87.2841 10.4692C86.7505 9.99222 86.4566 9.3106 86.4566 8.55495C86.4566 7.10159 87.5538 6.00546 89.0087 6.00546C89.7619 6.00546 90.4421 6.29124 90.9171 6.81002C91.407 7.34232 91.6357 8.06385 91.5608 8.84202Z",fill:"black",fillOpacity:"0.7"}),s("path",{d:"M109.95 4.85407V6.06349C109.298 5.18298 108.292 4.68286 107.153 4.68286C105.017 4.68286 103.406 6.31709 103.406 8.48426C103.406 10.6514 105.017 12.285 107.153 12.285C108.296 12.285 109.303 11.79 109.95 10.9185V11.1046C109.95 12.6101 108.993 13.5826 107.513 13.5826C106.513 13.5826 105.68 13.1494 105.284 12.424L105.264 12.3867H103.838L103.871 12.48C104.112 13.1892 104.583 13.8001 105.211 14.2179C105.841 14.6324 106.637 14.8512 107.513 14.8512C108.637 14.8512 109.594 14.4972 110.28 13.8285C110.967 13.1597 111.332 12.2194 111.332 11.1213V4.85407H109.95ZM109.175 10.3502C108.588 10.905 107.752 11.138 106.879 10.9887C106.361 10.8984 105.886 10.6475 105.523 10.2725C105.16 9.89751 104.927 9.41787 104.859 8.90328C104.736 8.03757 104.999 7.21756 105.581 6.655C106.069 6.19093 106.723 5.93643 107.401 5.94699C107.565 5.94713 107.729 5.96026 107.891 5.98625C108.946 6.15489 109.781 7.01609 109.921 8.0852C110.039 8.96507 109.766 9.78958 109.175 10.3502Z",fill:"black",fillOpacity:"0.7"}),s("path",{d:"M101.89 2.12378C101.63 2.06766 101.358 2.11486 101.133 2.25518C100.908 2.39551 100.747 2.61769 100.687 2.87371C100.626 3.12973 100.67 3.39902 100.809 3.62339C100.947 3.84775 101.17 4.00917 101.428 4.07275C101.503 4.08936 101.58 4.09778 101.657 4.09786C101.906 4.09824 102.146 4.0083 102.331 3.84518C102.517 3.68206 102.636 3.45714 102.664 3.21327C102.693 2.9694 102.63 2.72361 102.487 2.5227C102.344 2.32179 102.132 2.17981 101.89 2.12378Z",fill:"black",fillOpacity:"0.7"}),s("path",{d:"M100.967 10.934H99.7755C98.9285 10.934 98.4196 10.3644 98.4196 9.40982C98.4196 8.4791 98.8757 7.36945 99.8054 6.01778L99.8178 5.99976V5.61807L95.8571 5.06453C95.8585 4.90331 95.8162 4.74466 95.7346 4.60501C95.653 4.46536 95.5352 4.34979 95.3932 4.27027C95.0381 4.07718 94.6498 4.07717 94.3279 4.26383C94.1667 4.35799 94.035 4.4945 93.9476 4.65816C93.8602 4.82182 93.8205 5.00623 93.8328 5.19087C93.8452 5.37552 93.9092 5.55315 94.0176 5.70402C94.1261 5.85489 94.2748 5.97309 94.4472 6.04546L93.2151 12.258H94.5833L95.7196 6.35891L97.8593 6.7155C97.284 7.73439 96.9921 8.68442 96.9921 9.53919C96.9921 11.1168 97.9577 12.1498 99.5187 12.2496V12.258H102.346V4.87723H100.967V10.934Z",fill:"black",fillOpacity:"0.7"})]})},To=({forceBrandedLogo:e,marketingUrlLink:t})=>s("div",{className:e?"yellow-footer-logo":"",style:{marginTop:"4px",marginBottom:"4px"},children:s("a",{href:t,rel:"noreferrer",target:"_blank",children:s("div",{style:{display:"flex"},children:[s(Eo,{logoOnly:!1}),e&&s(bn,{style:{display:"block",margin:"auto 0 auto 4px",transform:"rotateY(0deg) rotate(-45deg)"}})]})})}),Ro=({marketingUrlLink:e})=>s("a",{dir:"ltr",href:e,rel:"noreferrer",target:"_blank",children:s("div",{className:"thank-you-card-link",children:[s("div",{className:"sprig-box-logo",children:s(Eo,{logoOnly:!0,style:{margin:"auto"}})}),s("div",{children:s("p",{children:["Capture insights about your own product",s(bn,{style:{display:"inline-flex",marginInlineStart:"4px",verticalAlign:"middle"}})]})})]})}),fe=e=>(e==null?void 0:e.buttonText)||"Next",dt=e=>(e==null?void 0:e.skipButtonText)||"Skip",Io=({marketingUrl:e,slugName:t,surveyId:n,forceBrandedLogo:r})=>`${e}?utm_source=survey_branding&utm_medium=website&utm_campaign=${t}&utm_content=${n}${r?"&utm_term=poweredby_pill":""}`,zs=()=>{var _;const{border:e,cards:t,forceBrandedLogo:n,headers:r,index:o,marketingUrl:i,showSurveyBrand:a,slugName:l,surveyId:c,viewedCardCount:u}=H(b=>({border:b.border,cards:b.cards,forceBrandedLogo:b.forceBrandedLogo,headers:b.headers,index:b.index,marketingUrl:b.marketingUrl,showSurveyBrand:b.showSurveyBrand,slugName:b.slugName,surveyId:b.surveyId,viewedCardCount:b.viewedCardCount})),h=oe(null),d=t.filter(b=>b.type!=="uploading"&&b.type!=="thanks"),p=vs(t,o),m=u+1,g=m/(m+p),f=Io({marketingUrl:i,slugName:l,surveyId:c,forceBrandedLogo:n});K(()=>{h.current&&(h.current.style.width=`${g*100}%`)},[g]);const x=()=>s(ae,{children:[d.length>1&&s("div",{className:"ul-progress-bar-container ul-progress-bar-container__footer",children:s("div",{className:"ul-progress-bar-current",ref:h,style:{border:`1px solid ${e||"#000"}`}})}),a?s(To,{forceBrandedLogo:n,marketingUrlLink:f}):null]}),v=((_=t[o])==null?void 0:_.type)==="thanks";return s("footer",{className:`ul-footer ${r["userleap-platform"]==="link"?"ul-footer__link":""}`,children:v&&n?s(Ro,{marketingUrlLink:f}):x()})},Qs=/<piped-value\b([^>]*)>.*?<\/piped-value>/gis,Lo=["questionHtml","captionHtml","footerHtml","richTextBody"],xn=e=>!!e.props&&typeof e.props=="object"&&"properties"in e.props,Ws=e=>e!=null&&typeof e=="object"&&"value"in e,yn=e=>!!e.props&&typeof e.props=="object"&&"options"in e.props&&Array.isArray(e.props.options),Gs=e=>!!e&&typeof e=="object"&&!Array.isArray(e),Po=e=>["string","number"].includes(typeof e),No=e=>e.length===0?"":e.length===1?e[0]:e.join(", "),Zs=e=>{if(!xn(e))return!1;const t=e.props.properties;return!!t&&typeof t=="object"&&"matrixColumn"in t},Ys=e=>{var n,r;const t=Ws(e)?e.value:void 0;if(t!=null){if(e.type==="multipleselect"&&yn(e)&&Gs(t)){const o=e.secondaryValue??null,i=e.props.options.filter(a=>t[String(a.id)]===!0).map(a=>{var l;return a.label+((l=o==null?void 0:o[String(a.id)])!=null&&l.userText?`: ${o[String(a.id)].userText}`:"")});return i.length?No(i):"No options selected"}if(e.type==="multiplechoice"&&typeof t=="object"&&t!==null){const o=e.secondaryValue??null,i=Object.keys(t)[0];if(i){const a=e.props.options.find(l=>String(l.id)===i);return(a==null?void 0:a.label)+((n=o==null?void 0:o[i])!=null&&n.userText?`: ${(r=o==null?void 0:o[i])==null?void 0:r.userText}`:"")}}if(e.type==="matrix"&&yn(e)&&Zs(e)){const o=e.props.options,i=e.props.properties.matrixColumn,a=[];for(const[l,c]of Object.entries(t)){const u=o.find(g=>String(g.id)===l),h=(u==null?void 0:u.label)??l,d=Po(c)?String(c):JSON.stringify(c),p=i.find(g=>g.value===d),m=(p==null?void 0:p.label)??d;a.push(`${h}: ${m}`)}return a.join("; ")}if(e.type==="rankorder"&&yn(e)){const o=e.props.options.reduce((a,l)=>(a[String(l.id)]=l.label,a),{}),i=[];for(const[a,l]of Object.entries(t)){const c=o[a];c&&(i[l-1]=c)}return No(i)}if(Po(t)){const o=String(t).replaceAll(/[\u200B-\u200D\uFEFF]/g,"").trim();return o===""?void 0:o}try{return JSON.stringify(t)}catch{return String(t)}}},Do=(e,t)=>e.map(n=>{if(!xn(n)||n.props.properties===void 0||n.props.properties===null)return n;const r=n.props.properties;if(r===null||typeof r!="object"||!Lo.some(a=>a in r))return n;let o=!1;const i={};for(const a of Lo){const l=r[a];if(l!==void 0){const c=Ks(l,t);i[a]=c,c!==l&&(o=!0)}}return o?{...n,props:{...n.props,properties:{...r,...i}}}:n}),jo=(e,t)=>{const n=new RegExp(`${t}="([^"]*)"`,"i").exec(e);return(n==null?void 0:n[1])??null},Ks=(e,t)=>{if(e==null)return e;let n=!1;const r=e.replace(Qs,(o,i)=>{n=!0;const a=jo(i,"answer-id"),l=jo(i,"fallback-text")??"";if(!a)return l;const c=a.startsWith("attr-")?a:Number(a);if(Object.hasOwn(t,c)){const u=t[c];return String(u)}return l});return n?r:e},kn=(e,t)=>{const n={};if(t)for(const[r,o]of Object.entries(t))typeof o=="string"?n[`attr-${r}`]=o:o!=null&&(n[`attr-${r}`]=JSON.stringify(o));for(const r of e){const o=Ys(r);o!==void 0&&(n[r.name]=o)}return n},wn=e=>{var t;return xn(e)&&((t=e.props.properties)!=null&&t.questionHtml)&&typeof e.props.properties.questionHtml=="string"?e.props.properties.questionHtml.replace(/<[^>]*>/g,"").trim():e.props&&"message"in e.props&&typeof e.props.message=="string"?e.props.message.trim():e.props&&"questionHtml"in e.props&&typeof e.props.questionHtml=="string"?e.props.questionHtml.replace(/<[^>]*>/g,"").trim():""},Js=()=>{const{border:e,cards:t,index:n,focusedQuestionId:r,isConversationalUI:o}=H(l=>({border:l.border,cards:l.cards,index:l.index,focusedQuestionId:l.focusedQuestionId,isConversationalUI:l.isConversationalUI})),{totalQuestions:i,fraction:a}=he(()=>{var h;const l=t.filter(d=>d.type!=="uploading"&&d.type!=="thanks"),c=l.length;if(c<=1)return{totalQuestions:c,fraction:0};if(((h=t[n])==null?void 0:h.type)==="thanks")return{totalQuestions:c,fraction:1};let u=0;return o?u=n+1:u=l.findIndex(d=>d.name===r),{totalQuestions:c,fraction:u/(c+1)}},[t,n,r,o]);return i<=1?null:s("div",{className:"ul-progress-bar-container ul-progress-bar-container__header",children:s("div",{className:"ul-progress-bar-current",style:{width:`${a*100}%`,border:`1px solid ${e??"#000"}`}})})},Xs=Ct(()=>Promise.resolve().then(()=>xl)),ea=Ct(async()=>({default:(await Promise.resolve().then(()=>lc)).PageCard})),ta=()=>{const{answers:e,border:t,cards:n,close:r,configureExitOnOverlayClick:o,destroy:i,endCard:a,eventEmitFn:l,fontFamily:c,headers:u,isConversationalUI:h,index:d,next:p,previewMode:m,productConfig:g,seen:f,showStripes:x,studyType:v,surveyId:_,surveyVisitorAttributes:b,update:w,useMobileStyling:S,viewDocument:R}=H(M=>({answers:M.answers,border:M.border,cards:M.cards,close:M.close,configureExitOnOverlayClick:M.configureExitOnOverlayClick,destroy:M.destroy,endCard:M.endCard,eventEmitFn:M.eventEmitFn,fontFamily:M.fontFamily,headers:M.headers,index:M.index,isConversationalUI:M.isConversationalUI,previewMode:M.previewMode,productConfig:M.productConfig,next:M.next,seen:M.seen,showStripes:M.showStripes,studyType:M.studyType,surveyId:M.surveyId,surveyVisitorAttributes:M.surveyVisitorAttributes,update:M.update,useMobileStyling:M.useMobileStyling,viewDocument:M.viewDocument})),E=oe(null),N=oe(!1),y=oe(!1),P=u["userleap-platform"],{props:T,type:C,name:k}=n[d];K(()=>{if(window.Sprig)return window.Sprig.trackHistory=M=>H.getState().trackHistory(M),()=>{window.Sprig.trackHistory=void 0}},[]),K(()=>{E.current&&(E.current.classList.contains("ul-app--visible")||E.current.classList.add("ul-app--visible"),!N.current&&l&&(N.current=!0,l(Ce.SurveyAppeared,{name:Ce.SurveyAppeared,"survey.id":_})))},[l,_]),K(()=>{const M=()=>{R.visibilityState==="visible"&&(f(),R.removeEventListener("visibilitychange",M))};return R.addEventListener("visibilitychange",M),M(),()=>{R.removeEventListener("visibilitychange",M)}},[f,R]);const I=we(async()=>{if(!R)return;const M=R.getElementById("conversational-ui-styles");if(!h&&M){M.remove(),y.current=!1;return}if(h&&!M){const X=await Promise.resolve().then(()=>cc);fn({document:R,elementId:"conversational-ui-styles",styleString:X.default}),requestAnimationFrame(()=>{w()}),y.current=!0}},[h,R,w]);K(()=>{o(()=>r())},[r,o]),K(()=>{I()},[I,R]);const A=he(()=>Es(n,d),[n,d]),$=kn(n,b),L=we(M=>{p({data:M,completeSurvey:()=>i(Oe),endCard:a}),Cs(R)},[p,i,a,R]);if(e){for(const M of e)if(M.questionId===k){let X;if(C==="multiplechoice"){const J=T.options.find(({value:_e})=>_e===M.value);if(!J)break;X={[J.id]:J.value}}else X=M.value;L({value:X,type:C,questionId:M.questionId});break}}const D=M=>{var ge;const X=window.sprigAPI,J=M.target;if(!X||!J)return;const _e=[J,J.parentElement];for(const le of _e)if(((ge=le==null?void 0:le.tagName)==null?void 0:ge.toLowerCase())==="a"){M.preventDefault();try{const pe=new URL(le.href);(pe.protocol==="http:"||pe.protocol==="https:")&&(X==null||X.openUrl(pe.toString()))}catch(pe){console.error(pe)}return}},Q=!S&&((g==null?void 0:g.framePosition)==="center"||(g==null?void 0:g.desktopDisplay)==="center-modal"||((g==null?void 0:g.placement)||"").includes("center"));return h&&!y.current&&ve(v)?null:s("div",{className:O("ul-app",St(u)?"ul-app--visible":"ul-app--overlay"),dir:"auto",id:Oe,onClick:D,ref:E,style:{"--theme":t,...c?{fontFamily:c.replace(";","")}:{},...Q?{position:"relative"}:{}},children:s("div",{className:"ul-app__container",children:s("div",{className:O(ne("ul-card__container",S,v)),style:{...v!=="feedbackButton"||(g==null?void 0:g.desktopDisplay)==="center-modal"?{borderColor:t}:{},...(g==null?void 0:g.desktopDisplay)==="slider"?{margin:"0px"}:{}},children:[s("div",{className:"sprig-container",children:[x&&s("div",{className:"ul-header__container",dir:"ltr",children:s("div",{className:"ul-header",children:"For development purposes only"})}),m&&s("div",{className:"ul-header__container",dir:"ltr",children:s("div",{className:"ul-header",children:"Preview Mode: Response will not be recorded."})}),ve(v)&&s(Js,{}),s("div",{className:O(js("ul-card-main-content",P)),children:h?s(Ze,{fallback:null,children:s(Xs,{cards:n,next:L,previousResponses:$})}):s(Ze,{fallback:null,children:s(ea,{cards:A,next:L,previousResponses:$})})}),!ve(v)&&s(zs,{})]}),!h&&s(Ns,{})]})})})},na=`html,body,p,ol,ul,li,dl,dt,dd,blockquote,figure,fieldset,legend,textarea,pre,iframe,hr,h1,h2,h3,h4,h5,h6{margin:0;padding:0}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:400}button,input,select,textarea{margin:0}html{box-sizing:border-box}*,*:before,*:after{box-sizing:inherit}ol,ul{padding-inline-start:1em}.ul-loading-spinner-container{font-size:1.8rem;flex-grow:1;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.ul-loading-spinner{display:inline-block;position:relative;width:6rem;height:6rem}.ul-loading-spinner div{box-sizing:border-box;display:block;position:absolute;width:80%;height:80%;margin:5px;border:5px solid #152e3e;border-radius:50%;animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;border-color:#152e3e transparent transparent transparent}.ul-loading-spinner .first{animation-delay:-.45s}.ul-loading-spinner .second{animation-delay:-.3s}.ul-loading-spinner .third{animation-delay:-.15s}@keyframes lds-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.fade-in-transition{animation:fadeIn .4s ease-in}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.ul-card{flex:1 1 auto;border-radius:2px;display:flex;flex-direction:column;font-size:17px;line-height:19px;text-align:start;min-width:200px;justify-content:center;animation:enable-transitions 0s .3s forwards;min-height:0}@keyframes enable-transitions{to{transition:opacity .2s ease-in-out}}.ul-focus-transitions-active .ul-card,.ul-card--with-transitions{transition:opacity .2s ease-in-out}.ul-card__container--desktop{border:2px solid #fff;box-shadow:0 0 15px #00000026;margin:15px}.ul-card__container--mobile{border-width:0;box-shadow:0 0 5px #00000040;margin-top:5px}.ul-card__container--desktop_longFormSurvey,.ul-card__container--mobile_longFormSurvey{margin:0}.sprig-container{display:flex;flex-direction:column;width:100%;height:fit-content;flex:1 1 auto;min-height:0;justify-content:center}.ul-card__container{background:#fff;border-radius:6px;display:flex;flex-direction:column;flex-grow:1;flex:1 1 auto;font-size:17px;line-height:23px;padding:0;min-height:0;position:relative;text-align:center;word-break:normal}.ul-card__container--desktop_feedbackButton{box-shadow:unset}.ul-card-vertical__button-wrapper{flex-direction:column;align-items:center}.ul-card__button-wrapper{margin-top:4px;display:flex;gap:16px;justify-content:center;align-self:stretch}.sprig-question-footer-container{align-items:center;width:100%;height:fit-content;display:flex;flex-direction:column;padding:12px 20px 0}.long-form-question-footer-container{position:fixed;bottom:0;left:0;width:100%;display:flex;justify-content:space-between;align-items:center;overflow:visible;z-index:1000;pointer-events:none;padding:32px}@media only screen and (max-width: 700px){.long-form-question-footer-container{position:relative}}.long-form-question-footer-container--mobile{background-color:#fff;border-top:1px solid #e6e6e6;padding:16px 24px}.long-form-question-footer-container-center{justify-content:center}.long-form-question-footer-container .long-form-question-footer-container-logo{width:auto;pointer-events:auto}.long-form-question-footer-container-center .long-form-question-footer-container-logo{margin-left:0}.long-form-question-footer-container .long-form-question-footer-container-actions{display:flex;gap:8px;pointer-events:auto}.long-form-question-footer-container .long-form-question-footer-container-actions .long-form-button{display:flex;justify-content:center;align-items:center;gap:8px;padding:12px;border-radius:8px;height:40px;width:40px}.long-form-question-footer-container .long-form-question-footer-container-actions .long-form-button .long-form-button-text-container{display:flex;align-items:center}.ul-rich-text-body{min-height:2em}.ul-rich-text-body,.ul-rich-text-body p{margin-top:10px;margin-bottom:10px}.ul-rich-text-body li{margin:5px 0}.ul-rich-text-body p,.ul-rich-text-body li{font-size:15px;line-height:130.35%;letter-spacing:.02em;color:#343442;text-align:start;white-space:pre-line}.ul-rich-text-body:last-child,.ul-rich-text-body li:last-child{margin-bottom:15px}.ul-card-main-content__link,.ul-card-main-content__email,.ul-card-main-content__web,.ul-card-main-content__android,.ul-card-main-content__ios{display:flex;flex:1 1 auto;min-height:0;flex-direction:column;z-index:2;height:fit-content;overflow:auto;scrollbar-width:thin;scroll-behavior:smooth}.sprig-border-bottom{border-bottom:1px solid rgba(0,0,0,.1)}.sprig-border-top{border-top:1px solid rgba(0,0,0,.1)}.question-header-container{z-index:1}.sprig-header-container{padding:16px}.question-header-button-container{display:grid;grid-template-columns:97fr 3fr;align-items:center;justify-content:space-between;width:100%;height:fit-content}.ul-card--thanks-content .question-header-button-container{justify-content:center}.sprig-question-body{padding:0 20px;min-height:0;flex-shrink:1;overflow:auto;position:relative;align-self:stretch;width:100%}.sprig-stretch{align-self:stretch}.ul-question{color:#343442;display:block;font-size:17px;line-height:125%;font-weight:500;cursor:default;text-align:start}.ul-question ol,.ul-question ul,.ul-caption ol,.ul-caption ul{margin-left:1em}.ul-caption{flex:1 0 auto;font-size:14px;line-height:130.35%;letter-spacing:.02em;color:#6c6c6e;text-align:start;margin-top:4px}.ul-card__choices{margin:5px 0 0;flex:1 0}.choice--mobile{border:2px solid #e6e6e6}.choice--desktop{border:1px solid #e6e6e6}.choice{align-items:flex-start;color:#262136;cursor:pointer;display:flex;justify-content:flex-start;flex-direction:column;box-sizing:border-box;border-radius:3px;margin-bottom:7px;font-size:15px;line-height:20px;padding:10px 20px 10px 15px;background-color:#00000003}.choice--desktop:hover,.choice--desktop:active,.choice--mobile:active{background-color:#0000000d}.choice-label-container{align-items:center;display:flex;flex-direction:row;flex:0 0 fit-content;gap:15px;height:fit-content;justify-content:flex-start;width:100%}.choice-text-entry-container{width:100%;height:fit-content;flex:0 1 fit-content;overflow:hidden}.choice .choice-text-input--mobile{max-height:63px}.choice .choice-text-input--desktop{max-height:150px}.choice .choice-text-input{box-sizing:border-box;background-color:transparent;color:#343442;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;min-height:20px;max-height:60px;padding:0;margin-top:8px;resize:none;width:100%;font-size:14px;line-height:20px;outline:none;border:none;overflow-wrap:break-word}.choice .choice-text-input::placeholder{color:#6c6c6e80}.ul-thanks-check{text-align:center;margin-bottom:20px}.ul-card--thanks-content{padding:20px 0 10px}.ul-card--thanks .ul-question{padding-top:0;text-align:center}.ul-card--thanks .ul-caption{padding-top:0;text-align:center;overflow-wrap:break-word;-webkit-hyphens:auto;hyphens:auto;hyphenate-limit-lines:no-limit}.ul-card--uploading .ul-question{padding-top:15px;text-align:center}.ul-card--uploading .ul-caption{padding-top:5px;text-align:center;overflow-wrap:break-word}.select-checkbox{height:16px;width:16px;display:flex;box-sizing:border-box;background-color:"transparent";align-items:center;justify-content:center;border-radius:4px;border:1px solid #b0b5b7;flex-shrink:0}.select-radio{height:16px;width:16px;border-radius:16px;border:1px solid #323232;display:flex;box-sizing:border-box;box-shadow:inset 2px 2px #0000001a;background-color:"transparent";align-items:center;justify-content:center}.footer{width:100%;margin-top:12px;font-size:12px;line-height:12px;color:#000000b3}[class^=CenteredSurveyLayout] .ul-header__container,[class^=QuestionConceptTestLayout] .ul-header__container,.ul-websurvey-frame .ul-card__container,.ul-websurvey-frame-mobile .ul-card__container{margin-bottom:unset}[class^=CenteredSurveyLayout] .ul-card__container,[class^=QuestionConceptTestLayout] .ul-card__container,.ul-websurvey-frame .ul-card__container,.ul-websurvey-frame-mobile .ul-card__container{align-self:center;box-shadow:unset;border-radius:unset;border:none!important;position:unset;width:100%}@media only screen and (min-height: 600px) and (width: 600px){.ul-card{position:relative;top:-20px}}.ul-vertical-centered-container{display:flex;flex-direction:column;align-items:center;align-self:stretch}.sprig-accordion{width:100%;margin-bottom:8px}.sprig-accordion-body{width:100%;overflow:hidden}.sprig-accordion-header-container{background:transparent;border:none;display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%;cursor:pointer;margin:8px 0 0;padding:0;font-family:inherit}.sprig-header-label-container{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:8px;flex:1 1 0}.sprig-header-label{color:#343442;font-size:15px;font-weight:590;line-height:21px;text-align:start;overflow:hidden}.sprig-check-background{flex:0 0 16px;height:16px;width:16px;border-radius:8px;margin-right:8px;background-color:#efefee;display:flex;align-items:center;justify-content:center}.sprig-check{height:9px;width:9px;margin-left:-1px}.sprig-check path{stroke:#506067;stroke-width:1.5}.sprig-caret{height:20px;width:20px;transition-property:transform}.sprig-caret path{stroke:#000}.ul-card-longform__submit-button-container{display:flex;justify-content:flex-end}.ul-card-longform__submit-button-container .ul-card-longform__submit-button{display:flex;flex-direction:row;align-items:center;white-space:nowrap;gap:4px;border-radius:8px;color:#fff;cursor:pointer}.ul-card-longform__submit-button-container .ul-card-longform__submit-button:disabled{opacity:.5;cursor:not-allowed}.ul-card-list-container--longform{display:flex;flex-direction:column;gap:2rem;width:100%;align-items:center;padding-block-start:calc(40vh - 100px);padding-block-end:calc(50vh - 100px);height:auto}.ul-card-list-container--longform:has(.ul-card-scroll-wrapper:nth-child(2)){gap:1rem;padding-block-start:40px}@media (min-height: 1200px){.ul-card-list-container--longform{padding-block-start:calc(50vh - 100px)}}@media (max-width: 600px){.ul-websurvey-frame-mobile.long-form-survey>.ul-websurvey-sidebar-mobile{padding-top:0}.ul-card-list-container--longform .ul-card-scroll-wrapper:last-child{padding-bottom:80px}.ul-card-list-container--longform:has(.ul-card-scroll-wrapper:nth-child(2)){padding-block-start:80px}}.ul-card-scroll-wrapper{width:100%;max-width:100vw;position:relative;display:flex;justify-content:center}.ul-card--unfocused{opacity:.3;transition:opacity .3s ease-in-out}.ul-consent-legal__name-input--mobile{border:2px solid #e6e6e6}.ul-consent-legal__name-input--desktop{border:1px solid #e6e6e6}.ul-consent-legal__name-input{background:#00000003;box-sizing:border-box;color:#343442;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;padding:10px 20px 10px 15px;border-radius:3px;font-size:15px;line-height:20px;margin-bottom:7px;width:100%}.ul-consent-legal__name-input::placeholder{color:#6c6c6e80}.ul-consent-legal__name-input:focus{outline:none;background:#fff}.ul-consent-legal__name-input--desktop:hover:not(:focus){background-color:#0000000d}.ul-card__consent-legal .choice{font-size:15px;padding:10px 15px;background-color:#00000003}.ul-card__consent-legal .choice--desktop:hover,.ul-card__consent-legal .choice--desktop:active,.ul-card__consent-legal .choice--mobile:active{background-color:#0000000d}.ul-card--likert__numbers{align-items:center;border-radius:5px;display:flex;flex-direction:row;flex:1 0;justify-content:center;margin:5px 0 0}.ul-card--likert__numbers>button{padding:unset}.likert-number--mobile{border:2px solid #e6e6e6}.likert-number--mobile:not(:first-child){margin-inline-start:-2px}.likert-number--desktop{border:1px solid #e6e6e6}.likert-number--desktop:not(:first-child){margin-inline-start:-1px}.likert-number{align-items:center;cursor:pointer;display:flex;justify-content:center;flex:1 0;background-color:#00000003;font-size:18px;line-height:24px;height:67px}.likert-number:first-child{border-start-start-radius:5px;border-end-start-radius:5px}.likert-number:last-child{border-start-end-radius:5px;border-end-end-radius:5px}.likert-number:active,.likert-number--desktop:hover{background-color:#0000000d;font-weight:500}.likert-star--mobile:not(:first-child){margin-inline-start:-2px}.likert-star--desktop:not(:first-child){margin-inline-start:-1px}.likert-star{align-items:center;cursor:pointer;display:flex;justify-content:space-between;flex:1 0;color:transparent;font-size:18px;line-height:24px;height:67px;background:unset;border:unset}.likert-smiley--mobile:not(:first-child){margin-inline-start:-2px}.likert-smiley--desktop:not(:first-child){margin-inline-start:-1px}.likert-smiley{align-items:center;cursor:pointer;display:flex;justify-content:space-between;flex:1 0;color:transparent;line-height:24px;height:67px;background:unset;border:unset}.likert-smiley>svg{margin:0 auto}.likert-smiley circle:not(:first-child){fill-opacity:1}.ul-card--likert__labels{align-items:center;color:#262136;display:flex;flex-direction:row;flex:1 0;font-weight:500;font-size:13px;line-height:15px;justify-content:space-between;margin:7px 0 10px}.ul-card--likert__labels>span:last-child{margin-left:auto;flex:1 1 auto;min-width:0;text-align:right}.ul-card--matrix_grid{display:grid;grid-template-columns:max-content repeat(var(--numColumns),minmax(107px,1fr));grid-template-rows:repeat(var(--numRows),min-content);margin:0 auto;row-gap:4px;width:max-content}.ul-card--matrix_grid_longform{width:100%}.ul-matrix-row-options{display:grid;grid-column:2/-1;grid-template-columns:subgrid}.ul-matrix-column-label{font-size:15px;max-width:150px;padding:10px 12px;text-align:center}.ul-card--matrix_container{margin-bottom:16px;overflow:auto}.ul-card--matrix_question_container{display:flex;flex-direction:column}.ul-matrix-scroll-gradient{-webkit-mask-image:linear-gradient(90deg,#000 90%,transparent);mask-image:linear-gradient(90deg,#000 90%,transparent)}.ul-matrix-scroll-gradient:dir(rtl){-webkit-mask-image:linear-gradient(270deg,#000,90%,transparent);mask-image:linear-gradient(270deg,#000,90%,transparent)}.ul-matrix-scroll-gradient:dir(rtl)+.ul-matrix-scroll-arrow{rotate:180deg}.ul-matrix-scroll-arrow{align-self:flex-end;background:none;border:none;color:#000;padding:0;position:absolute;top:45%}.ul-matrix-scroll-arrow:hover{cursor:pointer}.ul-matrix-option-wrapper{align-items:center;background:#f9f9f8;display:flex;justify-content:center;padding:10px 12px}.ul-matrix-last-option{border-start-end-radius:4px;border-end-end-radius:4px}.ul-matrix-row-label{align-items:center;background:#f9f9f8;border-end-start-radius:4px;border-start-start-radius:4px;display:flex;font-size:15px;left:0;right:0;max-width:200px;min-width:100px;padding:10px 12px;position:sticky}.ul-matrix-option-selected{border:6px solid var(--border);box-shadow:none}.ul-card__matrix{max-width:100%}.select-label{cursor:pointer;flex:1;overflow-wrap:anywhere;text-align:start}.ul-card--nps__numbers{align-items:center;border-radius:5px;display:flex;flex-direction:row;flex:1 0;justify-content:center;margin:5px 0 0}.nps-number--mobile{border:2px solid #e6e6e6}.nps-number--mobile:not(:first-child){margin-inline-start:-2px}.nps-number--desktop{border:1px solid #e6e6e6}.nps-number--desktop:not(:first-child){margin-inline-start:-1px}.nps-number{align-items:center;cursor:pointer;display:flex;justify-content:center;flex:1 0;background-color:#00000003;font-size:18px;line-height:24px;height:67px;padding:unset}.nps-number:first-child{border-start-start-radius:5px;border-end-start-radius:5px}.nps-number:last-child{border-start-end-radius:5px;border-end-end-radius:5px}.nps-number:active,.nps-number--desktop:hover{background-color:#0000000d;font-weight:500}.ul-card--nps__labels{align-items:center;color:#262136;display:flex;flex-direction:row;flex:1 0;font-weight:500;font-size:13px;line-height:15px;justify-content:space-between;margin:7px 0 10px}.ul-card-rank__labels{font-size:14px;font-style:normal;font-weight:600;line-height:150%;text-align:left}.ul-card-rank__list{list-style-type:none;padding-inline-start:0;margin:4px 0}.ul-card-rank__option{display:flex;align-items:center;padding:8px;gap:8px;align-self:stretch;border:1px solid #e2e3e1;border-radius:8px;margin-bottom:4px;background:#fff}.ul-card-rank__option:last-child{margin-bottom:0}.ul-card-rank__drag-btn{display:inline-flex;align-items:center;justify-content:center;line-height:0;padding:0;width:25px;height:25px;margin-left:auto;color:#0b2330;cursor:grab;background:transparent;border:0}.ul-card-rank__drag-btn:active,.ul-card-rank__option:active{cursor:grabbing}.ul-card-rank__option svg{display:block}.ul-card-rank__option.is-dragging{opacity:1;box-shadow:0 8px 25px #00000026,0 3px 10px #0000001a;z-index:1000;background:#fff;border-color:#0b2330;transition:none}.ul-card-rank__option.is-drop-target{background:#0b23301a;border-radius:8px;border-color:#0b23301a}.ul-card-rank__option.is-drop-target select,.ul-card-rank__option.is-drop-target span,.ul-card-rank__option.is-drop-target button{visibility:hidden}.ul-card-rank__option span{font-size:14px;font-weight:400;pointer-events:none}.ul-card-rank__select{appearance:none;-webkit-appearance:none;-moz-appearance:none;box-sizing:border-box;height:25px;min-height:25px;border:1px solid #E2E3E1;border-radius:4px;font-size:14px;line-height:1.4;padding:2px 28px 2px 8px;background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='12' height='13' viewBox='0 0 12 13' fill='none'><path d='M9.75 5L6 8.75L2.25 5' stroke='%230B2330' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/></svg>");background-repeat:no-repeat;background-position:right 8px center;background-size:12px 12px;background-color:#fff;cursor:pointer;pointer-events:auto}.ul-card-rank__select.ul-card-rank__select--placeholder{color:#b0b5b7}.ul-card-text{margin-top:2px;margin-bottom:3px;display:flex;flex-direction:column;justify-content:center;padding:0;width:100%}.ul-card-text__container{align-items:center;box-sizing:border-box;border-radius:3px;display:flex;justify-content:center;margin-bottom:12px;flex:1 0 100%}.ul-card-text__input--mobile{border:2px solid #e6e6e6;max-height:63px}.ul-card-text__input--desktop{border:1px solid #e6e6e6;max-height:150px}.ul-card-text__input{background:#00000003;box-sizing:border-box;color:#343442;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;min-height:63px;overflow:auto;padding:12px;resize:none;width:100%;border-radius:3px;font-size:15px;line-height:20px;overflow-wrap:break-word}.ul-card-text__input::placeholder{color:#6c6c6e80}.ul-card-text__input:focus{outline:none;background:#fff}.ul-card-text__input--desktop:hover:not(:focus){background-color:#0000000d}.ul-card__text-url-prompt-button{text-decoration:none;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:-webkit-fill-available}#ul-card-video__player_recorder{width:100%;width:-moz-available;width:-webkit-fill-available;width:fill-available}.ul-card-record__task{flex:1 0 auto;margin-top:2px;margin-bottom:3px;align-items:center;display:flex;flex-wrap:wrap;justify-content:center;padding:0}#ul-record-task-upload-progress,#ul-record-task-video-preview{width:100%;height:150px}.ul-permission-graphics-container{width:100%;height:150px;background-color:#0000000d;text-align:center;flex-direction:column;margin-left:auto;margin-right:auto;border-radius:5px;display:flex;align-items:center;font-size:15px;color:#000000b3}.ul-av-permission-denied-paragraph{margin:auto 15px;font-size:12px}.ul-av-permission-denied-headline{font-size:14px;color:#262136;text-decoration:underline;font-size:12px}.ul-permission-body{color:#000;margin:5px auto 5px 5px;line-height:135%;text-align:center}.ul-select-tab-container{width:240px;height:46px;background:#fff;border-radius:5px;text-align:start;align-items:center;display:flex;padding:0 5px;margin-top:20px;margin-bottom:auto}.ul-select-tab-text{color:#4b575d;margin:5px;line-height:135%;text-align:center}button.ul-task-skip-button{color:#000;background-color:#fff}#ul-task-detail-container{margin-top:0;margin-bottom:0;overflow:auto}#ul-task-detail-container.ul-rich-text-body p,#ul-task-detail-container.ul-rich-text-body li,#ul-task-detail-container.ul-rich-text-body{color:#4c4c4c}#ul-task-detail-container :first-child{margin-top:0}#ul-task-detail-container :last-child{margin-bottom:20px}.ul-horizontal-button-container{width:100%;display:flex;flex-direction:row}.ul-skip-button-below{margin-top:5px}.ul-horizontal-button-container-center{justify-content:center}.ul-vertical-button-container-center{display:flex;flex-direction:column;align-items:center}.ul-horizontal-button-container-left{justify-content:flex-start}.ul_recorded-task-inset-spacing{margin-top:5px;margin-bottom:24px}.ul_permission_svg_container{justify-content:center}.ul-card-text__button{background-color:var(--theme);border-radius:3px;border:none;color:#fff;cursor:pointer;font-size:15px;font-weight:500;line-height:18px;padding:10.5px 21px}.ul-card-text__button:disabled,.ul-card-text__button.sprig-button-disabled{background-color:#0000001a;color:#0003}.ul-card-text__button:disabled>svg path,.ul-card-text__button.sprig-button-disabled>svg path{stroke:#0003}.ul-card-text__button.ul-button-inactive{background-color:#fff!important;color:#5d696f!important}.ul-card-skip__button{color:#00000080;background:none;border:none;font-size:15px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;cursor:pointer}.ul-card-button-group{align-items:center;display:flex;gap:15px;justify-content:center;flex-direction:column}.select-button{align-items:center;background-color:transparent;border-radius:8px;border:1px solid #0b2330;box-shadow:0 0 0 2px #c8cccc;cursor:pointer;display:flex;font-size:15px;justify-content:space-between;margin-bottom:8px;padding:4px 8px 4px 16px;width:100%}.select-button:hover{background-color:#f3f3f3}.select-button:active{background-color:#eee}.select-button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.select-button.select-button-placeholder{color:#b0b5b7}.select-button svg{flex-shrink:0}.select-list{position:relative;height:fit-content;padding:4px 0;z-index:100;background-color:#fff;border:1px solid #E2E3E1;box-shadow:0 16px 24px #0b23300d,0 4px 12px #0b233008;border-radius:8px;overflow-y:scroll;width:100%}.select-option{align-items:center;cursor:pointer;display:flex;font-size:15px;gap:16px;line-height:20px;padding:8px 16px}.select-option:hover{background-color:#f3f3f3}.ul-card--maxdiff__question-inner-container{display:grid;grid-template-columns:1fr 2.5fr 1fr;grid-template-rows:repeat(3,minmax(40px,auto));grid-gap:6px;align-items:center}@media (max-width: 600px){.ul-card-maxdiff__labels-row{column-gap:30%}}.ul-card-maxdiff__label{font-weight:600;text-align:center;margin:auto;flex:1;padding:8px;overflow:auto;overflow-wrap:break-word;-webkit-hyphens:auto;hyphens:auto}.ul-card-maxdiff__label-spacer{flex:6}.ul-card-maxdiff .ul-question{text-align:center}.ul-card-maxdiff__option-row{display:flex;justify-content:space-between;margin-bottom:8px;padding:0 24px}.ul-card-maxdiff__option-label{flex:6;align-self:center;padding:12px;text-align:center;max-width:100%;overflow-wrap:anywhere;-webkit-hyphens:auto;hyphens:auto}.ul-card-maxdiff__option-control.smiley{display:flex;justify-content:center;align-items:center;min-width:86px;flex:1;padding:12px;border-radius:none;border:none;background:none;cursor:pointer}.ul-card-maxdiff__option-control .choice-label-container{justify-content:center}.ul-card-maxdiff p.ul-caption{text-align:center}.ul-card-maxdiff .question-header-button-container{display:flex;justify-content:center}.ul-card-maxdiff__option-selected{border-radius:100px}.ul-card-maxdiff__option-selected.good{background:#90ee90}.ul-card-maxdiff__option-selected.bad{background:#f08080}.ul-card-maxdiff__option-btn{width:42px;height:42px;justify-content:center;align-items:center}html,body{cursor:default;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;height:100%;overflow:hidden;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;-webkit-touch-callout:none}b{font-weight:500}form{margin-block-end:0;margin-block-start:0}#ul-app{opacity:0;width:100%;flex-grow:2;display:flex}#ul-app.ul-app--overlay{position:absolute;bottom:0;transition:opacity .1s ease-out;transition-delay:.1s}#ul-app.ul-app--visible{opacity:1;bottom:0}.ul-app__container{width:100%;display:flex;flex-direction:column;max-height:100vh}.ul-header__container{margin-bottom:15px}.ul-header{align-items:center;background:repeating-linear-gradient(120deg,#ebebeb,#ebebeb 24px,#fff 24px,#fff 48px);border-bottom:2px solid #ebebeb;display:flex;font-size:14px;font-weight:500;height:40px;justify-content:center;width:100%}.ul-footer{display:flex;flex-direction:column;align-items:center;justify-content:flex-end;margin-top:auto;flex-grow:0;width:100%;min-height:10px;height:fit-content;flex-shrink:0}.ul-footer>.yellow-footer-logo{background:#fad133;border:1px solid #f9c600;border-radius:14px;padding:6px 12px}.ul-footer>.yellow-footer-logo:hover{background:#f9c600}.ul-footer .thank-you-card-link{background:#00000003;border:1px solid #e6e6e6;border-radius:8px;cursor:pointer;display:inline-flex;font-size:14px;gap:12px;margin-bottom:15px;padding:12px;text-align:initial;width:280px}.ul-footer .thank-you-card-link:hover{background:#00000008}.ul-footer>a{color:inherit}.ul-footer-bubble{display:inline-block;margin:0 3px;width:7px;height:7px;border-radius:3px;border:1px solid transparent}.sprig-box-logo{background:#f9c600;border-radius:5px;display:flex;padding:4px}.close-container{display:flex;justify-content:flex-end;width:100%;height:0}.close-btn{position:absolute;top:8px;right:8px;cursor:pointer;height:16px;width:16px;z-index:2}.ul-app__container{transition:opacity .3s ease-out}.ul-center-horizontally{text-align:center}.ul-progress-bar-container{width:100%;height:2px;background-color:#0000001a;border-radius:2px}.ul-progress-bar-container__footer{max-width:250px;margin:16px 0}.ul-progress-bar-container__header{position:fixed;top:80px;max-width:unset;margin:0;z-index:3}.ul-progress-bar-current{transition:width 1s ease;width:0%;height:0;border-radius:2px}.prototype-button{align-self:stretch;background:#00000003;border:1.5px solid #e6e6e6;border-radius:4px 0 0 4px;flex:none;flex-grow:0;height:fit-content;line-height:16.5px;margin:0 20px;padding:20px 0;font-size:14px;font-family:inherit;text-decoration:underline}.prototype-button:hover{cursor:pointer}`;let Lt;const ra=new Uint8Array(16);function oa(){if(!Lt&&(Lt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Lt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Lt(ra)}const be=[];for(let e=0;e<256;++e)be.push((e+256).toString(16).slice(1));function ia(e,t=0){return be[e[t+0]]+be[e[t+1]]+be[e[t+2]]+be[e[t+3]]+"-"+be[e[t+4]]+be[e[t+5]]+"-"+be[e[t+6]]+be[e[t+7]]+"-"+be[e[t+8]]+be[e[t+9]]+"-"+be[e[t+10]]+be[e[t+11]]+be[e[t+12]]+be[e[t+13]]+be[e[t+14]]+be[e[t+15]]}const Ao={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Cn(e,t,n){if(Ao.randomUUID&&!e)return Ao.randomUUID();e=e||{};const r=e.random||(e.rng||oa)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ia(r)}const sa=async(e,t)=>{var r;const n=await fetch(t,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(n.ok){const o=await n.json();return(r=o==null?void 0:o.upload)==null?void 0:r.url}else return null},Oo=()=>MediaRecorder.isTypeSupported("video/webm")?"video/webm":"video/mp4",Mo=e=>{const t={audioBitsPerSecond:128e3,videoBitsPerSecond:25e5,mimeType:Oo()};return new MediaRecorder(e,t)},$o=(e,t,n)=>{n[t]=[],e.ondataavailable=function(r){n[t].push(r.data)},e.currentMediaRecordingUid=t,e.start()};function Uo(e,t,n,r,o,i){if(e&&e.state!=="inactive"){const{"begin.callback":a}=r,l=e.currentMediaRecordingUid;if(!l)return;a&&a(l),e.onstop=()=>aa(t,e,n,r,l,o,i),e.stop()}}async function aa(e,t,n,r,o,i,a){const l=H.getState().viewDocument,{"upload.callback":c,"progress.callback":u}=r,h={mediaType:n,updatedAt:new Date().toISOString(),mediaRecordingUid:o,...r["passthrough.data"]},d=await sa(h,e);if(!d){c&&c(null,{message:"failed to get upload url"});return}const p=new Blob(a,{type:Oo()});if(!l.defaultView)return;const m=new l.defaultView.File([p],`recording video ${Date.now()}`),g=i.createUpload({endpoint:d,file:m,chunkSize:5120});g.on("error",f=>{c&&c(null,f)}),g.on("progress",f=>{u&&u(o,f)}),g.on("success",()=>{c&&c(o,!0)})}const la={state:{...{chunks:{}}},stopRecording(e){const{uploadApiEndpoint:t,avRecorder:n,screenRecorder:r,UpChunk:o}=this.state,i=this.state.avStream&&this.state.avStream.getVideoTracks().length>0?"video":"audio";this.state.chunks&&t&&o&&(n!=null&&n.currentMediaRecordingUid&&Uo(n,t,i,e,o,this.state.chunks[n==null?void 0:n.currentMediaRecordingUid]),r!=null&&r.currentMediaRecordingUid&&Uo(r,t,"screen",e,o,this.state.chunks[r==null?void 0:r.currentMediaRecordingUid]))},handleCancelledStream(e){const t=e.getVideoTracks(),n=e.getAudioTracks();let r=t.length&&t[0];r=r||n.length&&n[0],r&&r.addEventListener("ended",()=>{[this.state.avRecorder,this.state.screenRecorder].map(o=>{o&&(o.state==="recording"&&o.stop(),o.stream.getTracks().map(i=>{i.readyState==="live"&&i.stop()}))}),Object.assign(this.state,{avStream:null,captureStream:null,avRecorder:null,screenRecorder:null})})},taskDurationMillisecond(){return this.state.startTime?new Date().getTime()-this.state.startTime.getTime():0},setUpChunk(e){this.state.UpChunk=e},configure(e,t){Object.assign(this.state,t),this.state.uploadApiEndpoint=`${t.apiURL}/2/environments/integrations/upload`,this.state.chunks={},e.on("permission.status",this.permissionStatusCallback.bind(this)),e.on("av.permission",async n=>{this.avPermissionCallback(n)}),e.on("begin.recording",this.beginRecordingCallback.bind(this)),e.on("start.task",this.startTaskCallback.bind(this)),e.on("screen.permission",async n=>{this.screenPermissionCallback(n)}),e.on("finish.task",async n=>{this.finishTaskCallback(n)})},async avPermissionCallback(e){var r,o,i;const{"stream.ready":t,"permission.descriptors":n}=e;try{(r=this.state.avStream)!=null&&r.active&&(this.state.avStream.getTracks().map(a=>a.readyState==="live"&&a.stop()),((o=this.state.captureStream)==null?void 0:o.getAudioTracks().length)===1&&this.state.captureStream.removeTrack(this.state.captureStream.getAudioTracks()[0])),this.state.avStream=await navigator.mediaDevices.getUserMedia({video:n.includes("camera"),audio:!0}),((i=this.state.captureStream)==null?void 0:i.getAudioTracks().length)===0&&this.state.captureStream.addTrack(this.state.avStream.getAudioTracks()[0]),this.handleCancelledStream(this.state.avStream)}catch(a){console.warn("Error: failed to get permissions: "+a),t&&t(null,null);return}t&&t(this.state.avStream,this.state.captureStream)},async screenPermissionCallback(e){const{"screen.permission.requested":t,"stream.ready.callback":n}=e;t==null||t(!0);try{this.state.captureStream=await navigator.mediaDevices.getDisplayMedia({video:!0,cursor:"always",displaySurface:"browser",preferCurrentTab:!0})}catch(r){t==null||t(!1),console.warn("Error: failed to get permissions: "+r),n&&n(null,null);return}t==null||t(!1),this.state.avStream&&this.state.avStream.getAudioTracks().length>0&&this.state.captureStream.addTrack(this.state.avStream.getAudioTracks()[0]),this.handleCancelledStream(this.state.captureStream),n&&n(this.state.avStream||null,this.state.captureStream)},beginRecordingCallback(e){const{"recording.media.types":t,"start.recording.callback":n=()=>{}}=e;if(!t)return;const r=[];if(t.includes("video")&&this.state.avStream){this.state.avRecorder=Mo(this.state.avStream);const o=Cn();$o(this.state.avRecorder,o,this.state.chunks),r.push(o)}if(t.includes("screen")&&this.state.captureStream){this.state.screenRecorder=Mo(this.state.captureStream);const o=Cn();$o(this.state.screenRecorder,o,this.state.chunks),r.push(o)}r&&n&&n(r)},async finishTaskCallback(e){const{"current.index":t,"task.response":n,"task.complete.callback":r}=e;await this.stopRecording(e),r&&r(this.taskDurationMillisecond()),this.state.cards&&this.state.hasEndCard!==void 0&&this.lookAheadAndStopStream(t,n,this.state.cards,this.state.hasEndCard)},startTaskCallback(){this.state.startTime=new Date},permissionStatusCallback(e){var r;const{["permission.status.callback"]:t}=e,n=this.state.avStream;t&&t(n,n?(n==null?void 0:n.getVideoTracks().length)>0:!1,!!((r=this.state.captureStream)!=null&&r.active),this.state.captureStream)},lookAheadAndStopStream(e,t,n,r){const{avRecorder:o,screenRecorder:i}=this.state,{allResponses:a}=H.getState(),l=Xr({cards:n,index:e,hasEndCard:r,allResponses:a});l!==null&&n[l].type==="recordedtask"||[o,i].map(c=>{c&&(c.state==="recording"&&c.stop(),c.stream.getTracks().map(u=>{u.readyState==="live"&&u.stop()}))})}},Pt=Object.create(la);Object.freeze(Pt);const ca=(e,t)=>{const n=[...e],r=new Set(["videovoice","recordedtask"]);return e.some(o=>r.has(o.type))&&n.push({name:-2,props:{routingOptions:[],displayLogic:[]},type:"uploading"}),t&&n.push({name:-1,props:{routingOptions:[],displayLogic:[]},type:"thanks"}),n},da=({mode:e=null,viewWindow:t,viewDocument:n,trackPageViewUrl:r})=>{const o=n.documentElement;let i;try{i=t.parent.location.href}catch{i=t.location.href}return{mode:e,sw:t.screen.width,sh:t.screen.height,cw:o.clientWidth,ch:o.clientHeight,p:r??i,l:t.navigator.language}};function ua(e,t=!0){var b;const{answers:n,apiURL:r,endCard:o,eventEmitFn:i,fontFamilyURL:a,frame:l,previewKey:c,viewDocument:u,viewWindow:h}=e,d=St(e.headers)?e.frame:u.body,p=e.UpChunk||window.UpChunk,m=gt,g=ca(e.cards,!!o);Pt.configure(m,{cards:g,hasEndCard:!!o,apiURL:r,UpChunk:p});const f=e.layout==="conversational";H.setState({addResponseGroupMeta:e.addResponseGroupMeta,apiURL:r,answers:n,avatars:e.avatars,border:e.border,index:e.startingQuestionIdx||0,isConversationalUI:f,cards:g,configureExitOnOverlayClick:e.configureExitOnOverlayClick,customMetadata:e.customMetadata,enableCspTrustedTypes:e.enableCspTrustedTypes,endCard:e.endCard,envId:e.envId,eventEmitFn:i,fontFamily:e.fontFamily,forceBrandedLogo:e.forceBrandedLogo,frame:l,headers:e.headers,hasViewedEmbed:!1,isPreview:e.isPreview,layout:e.layout,marketingUrl:"https://sprig.com",meta:da({mode:e.mode,viewWindow:h,viewDocument:u,trackPageViewUrl:e.trackPageViewUrl}),mode:e.mode,previewKey:c,previewMode:e.previewMode,productConfig:e.productConfig,recorder:Pt,recorderEventEmitter:m,responseGroupUid:e.responseGroupUid,showStripes:e.showStripes,showSurveyBrand:e.showSurveyBrand,slugName:e.slugName,startingQuestionIdx:e.startingQuestionIdx,styleNonce:e.styleNonce,studyType:e.studyType,surveyId:e.surveyId,surveyVisitorAttributes:e.surveyVisitorAttributes,tabTitle:e.tabTitle,uploadingCardViewed:!1,uploadProgress:{},useMobileStyling:e.useMobileStyling,useDesktopPrototype:e.useDesktopPrototype,userId:e.userId,viewDocument:e.viewDocument,visitorAttributes:e.visitorAttributes,viewedCardCount:e.startingQuestionIdx||0});const{head:x}=u;if(fn({document:u,elementId:"sprig-style",styleString:na}),e.customStyles&&fn({document:u,elementId:"ul-custom-style",styleString:e.customStyles,nonce:e.styleNonce}),e.fontFamily&&a&&parent){const w=u.createElement("link");w.rel="stylesheet",w.href=a,x.appendChild(w)}if(!p&&e.cards.some(S=>S.type==="recordedtask")){const S=u.createElement("script");S.src=e.upchunkLibraryURL??"https://cdn.sprig.com/userleap-web-upchunk-v2.2.2.js",S.onload=()=>{Pt.setUpChunk(h.UpChunk)},S.onerror=()=>{console.warn("[Sprig] - recording functionality not configured due to UpChunk library load failure")},x.appendChild(S)}const v="2.40.3",_=i||((b=l.eventEmitter)==null?void 0:b.emit);_==null||_("verify.view.version",{"view.version":v}),d&&t&&(rt(s(ta,{}),d),gt.once(Ce.SurveyClosed,()=>{nn(d)}))}({configure:ua}).configure(window.__cfg);const Ye="https://cdn.sprig.com",V={document:void 0,videojs:void 0},pa=`/* progress control styles */
.video-js .vjs-control {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
}

.video-js .vjs-progress-control .vjs-progress-holder {
  margin: 0 0px;
}

.video-js .vjs-progress-control {
  position: absolute;
  height: 3px;
  width: 100%;
}
/* position and align the buttons and button texts */
.ul-control-panel {
  bottom: 0;
  width: 100%;
  flex-direction: column;
  background-color: white;
  height: fit-content;
  z-index: 2;
}

.ul-buttons-panel {
  color: black;
  display: flex;
  gap: 20px;
  height: 50px;
  justify-content: center;
  margin: 10px;
  padding: 2px 14px 0;
}

.video-js .vjs-volume-panel {
  height: 30px;
  width: 40px;
}

.ul-inactive {
  opacity: 0.3;
  cursor: default;
  pointer-events: none;
}

/* buttons */
.ul-buttons-panel > .vjs-button {
  background-color: rgba(0, 0, 0, 0.05);
  border-radius: 50%;
  display: flex;
  height: 3em;
  justify-content: center;
  width: 3em;
}

.vjs-button>.vjs-icon-placeholder:before {
  align-items: center;
  display: flex;
  font-size: unset;
  line-height: 0.5;
  justify-content: center;
}

span.ul-button-text {
  align-self: flex-end;
  position: relative;
  top: 14px;
}

#ul-camera-button {
  white-space: nowrap;
}

.video-js .vjs-volume-control.vjs-volume-horizontal {
  background-color: #fff;
  z-index: 1;
}

.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level {
  background-color: black;
}

.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,
.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,
.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active {
  width: 40px;
}

.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active,
.video-js .vjs-volume-panel .vjs-volume-control:active,
.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control ~ .vjs-volume-control,
.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,
.video-js .vjs-volume-panel:active .vjs-volume-control,
.video-js .vjs-volume-panel:focus .vjs-volume-control {
  visibility: visible;
  left: 40px;
  position: absolute;
  transition: visibility 0.1s, opacity 0.1s, height 0.1s, width 0.1s, left 0s, top 0s;
}

/* play button customization */
.video-js .vjs-play-control {
  color: black;
}

.video-js .vjs-play-control .vjs-icon-placeholder:before {
  content: url("data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5363 6.40226L1.93958 10.7006C1.64037 10.8502 1.28833 10.6326 1.28833 10.2981V1.7014C1.28833 1.36688 1.64037 1.14931 1.93958 1.29891L10.5363 5.59727C10.868 5.76311 10.868 6.23642 10.5363 6.40226Z' stroke='black' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E");
}

/* position and style the current timer */
.ul-time-panel {
  position: absolute;
  bottom: 80px;
  left: 10px;
  height: 22px;
  color: black;
  border: 1px solid #e0e0eb;
  border-radius: 23px;
  background-color: white;
  width: fit-content;
}

.video-js .vjs-current-time,
.vjs-no-flex .vjs-current-time {
  display: flex;
  align-items: center;
  text-align: center;
}

/* remove the dot progress indicator */
.video-js .vjs-play-progress:before,
.video-js .vjs-volume-level:before,
.vjs-icon-circle:before,
.vjs-seek-to-live-control .vjs-icon-placeholder:before {
  content: none;
}

.video-js .vjs-mute-control .vjs-icon-placeholder:before {
  content: url("data:image/svg+xml,%3Csvg width='19' height='14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M8.825.324A.75.75 0 019.25 1v11.667a.75.75 0 01-1.219.585l-3.96-3.169H1a.75.75 0 01-.75-.75v-5a.75.75 0 01.75-.75h3.07L8.031.414a.75.75 0 01.794-.09zM7.75 2.56L4.802 4.92a.75.75 0 01-.469.164H1.75v3.5h2.583a.75.75 0 01.469.165l2.948 2.358V2.56zM14.911.47a.75.75 0 011.061 0 9.084 9.084 0 010 12.844.75.75 0 01-1.06-1.06 7.584 7.584 0 000-10.724.75.75 0 010-1.06zM11.97 3.41a.75.75 0 011.06 0 4.917 4.917 0 010 6.953.75.75 0 11-1.06-1.06 3.417 3.417 0 000-4.832.75.75 0 010-1.06z' fill='%23262136'/%3E%3C/svg%3E");
}

.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before {
  content: url("data:image/svg+xml,%3Csvg width='19' height='14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8.5 1.167L4.333 4.5H1v5h3.333L8.5 12.833V1.167zM17.17 4.5l-5 5M12.17 4.5l5 5' stroke='%23262136' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
}

.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before {
  content: url("data:image/svg+xml,%3Csvg width='19' height='14' viewBox='0 0 19 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M8.82489 0.32403C9.08474 0.44892 9.25 0.711703 9.25 1.00001V12.6667C9.25 12.955 9.08474 13.2178 8.82489 13.3427C8.56504 13.4675 8.25661 13.4324 8.03148 13.2523L4.07025 10.0833H1C0.585786 10.0833 0.25 9.74755 0.25 9.33334V4.33334C0.25 3.91913 0.585786 3.58334 1 3.58334H4.07025L8.03148 0.414355C8.25661 0.234253 8.56504 0.19914 8.82489 0.32403ZM7.75 2.56048L4.80185 4.91899C4.66887 5.02538 4.50364 5.08334 4.33333 5.08334H1.75V8.58334H4.33333C4.50364 8.58334 4.66887 8.6413 4.80185 8.74769L7.75 11.1062V2.56048Z' fill='%23262136'/%3E%3C/svg%3E%0A");
}

.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before {
  content: url("data:image/svg+xml,%3Csvg width='19' height='14' viewBox='0 0 19 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M8.82489 0.32403C9.08474 0.44892 9.25 0.711703 9.25 1.00001V12.6667C9.25 12.955 9.08474 13.2178 8.82489 13.3427C8.56504 13.4675 8.25661 13.4324 8.03148 13.2523L4.07025 10.0833H1C0.585786 10.0833 0.25 9.74755 0.25 9.33334V4.33334C0.25 3.91913 0.585786 3.58334 1 3.58334H4.07025L8.03148 0.414355C8.25661 0.234253 8.56504 0.19914 8.82489 0.32403ZM7.75 2.56048L4.80185 4.91899C4.66887 5.02538 4.50364 5.08334 4.33333 5.08334H1.75V8.58334H4.33333C4.50364 8.58334 4.66887 8.6413 4.80185 8.74769L7.75 11.1062V2.56048Z' fill='%23262136'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M11.9698 3.41124C12.2627 3.11839 12.7376 3.11846 13.0304 3.4114C13.9521 4.33341 14.4699 5.58376 14.4699 6.88748C14.4699 8.19121 13.9521 9.44156 13.0304 10.3636C12.7376 10.6565 12.2627 10.6566 11.9698 10.3637C11.6768 10.0709 11.6767 9.596 11.9696 9.30307C12.6101 8.66235 12.9699 7.79346 12.9699 6.88748C12.9699 5.98151 12.6101 5.11262 11.9696 4.4719C11.6767 4.17896 11.6768 3.70409 11.9698 3.41124Z' fill='%23262136'/%3E%3C/svg%3E%0A");
}

.video-js .vjs-volume-control:hover .vjs-mouse-display {
  display: none !important;
}

.video-js .vjs-play-progress {
  background-color: black;
}

/* position video player inside the container */
.video-js .vjs-tech {
  position: static;
}

.video-js .vjs-time-tooltip {
  padding: 0.25em 0.75em;
  align-items: center;
  color: #333;
  background: #FCFCFD;
  border-radius: 99px;
  text-align: center;
  border: 1px solid #E0E0EB;
  display: flex;
  align-items: center;
  justify-content: center;
  top: -25px;
  font-size: 12px !important;
  width: 50px !important;
}

.video-js .vjs-play-progress.vjs-slider-bar .vjs-time-tooltip {
  visibility: hidden !important;
}

.video-js .vjs-progress-control .vjs-mouse-display {
  z-index: 2;
}

.ul-video-player {
  width: 100%;
  display: flex;
  flex-direction: column;
  height: auto;
  border: 1px solid #E6E6E6;
  background-color: white;
  box-sizing: border-box;
  border-radius: 4px;
  background-clip: border-box;
  overflow: hidden;
}

.video-js.vjs-fullscreen:not(.vjs-ios-native-fs) {
  border: none;
}

#video-response-player-secondary-video-player {
  max-width: 200px;
  margin-right: 20px;
  background-color: transparent;
}

#ul-card-video__player_recorder-video-recorder.vjs-fullscreen {
  display: table;
}

.video-js div.vjs-progress-control {
  margin-top: -3px;
}

.video-js .vjs-progress-control .vjs-slider {
  background-color: #B2BBBD;
}

.vjs-record.video-js .vjs-control.vjs-button.vjs-fullscreen-control {
  position:relative;
}

.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before {
  content: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M9.82143 2.54004L12.2614 2.54004C12.9242 2.54004 13.4614 3.0773 13.4614 3.74004L13.4614 6.18004' stroke='black' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M6.17955 13.46L3.73955 13.46C3.07681 13.46 2.53955 12.9227 2.53955 12.26L2.53955 9.81996' stroke='black' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M12.7772 3.22266L9.36475 6.63516' stroke='black' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M6.29434 9.70605L2.88184 13.1186' stroke='black' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
}

.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before {
  content: url("data:image/svg+xml,%3Csvg width='16' height='16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1.583 9.813H5.25a1 1 0 011 1v3.666M5.375 10.688L1 15.061M14.917 5.813H11.25a1 1 0 01-1-1V1.146M15.063 1l-4.376 4.375' stroke='%23262136' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
}

.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before, .video-js .vjs-icon-replay:before {
  content: url("data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5363 6.40226L1.93958 10.7006C1.64037 10.8502 1.28833 10.6326 1.28833 10.2981V1.7014C1.28833 1.36688 1.64037 1.14931 1.93958 1.29891L10.5363 5.59727C10.868 5.76311 10.868 6.23642 10.5363 6.40226Z' stroke='black' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E");
}

.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before, .vjs-icon-pause:before {
  content: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='3.61885' y='2.06074' width='3.16185' height='11.88' rx='0.9' fill='black' stroke='%23EDEDED' stroke-width='0.6' stroke-linecap='round'/%3E%3Crect x='9.21797' y='2.06074' width='3.16185' height='11.88' rx='0.9' fill='black' stroke='%23EDEDED' stroke-width='0.6' stroke-linecap='round'/%3E%3C/svg%3E%0A");
  padding: 2px;
}

.vjs-error-display {
  display: none;
}

.ul-video-player-video {
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
}

.ul-video-container {
  width: 100%;
  height: auto;
  left: 0px;
  top: 0px;

  background-color: transparent;
  border-radius: 4px;

  align-items: start;
  display: flex;
  flex-direction: column;

  /* Inside Auto Layout */

  flex: none;
  order: 0;
  flex-grow: 0;
  margin: 10px 0px;
  position: relative;
}

.vjs-record button.vjs-device-button.vjs-control {
  background: rgba(255, 255, 255, 96);
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
  margin: 0;
  border-radius: 0;
  line-height: 0.6;
  padding: 10px;
  display: flex;
  align-items: center;
  flex-direction: column;
  justify-content: center;
  z-index: 3;
}

.vjs-record .vjs-device-button.vjs-control:before {
  font-size: 14px !important;
  color: #333;
  content: "Your browser needs to access your camera and microphone for video recording";
  line-height: 135%;
}

.vjs-record .vjs-device-button.vjs-control.permission-denied:before {
  font-size: 16px !important;
  color: #262136;
  content: "Unable to access your camera and microphone";
}

.vjs-record .vjs-device-button.vjs-control:after {
  display: inline-block;
  background: #F0F0F5;
  font-size: 13px;
  border-radius: 4px;
  content: "Request Permissions";
  padding: 1em 2em;
  color: #333;
  margin-top: 20px;
}

.vjs-record .vjs-device-button.vjs-control.permission-denied:after {
  display: inline-block;
  background: white;
  font-size: 13px;
  content: "Please go to your browser settings and update permissions to enable recording";
  padding: 1em;
  color: #4B575D;
  margin: 5px;
  line-height: 135%;
  text-align: center;
}

.vjs-control.vjs-button.ul-video-recorder-delete-button, .vjs-control.vjs-button.ul-video-recorder-toggle-button, .vjs-control.vjs-button.ul-video-recorder-camera-off-button-audio-only, .vjs-control.vjs-button.ul-video-recorder-camera-off-button {
  cursor: pointer;
}

.ul-video-recorder-delete-button .vjs-icon-placeholder:before {
  content: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M9.21234 7.37549V11.1193M2.53931 4.25595H13.4593H2.53931ZM5.57234 4.25595V3.00833C5.57222 2.84433 5.60354 2.68192 5.6645 2.53038C5.72546 2.37884 5.81488 2.24115 5.92762 2.12519C6.04037 2.00922 6.17424 1.91726 6.32158 1.85456C6.46892 1.79185 6.62683 1.75964 6.78628 1.75977H9.21234C9.37179 1.75964 9.5297 1.79185 9.67703 1.85456C9.82437 1.91726 9.95824 2.00922 10.071 2.12519C10.1837 2.24115 10.2732 2.37884 10.3341 2.53038C10.3951 2.68192 10.4264 2.84433 10.4263 3.00833V4.25595H5.57234ZM12.2463 4.25595V12.9912C12.2463 13.3223 12.1184 13.6399 11.8907 13.8741C11.6631 14.1082 11.3543 14.2398 11.0323 14.2398H4.96628C4.64432 14.2398 4.33555 14.1082 4.10789 13.8741C3.88023 13.6399 3.75234 13.3223 3.75234 12.9912V4.25595H12.2463ZM6.78628 7.37549V11.1193V7.37549Z' stroke='black' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E%0A");
}

.ul-video-recorder-toggle-button .vjs-icon-placeholder:before {
  content: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0Z' fill='%23D15153'/%3E%3C/svg%3E");
}

.ul-video-recorder-toggle-button.ul-recording-in-session .vjs-icon-placeholder:before {
  content: url("data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 10L12 2C12 0.89543 11.1046 -4.85396e-07 10 -4.37114e-07L2 -8.74228e-08C0.89543 -3.91405e-08 -4.85396e-07 0.895431 -4.37114e-07 2L-8.74228e-08 10C-3.91405e-08 11.1046 0.895431 12 2 12L10 12C11.1046 12 12 11.1046 12 10Z' fill='%23D15153'/%3E%3C/svg%3E%0A");
}

.ul-video-recorder-camera-off-button .vjs-icon-placeholder:before {
  content: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0_2645_4654)'%3E%3Cpath d='M15.1491 4.75L10.5991 8L15.1491 11.25V4.75Z' stroke='black' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M9.29912 3.4502H2.14912C1.43115 3.4502 0.849121 4.03223 0.849121 4.7502V11.2502C0.849121 11.9682 1.43115 12.5502 2.14912 12.5502H9.29912C10.0171 12.5502 10.5991 11.9682 10.5991 11.2502V4.7502C10.5991 4.03223 10.0171 3.4502 9.29912 3.4502Z' stroke='black' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/g%3E%3Cdefs%3E%3CclipPath id='clip0_2645_4654'%3E%3Crect width='15.6' height='15.6' fill='white' transform='translate(0.199951 0.200195)'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E");
}

.ul-video-recorder-camera-off-button-audio-only .vjs-icon-placeholder:before {
  content: url("data:image/svg+xml,%3Csvg width='22' height='15' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M.75 3A2.75 2.75 0 013.5.25h9.081A2.75 2.75 0 0115.331 3v9a2.75 2.75 0 01-2.75 2.75H3.5A2.75 2.75 0 01.75 12V3zM3.5 1.75c-.69 0-1.25.56-1.25 1.25v9c0 .69.56 1.25 1.25 1.25h9.081c.69 0 1.25-.56 1.25-1.25V3c0-.69-.56-1.25-1.25-1.25H3.5z' fill='%23262136'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M14.53 2.03l-12 12-1.06-1.06 12-12 1.06 1.06zM20.87 1.525a.75.75 0 01.38.652v10.588a.75.75 0 01-1.134.644l-5.92-3.53a.75.75 0 01-.365-.643v-3.53a.75.75 0 01.366-.644l5.919-3.53a.75.75 0 01.754-.007zm-5.539 4.607V8.81l4.419 2.635V3.497l-4.419 2.635z' fill='%23262136'/%3E%3C/svg%3E");
  transform: scale(0.75);
}

.ul-upload-progress-label {
  padding: 0.15em 0.75em;
  align-items: center;
  font-size: 12px;
  color: #333;
  background: #FCFCFD;
  border-radius: 99px;
  text-align: center;
  border: 1px solid #E0E0EB;
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  bottom: 75px;
  left: calc(50% - 65px);
  width: 130px;
  z-index: 5;
}

.ul-upload-progress-label__time {
  display: inline-flex;
  margin-left: 0.8em;
  align-items: center;
}

.ul-upload-progress-label__time:before {
  content: "";
  display: inline-flex;
  width: 1px;
  height: 12px;
  background-color: #E0E0EB;
  margin-right: 0.8em;
}

@keyframes grow {
  0% {
    transform: scale(1);
    background-color: #EEECFC;
  }
  50%  {
    transform: scale(1.2);
    background-color: #E1DFF4;
  }
  100% {
    transform: scale(1);
    background-color: #EEECFC;
  }
}

.ul-audio-recorder-placeholder:before {
  width: 80px;
  height: 80px;
  border-radius: 120px;
  background-color: #EEECFC;
  content: "";
  position: absolute;
  left: calc(50% - 40px);
  top: calc(50% - 40px);
  animation: 6s infinite grow;
  transform-origin: 50% 60%;
}

.ul-audio-recorder-placeholder:after {
  content: url("data:image/svg+xml,%3Csvg width='98' height='98' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cmask id='a' maskUnits='userSpaceOnUse' x='0' y='0' width='98' height='98'%3E%3Ccircle cx='49' cy='49' r='49' fill='%23EDECF8'/%3E%3C/mask%3E%3Cg mask='url(%23a)'%3E%3Ccircle cx='49' cy='49' r='50' fill='%23645CC2'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M11.422 81.812c5.405-15.547 20.187-26.706 37.576-26.706 17.39 0 32.172 11.159 37.577 26.707-9.164 10.43-22.601 17.013-37.576 17.013-14.976 0-28.414-6.583-37.577-17.014z' fill='%23fff' fill-opacity='.6'/%3E%3Ccircle cx='49' cy='29' r='17' fill='%23fff' fill-opacity='.7'/%3E%3C/g%3E%3C/svg%3E");
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform: translate(-50%, -50%) scale(0.6);
}

.ul-audio-recorder-placeholder {
  min-height: 150px;
  width: 100%;
  background-color: #fcfcfd;
  display: block;
  position: relative;
}

.vjs-fullscreen .ul-audio-recorder-placeholder {
  vertical-align: middle;
  display: table-cell;
}

.vjs-fullscreen .ul-control-panel {
  height: 80px;
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  max-width: 100%;
  background-color: #F8F8F8;
}

.vjs-playback-rate .vjs-playback-rate-value {
  align-items: center;
  display: flex;
  font-size: 12px;
  justify-content: center;
}

.vjs-playback-rate .vjs-menu {
  left: -5px;
  bottom: 3px;
}

.vjs-menu-button-popup .vjs-menu .vjs-menu-content {
  background-color: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-sizing: border-box;
  border-radius: 4px;
}

.vjs-menu li {
  font-size: 12px;
  padding: 5px 0;
}

.vjs-menu li.vjs-selected {
  color: lightgray;
}

.vjs-menu li.vjs-menu-item:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.vjs-fullscreen .ul-buttons-panel {
  top: calc(50% - 30px);
  position: relative;
}

.vjs-fullscreen .vjs-record-indicator.vjs-control {
  bottom: 90px !important;
}

.vjs-record.video-js div.vjs-control.vjs-record-indicator {
  padding: 0.3em 0.75em 0.15em 15px;
  align-items: center;
  font-size: 12px;
  color: #333;
  background: #FCFCFD;
  border-radius: 99px;
  text-align: center;
  border: 1px solid #E0E0EB;
  display: flex;
  justify-content: center;
  align-items: center;
  position: absolute;
  bottom: 75px;
  top: auto;
  left: calc(50% - 21px);
  width: 43px;
  height: 16px;
  z-index: 4;
}

.vjs-record.video-js div.vjs-control.vjs-record-indicator:after {
  content: "";
  background-color: #EB5757;
  width: 6px;
  height: 6px;
  border-radius: 8px;
  animation: none;
  top: 4px;
  left: 5px;
}

.vjs-record.video-js div.vjs-control.vjs-record-indicator:before {
  position: relative;
  font-size: 9px;
  animation: none;
  opacity: 1;
  color: #333;
  top: auto;
  left: auto;
}

.ul-video-player-loading {
  display: inline-block;
  position: relative;
  width: 6rem;
  height: 6rem;

}
.ul-video-player-loading div {
  box-sizing: border-box;
  position: absolute;
  display: block;
  width: 80%;
  height: 80%;
  margin: 5px;
  border: 5px solid #666;
  border-radius: 50%;
  animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
  border-color: #666 transparent transparent transparent;
}

.first {
  animation-delay: -0.45s;
}
.second {
  animation-delay: -0.3s;
}
.third {
  animation-delay: -0.15s;
}

@keyframes lds-ring {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

.ul-video-btn {
  width: 100%;
  border: 1px solid #E6E6E6;
  border-radius: 4px;
  background-color: rgba(0, 0, 0, 0.02);
  padding: 8px;
  font-weight: 500;
  font-size: 15px;
}

.ul-record-response-btn:before, .ul-record-response-btn:after, .ul-back-question-btn:before, .ul-back-question-btn:after {
  margin: 0 5px;
  vertical-align: middle;
}

.ul-record-response-btn:before {
  content: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0_2645_4654)'%3E%3Cpath d='M15.1491 4.75L10.5991 8L15.1491 11.25V4.75Z' stroke='black' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M9.29912 3.4502H2.14912C1.43115 3.4502 0.849121 4.03223 0.849121 4.7502V11.2502C0.849121 11.9682 1.43115 12.5502 2.14912 12.5502H9.29912C10.0171 12.5502 10.5991 11.9682 10.5991 11.2502V4.7502C10.5991 4.03223 10.0171 3.4502 9.29912 3.4502Z' stroke='black' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/g%3E%3Cdefs%3E%3CclipPath id='clip0_2645_4654'%3E%3Crect width='15.6' height='15.6' fill='white' transform='translate(0.199951 0.200195)'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E");
  display: inline-block;
  transform: translate(0px, 2px);
}

.ul-record-response-btn:after {
  content: 'Record your Response';
}

.ul-back-question-btn:before {
  content: url("data:image/svg+xml,%3Csvg width='15' height='16' viewBox='0 0 15 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M13.8757 8.22361L1.1118 14.6056C0.945578 14.6887 0.75 14.5678 0.75 14.382V1.61803C0.75 1.43219 0.945579 1.31131 1.1118 1.39443L13.8757 7.77639C14.06 7.86852 14.06 8.13148 13.8757 8.22361Z' stroke='black' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E");
  display: inline-block;
  transform: scale(0.85) translate(0, 1px);
  -moz-transform: scale(0.85) translate(0, 2px);
}

.ul-back-question-btn:after {
  content: 'Back to Question';
}

.hidden {
  display: none !important;
  opacity: 0;
  visibility: hidden;
}

.visible {
  visibility: visible;
  opacity: 1;
  animation: fade 0.3s;
}

@keyframes fade {
  0% {
      opacity: 0;
  }

  100% {
      opacity: 1;
  }
}

#ul-recording-countdown-screen {
  width: 100%;
  height: 100%;
  color: black;
  background-color: rgba(255, 255, 255, 0.8);
  position: absolute;
  text-align: center;
  font-size: 15px;
  z-index: 1;
  display: table;
}

.ul-countdown-text {
  vertical-align: middle;
  display: table-cell;
  transform: translate(0, -25px);
}

.vjs-fullscreen > #ul-recording-countdown-screen {
  font-size: 25px;
  transform: unset;
}

.vjs-poster {
  background-size: cover;
}
`,ha=e=>{const t=V.document.createElement("div");return t.className="ul-video-player-loading",t.id=Sn(e),["first","second","third","fourth"].map(n=>{const r=V.document.createElement("div");r.className=n,t.appendChild(r)}),t},Sn=e=>e+"-loading-spiner",ye="hidden",Ho=".m3u8",En="questionId",Tn="ul-video-recorder-camera-off-button",Rn="ul-recording-in-session",ma=[{type:"link",content:`${Ye}/dependencies/videojs-record-4.5.0.min.css`},{type:"script",content:`${Ye}/dependencies/RecordRTC-5.6.2.js`},{type:"script",content:`${Ye}/dependencies/adapter.8.0.0.min.js`},{type:"script",content:`${Ye}/dependencies/videojs-record-4.5.0.min.js`},{type:"script",content:`${Ye}/userleap-web-upchunk-v2.2.2.js`}],Fo=[{type:"link",content:`${Ye}/dependencies/video-js-7.18.0.min.css`},{type:"script",content:`${Ye}/dependencies/video-js-7.18.0.min.js`},{type:"style",content:pa}],qo="-video-player",Bo="-secondary-video-player",Vo="-video-recorder";let Le,zo;const Ve=async({event:e,apiBase:t,headers:n,visitorId:r,envId:o,metadata:i})=>{const a=V.document.documentElement;if(!r||!o)return;const l={event:`SDK - ${e}`,visitorId:r,environmentId:o,metadata:{...i||{},screenWidth:window.screen.width,screenHeight:window.screen.height,clientWidth:a.clientWidth,clientHeight:a.clientHeight,location:window.location.href,language:navigator.language}};(await fetch(`${t}/sdk/1/visitors/${r}/analytics`,{method:"POST",cache:"no-cache",headers:n,body:JSON.stringify(l)})).ok||console.warn("[Sprig] (ERR-444) Failed to track analytics",e)},Ue=async(e,t,n,r,o,i)=>{Ve({event:`Video Error ${t}`,apiBase:n,headers:r,visitorId:o,envId:i,metadata:{errorMessage:e.message}});const a=V.document.documentElement,l={screenWidth:window.screen.width,screenHeight:window.screen.height,clientWidth:a.clientWidth,clientHeight:a.clientHeight,location:window.location.href,language:navigator.language},c={action:t,err:{message:e.message,stack:e.stack},meta:l,vid:o,envId:i};(await fetch(`${n}/sdk/1/errors`,{method:"POST",cache:"no-cache",headers:{...r,"userleap-platform":"video_recorder","x-ul-error":window.btoa(`userleap-${Date.now()}-error`)},body:JSON.stringify(c)})).ok||console.warn("[Sprig] (ERR-444) Failed to report error to API",e)},fa=(e,{type:t,content:n})=>new Promise(function(r,o){let i;t==="script"?(i=V.document.createElement("script"),i.src=n):t==="link"?(i=V.document.createElement("link"),i.rel="stylesheet",i.href=n,i.type="text/css"):(i=V.document.createElement("style"),i.innerHTML=n),i.onload=function(){r(n)},i.onerror=function(){o(n)},i.async=!1,i.id=btoa(n),e.appendChild(i)}),Qo=(e,t)=>{if(e.length===0)return t&&t();Promise.all(e.reduce((n,r)=>(n.push(fa(V.document.head,r)),n),[])).then(()=>{V.videojs=V.document.defaultView.videojs,t&&t()}).catch(function(n){console.log(n+" failed to load")})},Wo=(e,t,n)=>{if(t==="start"&&(e.style.visibility="visible"),t==="none")e.style.visibility=ye;else if(t==="success")e.style.visibility=ye,e.innerHTML="Upload succeeded!";else{const r=Math.round(parseFloat(n));e.innerHTML=`Uploading <span class="ul-upload-progress-label__time">${r}%</span>`,e.style.background=`linear-gradient(to right, #E0E0EB 0%, #E0E0EB ${r}%, #FCFCFD ${r}%, #FCFCFD 100%)`}},In=(e,t)=>{const n=V.videojs(e.id());return n==null?void 0:n.payload[t]},ga=(e,t,n,r,o)=>{const{surveyId:i,responseGroupUid:a,visitorId:l,envId:c}=e.payload;e.on("deviceError",function(){console.warn("device error: ",e.deviceErrorCode),e.deviceErrorCode.message==="Permission denied"?(e.deviceButton.addClass("permission-denied"),n&&n(B.ERROR,{type:B.PERMISSION_DENIED}),Ve({event:"Video Permission Denied",apiBase:t,headers:o,visitorId:l,envId:c,metadata:{questionId:In(e,En),responseGroupUid:a,surveyId:i}})):(n&&n(B.ERROR,{type:B.OTHER}),Ue(new Error(e.deviceErrorCode.message),"recorderDeviceError",t,o,l,c))}),e.on("error",function(u,h){Ue(h||e.error(),"recorderError",t,o,l,c)}),e.on("startRecord",function(u,h){r(e.uploadProgressLabel,"none"),Ve({event:"Video Record Start",apiBase:t,headers:o,visitorId:l,envId:c,metadata:{questionId:In(e,En),responseGroupUid:a,surveyId:i}})}),e.on("finishRecord",async function(){r(e.uploadProgressLabel,"start",0);const u=In(e,En);if(!i){const f="internal error: missing fields in payload";return n&&n(B.ERROR,{type:B.OTHER}),Ue(new Error(f),"finishRecord",t,o,l,c),null}e.record().stopDevice();const h=e.cameraOff?B.MEDIA_TYPE_AUDIO:B.MEDIA_TYPE_VIDEO,d=Cn();Ve({event:"Video Record Finish",apiBase:t,headers:o,visitorId:l,envId:c,metadata:{mediaRecordingUid:d,questionId:u,responseGroupUid:a,surveyId:i,mediaType:h}});const p={surveyId:i,updatedAt:new Date().toISOString(),mediaType:h,mediaRecordingUid:d};u&&(p.questionId=u),a&&(p.responseGroupUid=a),l&&(p.visitorId=l);const g=await(async()=>{const f=await fetch(`${t}/2/environments/integrations/upload`,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(f.ok){const x=await f.json();return n&&n(B.UPLOAD_STARTED,{[B.UPLOAD_ID]:x.upload.id,[B.MEDIA_TYPE]:h,[B.MEDIA_RECORDING_UID]:d}),x.upload.url}else return n&&n(B.ERROR,{type:B.OTHER,response:f}),Ue(new Error("failed to get upload response with url"),"finishRecord",t,o,l,c),null})();g&&(Le=V.document.defaultView.UpChunk.createUpload({endpoint:g,file:new V.document.defaultView.File([e.recordedData],`recording ${h} ${Date.now()}`),chunkSize:5120}),Le.startTime=Date.now(),Ve({event:"Video Upload Start",apiBase:t,headers:o,visitorId:l,envId:c,metadata:{mediaRecordingUid:d,questionId:u,responseGroupUid:a,surveyId:i,mediaType:h,url:g}}),Le.on("error",f=>{r(e.uploadProgressLabel,"none"),n&&n(B.UPLOAD_FINISHED,{[B.MEDIA_RECORDING_UID]:d}),Ue(f,"finishRecord",t,o,l,c)}),Le.on("progress",f=>{n&&n(B.UPLOAD_PROGRESS,{[B.MEDIA_RECORDING_UID]:d,[B.UPLOAD_PROGRESS_PCT]:f.detail}),r(e.uploadProgressLabel,"progress",f.detail)}),Le.on("success",()=>{r(e.uploadProgressLabel,"success"),n&&n(B.UPLOAD_FINISHED,{[B.MEDIA_RECORDING_UID]:d}),Ve({event:"Video Upload Success",apiBase:t,headers:o,visitorId:l,envId:c,metadata:{mediaRecordingUid:d,questionId:u,responseGroupUid:a,surveyId:i,mediaType:h,url:g,elapsedMs:Le.startTime&&Date.now()-Le.startTime}})}))})},Go=(e,t)=>{const n=new(V.videojs.getComponent("Component"))(e);return n.addClass("ul-buttons-panel"),t.map(r=>{n.addChild(r)}),va(n),n},va=e=>{e.children().forEach(t=>{if(Ie[t.name_]){const n=Nt(Ie[t.name_],`ul-${Ie[t.name_]}`);t.el_.appendChild(n)}})},Nt=(e,t="")=>{const n=V.document.createElement("span");return n.className="ul-button-text",n.innerHTML=e,n.id=t,n},Zo=(e,t,n,r,o=!1,i)=>{e.addClass("ul-video-player");const a=new(V.videojs.getComponent("Component"))(e);a.addClass("ul-control-panel"),e.progressBar=a.addChild("ProgressControl"),n&&e.src(n),e.audioPlayerPlaceholder=new(V.videojs.getComponent("Component"))(e),e.audioPlayerPlaceholder.addClass("ul-audio-recorder-placeholder");const l=n&&n.src?ya(n.src):null;n&&(o||!l)?(e.children()[0].classList.add("vjs-hidden"),V.document.getElementById(`${e.id()}_html5_api`).style.height="0px"):(e.audioPlayerPlaceholder.hide(),V.document.getElementById(`${e.id()}_html5_api`).style.height="100%",l&&e.poster(l)),e.on("play",()=>{!o&&n&&!l&&xa(e),i==null||i.play()}),e.on("pause",()=>{i==null||i.pause()}),e.on("seeked",()=>{i==null||i.currentTime(e.currentTime())}),e.on("ratechange",()=>{i==null||i.playbackRate(e.playbackRate())}),e.addChild(e.audioPlayerPlaceholder,{},1),a.addChild(t),e.addChild(a),r&&r(e)},ba=(e,t,n)=>{e.addClass(`ul${Bo}`);const r=new(V.videojs.getComponent("Component"))(e);t&&e.src(t),e.addChild(r),n&&n(e)},_a=(e,t,n,r,o,i,a,l=!1)=>{zo=Date.now();const u=Dt(t,{controls:!1,bigPlayButton:!1,fluid:!1,width:1280,height:720,playsinline:!0,plugins:{record:{audio:!0,video:{mandatory:{minWidth:1280,minHeight:720}},frameWidth:1280,frameHeight:720,maxLength:600,autoMuteDevice:!0}}});if(!u)return;u.payload=n;const{surveyId:h,questionId:d,responseGroupUid:p,visitorId:m,envId:g}=n;let f;const x=T=>{const C=Tn,k=Tn+"-audio-only";Wo(u.uploadProgressLabel,"none"),Le&&Le.startTime>=zo&&Le.abort();const I=V.document.getElementById("ul-camera-button");T?(u.children()[0].classList.add("vjs-hidden"),w.removeClass(C),w.addClass(k),I.innerHTML=Ie.TurnOnCamera,u.audioPlayerPlaceholder.removeClass("vjs-hidden"),f==null||f.getTracks().forEach(A=>{A.stop()}),window.navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(A=>{f=A,A.getVideoTracks().forEach($=>{$.enabled=!1}),u.record().onDeviceReady(A)}).catch(u.record().onDeviceError.bind(u.record()))):(f==null||f.getVideoTracks().forEach(A=>{A.enabled=!0}),u.children()[0].classList.remove("vjs-hidden"),u.record().getDevice(),w.removeClass(k),w.addClass(C),I.innerHTML=Ie.TurnOffCamera,u.audioPlayerPlaceholder.addClass("vjs-hidden"))},v=new(V.videojs.getComponent("Button"))(u,{clickHandler:()=>{v.hasClass(ye)||(Ve({event:"Video Delete Button Clicked",apiBase:r,headers:a,visitorId:m,envId:g,metadata:{questionId:d,responseGroupUid:p,surveyId:h}}),x(u.cameraOff),o(B.DELETE,{}),w.removeClass(ye),v.addClass(ye))}});v.addClass("ul-video-recorder-delete-button"),v.el_.appendChild(Nt(Ie.DeleteButton,"ul-delete-button"));const _=V.document.getElementById(t),b=()=>{_.classList.contains("vjs-fullscreen")&&u.cameraOff?_.style.display="table":_.style.display="flex"};b();const w=new(V.videojs.getComponent("Button"))(u,{clickHandler:()=>{u.record().isRecording()||(u.cameraOff=!u.cameraOff,Ve({event:"Video Camera Button Clicked",apiBase:r,headers:a,visitorId:n.visitorId,envId:n.envId,metadata:{questionId:d,responseGroupUid:p,surveyId:h,cameraOff:u.cameraOff}}),x(u.cameraOff),!v.hasClass(ye)&&v.addClass(ye),o(B.DELETE,{}),b())}});w.addClass(Tn),w.el_.appendChild(Nt(Ie.TurnOffCamera,"ul-camera-button"));const S=new(V.videojs.getComponent("Button"))(u,{clickHandler:()=>{const T=V.document.getElementById("ul-recorder-toggle");if(u.record().isRecording())u.record().stop(),T&&(T.innerHTML=Ie.RecordButton),S.removeClass(Rn),v.removeClass(ye);else{const C=V.document.getElementById("ul-recording-countdown-screen");if(C)C.remove(),T&&(T.innerHTML=Ie.RecordButton),x(u.cameraOff),o(B.DELETE,{}),w.removeClass(ye),v.addClass(ye),S.removeClass(Rn),N.show();else{S.addClass(Rn),N.hide(),w.addClass(ye),v.addClass(ye),T&&(T.innerHTML=Ie.StopButton);const k=V.document.createElement("div");k.id="ul-recording-countdown-screen",_.insertBefore(k,_.children[1]),k.style.height=`${_.offsetHeight}px`,Yo(u,3)}}}});S.addClass("ul-video-recorder-toggle-button"),S.el_.appendChild(Nt(Ie.RecordButton,"ul-recorder-toggle"));const R=V.document.createElement("p");R.style.visibility="hidden",R.className="ul-upload-progress-label",e.appendChild(R),u.uploadProgressLabel=R;const E=Go(u,[v,w,"PlayToggle",S,"FullscreenToggle"]),N=E.children().find(T=>T.name_==="FullscreenToggle");N.hasClass("vjs-disabled")&&N.hide();const y=E.children().find(T=>T.name_==="PlayToggle");y.hide(),v.addClass(ye),Zo(u,E,i,!1,l),u.on("stopRecord",()=>{S.hide(),y.show(),N.show(),v.removeClass(ye)}),u.on("deviceReady",()=>{S.show(),y.hide(),v.addClass(ye)}),ga(u,r,o,Wo,a);const P=[{name:"microphone"}];!u.cameraOff&&P.push({name:"camera"}),Promise.all(P.map(T=>{var C;return(C=navigator==null?void 0:navigator.permissions)==null?void 0:C.query(T)})).then(T=>{T.reduce((k,I)=>k&I.state==="granted",!0)&&u&&(u.deviceButton&&u.deviceButton.hide(),u.record().getDevice())}).catch(T=>{})},Yo=(e,t=3)=>{const n=V.document.getElementById("ul-recording-countdown-screen");n&&t===0?(n.remove(),e.record().start()):n&&(n.innerHTML=`<span class='ul-countdown-text'>Recording in... ${t}</span>`,setTimeout(()=>{Yo(e,t-1)},1e3))},Ko=e=>{const t=V.document.createElement("div");return t.className="ul-video-container",t.appendChild(ha(e)),t},Ln=(e,t)=>{const n=V.document.createElement("video");n.id=e,n.className="video-js vjs-default-skin ul-video-player-video";const r=V.document.createElement("p");r.className="vjs-no-js",r.innerHTML="To view this video please enable JavaScript, and consider upgrading to a web browser that";const o=V.document.createElement("a");return o.href="https://videojs.com/html5-video-support/",o.target="_blank",o.innerHTML="supports HTML5 video",r.appendChild(o),n.appendChild(r),t.appendChild(n),t},xa=(e,t)=>{e.children()[0].classList.remove("vjs-hidden"),e.audioPlayerPlaceholder.hide(),V.document.getElementById(`${e.id()}_html5_api`).style.height="100%"},Dt=(e,t)=>V.document.getElementById(e)?t?V.videojs(e,t):V.videojs(e):(console.error(`Error in finding player element with ID, ${e}`),null),Jo=(e,t,n,r=!1,o="https://api.sprig.com",i=document,a=null,l=null)=>{V.document=i;const c=e+qo,u=Ko(c);return V.document.addEventListener("securitypolicyviolation",h=>{Ue(new Error(`Voice & Video feature violates ${h.violatedDirective} web page CSP policies for the question player.`),"playerDeviceError",o,{})}),Qo(Fo,()=>{V.document.getElementById(Sn(c)).remove(),Ln(c,u);const h={playsinline:!0,playbackRates:[.5,1,1.5,2],fill:!0};try{const d=e+Bo;Ln(d,u);const p=Dt(c,h),m=Dt(d,{muted:!0,...h});if(!p||!m)return;ba(m,a,l),a||m.addClass(ye);const g=Go(p,["PlaybackRateMenuButton","PlayToggle","FullscreenToggle"]),f=g.children().find(x=>x.name_==="FullscreenToggle");f.hasClass("vjs-disabled")&&f.hide(),Zo(p,g,t,n,r,m)}catch(d){Ue(new Error(`Error when creating video player object ${d}`),"playerDeviceError",o,{});return}}),u},Xo=(e,t={},n="https://api.userleap.com",r,o,i,a=!1,l=document)=>{V.document=l;const c=e+Vo,u=Ko(c);return V.document.addEventListener("securitypolicyviolation",h=>{Ue(new Error(`Voice & Video feature violates ${h.violatedDirective} web page CSP policies for the recorder player.`),"recorderDeviceError",n,i,t.visitorId,t.envId)}),Qo(Fo.concat(ma),()=>{Ln(c,u),V.document.getElementById(Sn(c)).remove();try{_a(u,c,t,n,r,o,i,a)}catch(h){Ue(new Error(`Error when creating video recorder player object ${h}`),"recorderDeviceError",n,i,t.visitorId,t.envId);return}}),u},ei=e=>{const t=e+Vo;if(V.document.getElementById(t)&&V.videojs){try{if(!V.videojs(t).record().stream)return}catch{return}V.videojs(t).record().stop(),V.videojs(t).record().stopDevice()}},ti=e=>{const t=Dt(e+qo);t==null||t.pause()},ya=e=>{if(!e)return null;const t=e.match(/https:\/\/stream.mux.com\/(.*)/);let n=t?t[1]:null;return n.includes(Ho)&&(n=n.replace(Ho,"")),n?`https://image.mux.com/${n}/thumbnail.jpg?time=0`:null},B={UPLOAD_STARTED:"upload.started",UPLOAD_PROGRESS:"upload.progress",UPLOAD_FINISHED:"upload.finished",DELETE:"delete",ERROR:"error",MEDIA_TYPE:"media.type",PERMISSION_DENIED:"permission_denied",OTHER:"other",UPLOAD_ID:"upload.id",UPLOAD_PROGRESS_PCT:"upload.progress.pct",MEDIA_RECORDING_UID:"media.recording.uid",MEDIA_TYPE_VIDEO:"video",MEDIA_TYPE_AUDIO:"audio"},Ie={PlaybackRateMenuButton:"Speed",PlayToggle:"Play",FullscreenToggle:"Expand",TurnOnCamera:"Turn on",TurnOffCamera:"Turn off",DeleteButton:"Delete",RecordButton:"Record",StopButton:"Stop",PauseButton:"Pause"},ka=({properties:e,surveyVideoUrl:t,questionId:n})=>{const r=`ul-card-video__question_player-q${n}`,{apiURL:o,viewDocument:i}=H(l=>({apiURL:l.apiURL,viewDocument:l.viewDocument}));return s("div",{id:r,ref:l=>{if(l&&l.children.length===0&&!e.properties.hideRecordedPrompt){const c=Jo(r,{src:t,type:"application/x-mpegURL"},void 0,e.properties.mediaType===B.MEDIA_TYPE_AUDIO,o,i);l.appendChild(c)}}})},Ke=({isDisabled:e,onClick:t,children:n})=>s(ie,{className:"ul-card__button-checkmark",disabled:e,onClick:t,type:"button",children:[s("svg",{fill:"none",height:"10",viewBox:"0 0 13 10",width:"13",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M11.5 1.5L4.5 8.5L1 5",stroke:"#ffffff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})}),n||"Ok"]}),wa=({className:e,next:t,properties:n,questionId:r,type:o})=>{const{useMobileStyling:i,border:a}=H(E=>({useMobileStyling:E.useMobileStyling,border:E.border})),[l,c]=q(!1),[u,h]=q(""),[d,p]=q(!1),m=n==null?void 0:n.collectName,g=(n==null?void 0:n.nameLabelText)||"Full Name",f=(n==null?void 0:n.consentText)||"I agree to the stated conditions",x=(n==null?void 0:n.submitButtonText)||"Submit",v=!!u.trim(),_=l&&(!m||v),b=(E,N=!1)=>{E.preventDefault(),E.stopPropagation();let y=null;if(!N){if(!_){p(!0);return}y={submitted:!0},m&&(y.name=u)}t({value:y,questionId:r,type:o},N?!0:_)},w=E=>{E.preventDefault(),E.stopPropagation(),h(E.currentTarget.value)},S=E=>{E.currentTarget.style.borderColor=d&&!v?Be:a},R=E=>{E.currentTarget.style.borderColor=d&&!v?Be:at};return s("div",{className:O(e,"ul-card__consent-legal","fade-in-transition"),children:s(ue,{embeddedType:"pdf",properties:n,children:s(me,{children:[s("div",{className:"sprig-stretch",children:[s($e,{allowTextEntry:!1,border:a,error:d&&!l,id:"consent",isRadio:!1,isSelected:l,label:f,onUserInputChanged:({selected:E})=>{E!==l&&c(!l)},useMobileStyling:i}),m&&s("input",{"aria-label":g,"aria-placeholder":g,className:O(ne("ul-consent-legal__name-input",i)),"data-gramm":"false",maxLength:250,name:"name",onBlur:R,onFocus:S,onInput:w,placeholder:g,style:d&&!v?{borderColor:Be}:{},tabIndex:0,value:u})]}),s("div",{className:"ul-card__button-wrapper ul-card-vertical__button-wrapper",children:[s(Ke,{isDisabled:!_,onClick:E=>b(new SubmitEvent(E.type)),children:fe({buttonText:x})}),n.required===!1&&s("button",{className:"ul-card-skip__button",onClick:E=>b(new SubmitEvent(E.type),!0),children:dt(n)})]})]})})},r)},Ca=()=>{const{destroy:e,forceBrandedLogo:t}=H(n=>({destroy:n.destroy,forceBrandedLogo:n.forceBrandedLogo}));return K(()=>{setTimeout(()=>{e(Oe)},t?4e3:2e3)},[e,t]),s("div",{className:"end-of-survey-text",children:"End of survey"})},Sa=({icon:e,scaleLabelType:t,value:n,selectedValue:r})=>{if(t==="smiley"&&n===r){let o=0;return e.replace(/black/g,()=>++o===1?"black":"white")}return e},Ea=({activeValue:e,border:t,icon:n,enableCspTrustedTypes:r,isPressed:o,range:i,scaleLabelType:a,selectedValue:l,setSelectedValue:c,setActiveValue:u,setIsPressed:h,useMobileStyling:d,value:p,viewDocument:m})=>{const g=`option-${p}`,f=a==="number",x=a==="star",v=a==="smiley",_=f&&p===e||p===l,[b,w]=(()=>{const y=x&&p<=e||v&&p===e,P=x&&l!==null&&p<=l;return y||P||p===e||p===l?[t,o||P||p===l?1:.3]:["",1]})(),S=()=>{switch(a){case"star":return O(ne("likert-star",d),ne(`likert-star-${p}`,d));case"smiley":return O(ne("likert-smiley",d),ne(`likert-smiley-${p}`,d));default:return p===i?O(ne("likert-number",d),ne(`likert-number-${p}`,d),ne("likert-last-option",d)):O(ne("likert-number",d),ne(`likert-number-${p}`,d))}},R=()=>{u(-1),h(!1)},E=he(()=>{const y={borderColor:_?b:"",fillOpacity:_?"":w,zIndex:_?3:"auto",color:l===p?"#fff":""};return f?{...y,backgroundColor:l===p?b:""}:{...y,color:x||v||l===p?b:""}},[_,b,w,l,p,f,x,v]),N=he(()=>Rt(Sa({icon:n,scaleLabelType:a,value:p,selectedValue:l}),r),[r,n,a,l,p]);return s("button",{"aria-label":f?void 0:String(p),className:S(),dangerouslySetInnerHTML:{__html:N},id:g,onClick:y=>{y.preventDefault(),y.stopPropagation(),c(p)},onKeyDown:y=>{var C,k;const P=m.querySelectorAll(`.likert-${a??"number"}`),T=p-1;y.key==="ArrowRight"?(C=P[T+1])==null||C.focus():y.key==="ArrowLeft"?(k=P[T-1])==null||k.focus():(y.key==="Enter"||y.key===" ")&&(y.preventDefault(),y.stopPropagation(),c(p))},onPointerDown:()=>h(!0),onPointerEnter:()=>u(p),onPointerLeave:R,style:E,tabIndex:0})},Ta=({className:e,labels:t,next:n,properties:r,questionId:o,type:i})=>{const{border:a,useMobileStyling:l,viewDocument:c,enableCspTrustedTypes:u}=H(N=>({border:N.border,useMobileStyling:N.useMobileStyling,viewDocument:N.viewDocument,enableCspTrustedTypes:N.enableCspTrustedTypes})),[h,d]=q(-1),[p,m]=q(!1),[g,f]=q(null),x=t&&t.left,v=t&&t.right;let _;const{range:b,scaleLabelType:w,ratingIcons:S}=r;b&&(_=Number(b));const R=_||5,E=N=>{var y,P;switch(w){case"star":return(y=S[0])==null?void 0:y.svg;case"smiley":return(P=S[N])==null?void 0:P.svg;default:return String(N+1)}};return s("form",{className:O(e,"ul-card--likert","fade-in-transition"),children:s(ue,{properties:r,children:[s(ce,{children:[s("div",{"aria-label":`Rating (1 - ${R})`,className:"ul-card--likert__numbers",role:"radiogroup",children:[...Array(R)].map((N,y)=>{const P=y+1;return s(Ea,{activeValue:h,border:a,enableCspTrustedTypes:u,icon:E(y),isPressed:p,range:R,scaleLabelType:w,selectedValue:g,setActiveValue:d,setIsPressed:m,setSelectedValue:f,useMobileStyling:l,value:P,viewDocument:c},y)})}),s("div",{className:"ul-card--likert__labels",children:[s("span",{children:x}),s("span",{children:v})]})]}),s(me,{children:s(Ke,{isDisabled:g===null&&r.required,onClick:()=>n({value:g,questionId:o,type:i},!0),children:fe(r)})})]})},o)},Ra=({columns:e,onSelect:t,options:n,selectedOptions:r})=>{const o=oe([]),{border:i,useMobileStyling:a}=H(p=>({border:p.border,useMobileStyling:p.useMobileStyling})),l=n.findIndex(p=>r[p.id]===null),[c,u]=q(l),h=we((p,m)=>{t(p,m);const g=c+1,f=n[g];f&&r[f.id]===null&&u(g)},[t,n,r,c]),d=we((p,m)=>{const g=c===p;return s(bo,{animate:!0,header:m.label,isOpen:g,onClick:()=>{var f;return u(g&&!((f=window.UserLeap)!=null&&f.isMobileSDK)?-1:p)},ref:f=>{f&&(o.current[p]=f)},showHeaderCheck:r[m.id]!==null,children:s("div",{style:{paddingTop:"12px"},children:e.map(f=>s($e,{allowTextEntry:!1,ariaLabel:`${m.label}-${f.label}`,border:i,error:!1,id:`${m.id}-${f.value}`,isRadio:!0,isSelected:r[m.id]===f.value,label:f.label,onUserInputChanged:()=>h(m.id,f.value),useMobileStyling:a},f.label))})},m.id)},[i,e,c,h,r,a]);return s("div",{children:n.map((p,m)=>d(m,p))})},Ia=({className:e,next:t,options:n,properties:r,questionId:o,type:i,onSubmitButtonClick:a})=>{const l=r.matrixColumn,c=r.required,u=f=>{f.preventDefault(),f.stopPropagation(),t({value:d,questionId:o,type:i},!0),a&&a()},h=n.reduce((f,x)=>(f[x.id]=null,f),{}),[d,p]=q(h),m=f=>c&&Object.values(f).every(x=>x==null),g=(f,x)=>{p(v=>({...v,[f]:x}))};return s("form",{className:O(e,"ul-card__matrix","fade-in-transition"),id:"text-form",onSubmit:u,children:s(ue,{properties:r,children:[s(ce,{children:s(Ra,{columns:l,onSelect:g,options:n,selectedOptions:d})}),s(me,{children:s(Ke,{isDisabled:m(d),onClick:()=>u(new SubmitEvent("submit")),children:fe(r)})})]})},o)};var Pn=(e=>(e.CONTINUE="CONTINUE",e.EXTERNAL="EXTERNAL",e.NO_BUTTON="NO_BUTTON",e))(Pn||{}),He=(e=>(e.Unlimited="Unlimited",e.Maximum="Maximum",e.Range="Range",e))(He||{});const La=({options:e,selectItem:t,selectedOptions:n,showCheckbox:r,disabledOptions:o,dropdownFooter:i})=>{const{themeColor:a}=H(c=>({doc:c.viewDocument,themeColor:c.border})),l=c=>`checkbox-div-${c}`;return s("div",{className:"select-list",children:[e.map(c=>s("div",{"aria-disabled":o==null?void 0:o.includes(c),className:O("select-option",o!=null&&o.includes(c)?"ul-choice-disabled":""),onClick:u=>{o!=null&&o.includes(c)||(t(c),u.stopPropagation())},role:"option",style:{...o!=null&&o.includes(c)?{opacity:.5,cursor:"not-allowed"}:{}},children:[r&&s(wo,{divId:l(c.id),id:c.id,isSelected:n.includes(c),themeColor:a}),c.label]},c.id)),i]})},ni=({isMultiSelect:e=!1,multiselectText:t="choices selected",onChange:n,options:r,placeholderText:o,value:i,disabledOptions:a=[],dropdownFooter:l})=>{const[c,u]=q(!1),{viewDocument:h,update:d,isConversationalUI:p}=H(v=>({viewDocument:v.viewDocument,update:v.update,isConversationalUI:v.isConversationalUI})),m=()=>i.length===0?o:i.length===1?i[0].label:`${i.length} ${t}`,g=()=>{u(!c)};it(()=>{p||d()},[c,p,d]),K(()=>{var _;const v=b=>{const w=b.target;w!=null&&w.closest(".select-option.ul-choice-disabled")||u(!1)};h.addEventListener("click",v);try{(_=window.parent)==null||_.addEventListener("click",v)}catch{window.addEventListener("click",v)}return()=>{var b;h.removeEventListener("click",v);try{(b=window.parent)==null||b.removeEventListener("click",v)}catch{window.removeEventListener("click",v)}}},[h]);const f=v=>{var w;const _=i.some(S=>S.id===v.id),b=i.some(S=>{var R;return(R=S.optionProperties)==null?void 0:R.noneOfTheAbove});(w=v.optionProperties)!=null&&w.noneOfTheAbove&&!_?n([v]):e?n(_?i.filter(S=>S.id!==v.id):b?[v]:[...i,v]):_||n([v]),e||g()},x=i.length===0?["select-button-placeholder"]:[];return s(ae,{children:[s("button",{"aria-label":"choice dropdown button",className:O("select-button",...x),onClick:v=>{v.stopPropagation(),g()},type:"button",children:[s("span",{children:m()}),s(fo,{})]}),c&&s(La,{disabledOptions:a,dropdownFooter:l,options:r,selectedOptions:i,selectItem:f,showCheckbox:e})]})},ri=({className:e,onSubmit:t,options:n=[],properties:r,questionId:o,type:i,showIndividualSubmit:a=!1,onSubmitButtonClick:l})=>{const{border:c,useMobileStyling:u}=H(C=>({border:C.border,useMobileStyling:C.useMobileStyling})),h=n.reduce((C,k)=>(C[k.id]={isSelected:!1},C),{}),[d,p]=q(h),m=i==="multiplechoice",g=r.required,f=n.find(C=>{var k;return(k=C.optionProperties)==null?void 0:k.noneOfTheAbove}),x=C=>Object.entries(C).some(([k,I])=>{var L;const A=n.find(D=>`${D.id}`===k),$=I.userText===void 0||I.userText.trim()==="";return((L=A==null?void 0:A.optionProperties)==null?void 0:L.allowsTextEntry)&&$&&I.isSelected}),v=C=>Object.values(C).filter(k=>k.isSelected).length,_=C=>{const{minSelect:k=0,maxSelect:I=1/0,maxSelectMode:A}=r,$=v(C);switch(A){case He.Maximum:return $<=I;case He.Range:return $!==0?$>=k:!0;default:return!0}},b=r.minSelect&&r.minSelect>0&&r.maxSelectMode===He.Range&&v(d)<r.minSelect&&(g||v(d)>0),w=C=>x(C)||g&&!v(C)||!_(C),S=C=>x(C),R=Object.entries(d).some(([C,k])=>{var I,A;return k.isSelected&&((A=(I=n.find($=>`${$.id}`===C))==null?void 0:I.optionProperties)==null?void 0:A.allowsTextEntry)}),E=a&&(!m||R),N=C=>{T(C.id,C.selected,C.userText,C.noneOfTheAbove)},y=C=>{var k;return(r==null?void 0:r.maxSelectMode)!==He.Unlimited&&v(d)===(r==null?void 0:r.maxSelect)&&!((k=d[C])!=null&&k.isSelected)},P=()=>{t(d,!0),l&&l()},T=(C,k,I,A)=>{const $=Object.assign({},d);if((m||A)&&k)for(const L of Object.values($))L.isSelected=!1,delete L.userText;else f&&!A&&d[f.id].isSelected&&($[f.id].isSelected=!1);$[C]={isSelected:k,userText:I},p($)};return s("form",{className:O(e,"ul-card--multiple","fade-in-transition"),id:"text-form",onSubmit:P,children:s(ue,{properties:r,children:[s(ce,{children:[r.isDropdown?s(ni,{disabledOptions:n.filter(C=>y(C.id)),dropdownFooter:b?s("div",{className:"ul-card__min-select-counter",style:{marginLeft:"16px"},children:[v(d),"/",r.minSelect]}):void 0,isMultiSelect:!m,multiselectText:r.dropdownMultiselectedText??"choices selected",onChange:C=>{const k={...d};for(const I of n)C.includes(I)?k[I.id].isSelected=!0:k[I.id].isSelected=!1;p(k)},options:n,placeholderText:r.dropdownPlaceholderText??(m?"Select choice":"Select choice(s)"),value:n.filter(C=>d[C.id].isSelected)}):s("div",{className:O(ne("ul-card__choices",u)),role:m?"radiogroup":"group",children:[n.map(({id:C,label:k,value:I,optionProperties:A})=>{var Q,M;const $=`${C}`,{allowsTextEntry:L,noneOfTheAbove:D}={allowsTextEntry:!1,noneOfTheAbove:!1,...A};return s($e,{allowTextEntry:L,border:c,disabled:y($),error:S(d),id:$,isRadio:m,isSelected:!!((Q=d[$])!=null&&Q.isSelected),label:k,noneOfTheAbove:D,onUserInputChanged:N,promptText:"Please specify",text:(M=d[C])==null?void 0:M.userText,useMobileStyling:u,value:I},$)}),!!b&&s("div",{className:"ul-card__min-select-counter",children:[v(d),"/",r.minSelect]})]}),E&&s(ct,{handleSubmit:P,isSubmitDisabled:w(d)})]}),s(me,{children:s(Ke,{isDisabled:w(d),onClick:P,children:fe(r)})})]})},o)},Pa=e=>{const{questionId:t,type:n,next:r,options:o}=e;return s(ri,{...e,onSubmit:(a,l)=>{const c=Object.entries(a).find(([,m])=>m.isSelected)||[void 0,void 0],[u,h]=c,d=o.find(m=>`${m.id}`===u),p=h!=null&&h.userText?{[u]:{userText:h.userText}}:null;r({value:d&&u?{[u]:d.value}:{},secondaryValue:p,questionId:t,type:n},l)}})},Na=e=>{const{questionId:t,type:n,next:r}=e;return s(ri,{...e,onSubmit:(i,a)=>{const l={},c=Object.entries(i).reduce((h,[d,p])=>(h[d]=p.isSelected,h),l),u=Object.entries(i).reduce((h,[d,p])=>{if(!p.userText)return h;const m=h||{};return m[d]={userText:p.userText},m},null);r({value:c,secondaryValue:u,questionId:t,type:n},a)}})},Da=({className:e,labels:t,properties:n,next:r,questionId:o,type:i})=>{const[a,l]=q(null),{border:c,useMobileStyling:u,viewDocument:h}=H(m=>({border:m.border,useMobileStyling:m.useMobileStyling,viewDocument:m.viewDocument})),d=t&&t.left,p=t&&t.right;return s("form",{className:O(e,"ul-card--nps","fade-in-transition"),children:s(ue,{properties:n,children:[s(ce,{children:[s("div",{className:"ul-card--nps__numbers",children:[...Array(11)].map((m,g)=>s("button",{className:O(ne("nps-number",u),ne(`nps-number-${g}`,u)),id:`option-${g}`,onClick:f=>{f.preventDefault(),f.stopPropagation(),l(g)},onKeyDown:f=>{var v,_;const x=h.querySelectorAll("button.nps-number");f.key==="ArrowRight"?(v=x[g+1])==null||v.focus():f.key==="ArrowLeft"?(_=x[g-1])==null||_.focus():(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),f.stopPropagation(),l(g))},onPointerDown:f=>{f.currentTarget.style.zIndex="2",f.currentTarget.style.borderColor=c},onPointerLeave:f=>{f.currentTarget.style.zIndex="auto",f.currentTarget.style.borderColor=at},style:a===g?{backgroundColor:c,color:"#fff"}:void 0,tabIndex:0,children:g},g))}),s("div",{className:"ul-card--nps__labels",children:[s("span",{children:d}),s("span",{children:p})]})]}),s(me,{children:s(Ke,{isDisabled:a===null&&n.required,onClick:()=>r({value:a,questionId:o,type:i},!0),children:fe(n)})})]})},o)},ja=({className:e,next:t,properties:n,questionId:r,type:o,onSubmitButtonClick:i})=>{const{border:a,useMobileStyling:l,update:c}=H(w=>({border:w.border,useMobileStyling:w.useMobileStyling,update:w.update})),[u,h]=q(""),d=oe(null),p=u.trim(),m=n.required===!0&&!p,g=_n(d,()=>c()),f=w=>{const{value:S}=w.currentTarget;g(),w.preventDefault(),w.stopPropagation(),h(S)},x=w=>{w.preventDefault(),w.stopPropagation();const R=n.required===!0?p.length>0:!0;t({value:u,questionId:r,type:o},R),i&&i()},v=n&&n.openTextPlaceholder?n.openTextPlaceholder:"",_=w=>{w.currentTarget.style.borderColor=a},b=w=>{w.currentTarget.style.borderColor=at};return s("form",{className:O(e,"ul-card-text","fade-in-transition"),id:"text-form",children:s(ue,{properties:n,children:s("div",{className:"ul-card-text",children:[s(ce,{children:[s("div",{className:"ul-card-text__container",children:s("textarea",{"aria-describedby":"ul-caption","aria-labelledby":"ul-question","aria-multiline":"true","aria-placeholder":v,className:O(ne("ul-card-text__input",l)),"data-gramm":"false",maxLength:5e3,name:"text",onBlur:b,onChange:f,onFocus:_,placeholder:v,ref:d,role:"textbox",tabIndex:0})}),n.footerHtml&&s(Re,{className:"footer",html:n.footerHtml})]}),s(me,{children:s(Ke,{isDisabled:m,onClick:x,children:fe(n)})})]})})},r)},Aa=({className:e,labels:t,next:n,properties:r,questionId:o,type:i,onSubmitButtonClick:a,options:l})=>{const c=oe(null),u=oe(0),h=oe(0),d=oe(null),p=oe(!1),m=oe([]),[g,f]=q(()=>(r==null?void 0:r.required)===!0),[x,v]=q(()=>l.map(F=>({...F,rank:null}))),_=he(()=>Array.from({length:l.length},(F,z)=>z+1),[l.length]),{useMobileStyling:b,isPreview:w,headers:S}=H(F=>({useMobileStyling:F.useMobileStyling,isPreview:F.isPreview,headers:F.headers})),R=(S==null?void 0:S["userleap-platform"])==="android",E=b&&!w&&!R,N=!E&&!R,y=F=>{F.preventDefault(),D(x),a&&a()},P=(F,z)=>{v(Y=>{const W=parseInt(z),ee=Y.map(j=>({...j}));ee.some(j=>j.rank==null)&&ee.forEach((j,G)=>j.rank=G+1);const Fe=ee.findIndex(j=>j.id===F);if(Fe===-1)return Y;const ze=ee[Fe].rank;return W<ze?ee.forEach(j=>{j.id!==F&&j.rank>=W&&j.rank<ze&&(j.rank=j.rank+1)}):W>ze&&ee.forEach(j=>{j.id!==F&&j.rank>ze&&j.rank<=W&&(j.rank=j.rank-1)}),ee[Fe].rank=W,ee.sort((j,G)=>j.rank-G.rank),Q(),ee})},T=(F,z)=>{for(let Y=0;Y<m.current.length;Y++){const W=m.current[Y];if(!W||W===d.current)continue;const ee=W.getBoundingClientRect();if(F>=ee.left&&F<=ee.right&&z>=ee.top&&z<=ee.bottom)return{element:W,index:Y}}return null},C=F=>z=>{if(!E)return;z.preventDefault(),z.stopPropagation(),p.current=!0,c.current=F;const Y=z.touches[0];u.current=Y.clientY,h.current=Y.clientY;const W=z.currentTarget.closest(".ul-card-rank__option");W&&(d.current=W,W.classList.add("is-dragging"))},k=F=>{if(!E||!p.current||c.current===null)return;F.preventDefault(),F.stopPropagation();const z=F.touches[0];h.current=z.clientY;const Y=h.current-u.current;d.current&&(d.current.style.transform=`translateY(${Y}px)`,d.current.style.zIndex="1000"),m.current.forEach(ee=>{ee&&ee!==d.current&&ee.classList.remove("is-drop-target")});const W=T(z.clientX,z.clientY);W&&W.element.classList.add("is-drop-target")},I=F=>{if(!E||!p.current||c.current===null)return;F.preventDefault(),F.stopPropagation();const z=F.changedTouches[0],Y=T(z.clientX,z.clientY);d.current&&(d.current.style.transform="",d.current.style.zIndex="",d.current.classList.remove("is-dragging")),m.current.forEach(W=>{W&&W.classList.remove("is-drop-target")}),Y&&Y.index!==c.current&&A(c.current,Y.index),c.current=null,d.current=null,p.current=!1},A=(F,z)=>{v(Y=>{const W=Y.map(Fe=>({...Fe})),[ee]=W.splice(F,1);return W.splice(z,0,ee),W.forEach((Fe,ze)=>{Fe.rank=ze+1}),Q(),W})},$=F=>{F.preventDefault(),F.dataTransfer&&(F.dataTransfer.dropEffect="move")},L=F=>z=>{var W,ee;z.preventDefault(),z.currentTarget.classList.remove("is-drop-target");const Y=c.current;c.current=null,(ee=(W=z.currentTarget.closest(".ul-card-rank__list"))==null?void 0:W.querySelector(".is-dragging"))==null||ee.classList.remove("is-dragging"),!(Y==null||Y===F)&&A(Y,F)},D=F=>{const z={};F.reduce((Y,W)=>(Y[W.id]=W.rank,Y),z),n({value:z,questionId:o,type:i},!0)},Q=()=>{f(!1)},{left:M,right:X}=t,J=l.length,_e=F=>{F.preventDefault(),F.currentTarget.classList.add("is-drop-target")},ge=F=>{F.currentTarget.classList.remove("is-drop-target")},le=F=>{c.current=null,F.currentTarget.classList.remove("is-dragging")},pe=F=>z=>{c.current=F,z.dataTransfer&&(z.dataTransfer.effectAllowed="move",z.dataTransfer.setData("text/plain",String(F)),z.currentTarget.classList.add("is-dragging"))};return s("form",{className:O(e,"ul-card-rank","fade-in-transition"),onSubmit:y,children:s(ue,{properties:r,children:R?s(ae,{children:[s(ce,{children:s("div",{className:"ul-card--rank__question-inner-container",children:[s("div",{className:"ul-card-rank__labels",children:s("span",{children:["1 - ",M]})}),s("ol",{className:"ul-card-rank__list",children:x.map(({id:F,label:z,rank:Y})=>s("li",{className:"ul-card-rank__option",children:[s("select",{"aria-label":`Rank for ${z}`,className:O("ul-card-rank__select",Y==null&&"ul-card-rank__select--placeholder"),name:`rank[${F}]`,onChange:W=>P(F,W.currentTarget.value),value:Y??"",children:[Y==null&&s("option",{className:"ul-card-rank__select-option",disabled:!0,value:"",children:"-"}),_.map(W=>s("option",{className:"ul-card-rank__select-option",value:W,children:W},`${W}-${o}`))]}),s("span",{children:z})]},F))}),s("div",{className:"ul-card-rank__labels",children:s("span",{children:[J," - ",X]})})]})}),s(me,{children:s("div",{className:"ul-card__button-wrapper",children:s(ie,{disabled:g,children:fe(r)})})})]}):s(ae,{children:[s(ce,{children:s("div",{className:"ul-card--rank__question-inner-container",children:[s("div",{className:"ul-card-rank__labels",children:s("span",{children:["1 - ",M]})}),s("ol",{className:"ul-card-rank__list",onDragOver:R?void 0:$,children:x.map(({id:F,label:z,rank:Y},W)=>s("li",{className:"ul-card-rank__option",draggable:N?!0:void 0,onDragEnd:N?le:void 0,onDragEnter:N?_e:void 0,onDragLeave:N?ge:void 0,onDragStart:N?pe(W):void 0,onDrop:N?L(W):void 0,ref:ee=>m.current[W]=ee,children:[s("select",{"aria-label":`Rank for ${z}`,className:O("ul-card-rank__select",Y==null&&"ul-card-rank__select--placeholder"),name:`rank[${F}]`,onChange:ee=>P(F,ee.currentTarget.value),value:Y??"",children:[Y==null&&s("option",{className:"ul-card-rank__select-option",disabled:!0,value:"",children:"-"}),_.map(ee=>s("option",{className:"ul-card-rank__select-option",value:ee,children:ee},ee))]}),s("span",{children:z}),!R&&s("button",{"aria-label":`Drag ${z} to reorder`,className:"ul-card-rank__drag-btn",onTouchEnd:E?I:void 0,onTouchMove:E?k:void 0,onTouchStart:E?C(W):void 0,title:"Drag to reorder",type:"button",children:s("svg",{fill:"none",height:"17",viewBox:"0 0 16 17",width:"16",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M5.75 11.625C6.37132 11.625 6.875 12.1287 6.875 12.75C6.875 13.3713 6.37132 13.875 5.75 13.875C5.12868 13.875 4.625 13.3713 4.625 12.75C4.625 12.1287 5.12868 11.625 5.75 11.625ZM10.25 11.625C10.8713 11.625 11.375 12.1287 11.375 12.75C11.375 13.3713 10.8713 13.875 10.25 13.875C9.62868 13.875 9.125 13.3713 9.125 12.75C9.125 12.1287 9.62868 11.625 10.25 11.625ZM5.75 7.375C6.37132 7.375 6.875 7.87868 6.875 8.5C6.875 9.12132 6.37132 9.625 5.75 9.625C5.12868 9.625 4.625 9.12132 4.625 8.5C4.625 7.87868 5.12868 7.375 5.75 7.375ZM10.25 7.375C10.8713 7.375 11.375 7.87868 11.375 8.5C11.375 9.12132 10.8713 9.625 10.25 9.625C9.62868 9.625 9.125 9.12132 9.125 8.5C9.125 7.87868 9.62868 7.375 10.25 7.375ZM5.75 3.125C6.37132 3.125 6.875 3.62868 6.875 4.25C6.875 4.87132 6.37132 5.375 5.75 5.375C5.12868 5.375 4.625 4.87132 4.625 4.25C4.625 3.62868 5.12868 3.125 5.75 3.125ZM10.25 3.125C10.8713 3.125 11.375 3.62868 11.375 4.25C11.375 4.87132 10.8713 5.375 10.25 5.375C9.62868 5.375 9.125 4.87132 9.125 4.25C9.125 3.62868 9.62868 3.125 10.25 3.125Z",fill:"currentColor"})})})]},F))}),s("div",{className:"ul-card-rank__labels",children:s("span",{children:[J," - ",X]})})]})}),s(me,{children:s("div",{className:"ul-card__button-wrapper",children:s(ie,{disabled:g,children:fe(r)})})})]})})},o)},Je={RequestNeeded:1,TryAgain:2,Ready:3},jt=e=>e.type==="av_permission",oi=e=>e.type==="screen_permission",Oa=(e,t)=>!(jt(t)?t.permissionDescriptors:[]).includes("camera")||e.getVideoTracks().length>0,ii=(e,t)=>{if(e===void 0)return Je.RequestNeeded;if(e){if(!Oa(e,t))return Je.RequestNeeded}else return Je.TryAgain;return Je.Ready},si={avStream:null,currentPage:null,mediaRecordingUids:null,nextQuestion:()=>{},passthroughData:void 0,recordingMediaTypes:void 0,screenPermissionRequested:!1,type:void 0},Pe=un(e=>({...si,reset:()=>{e(si)},updatePage:t=>{e(t)}}));function Nn({currentPage:e,pages:t}){const{avStream:n,recordingMediaTypes:r,updatePage:o}=Pe.getState(),{recorderEventEmitter:i}=H.getState();i.emit("av.permission",{"permission.descriptors":e.permissionDescriptors,"stream.ready":(a,l)=>{if(n===a)return;let c=e;if(a&&!e.permissionDescriptors.includes("camera")){const u=t.indexOf(e),h=l!=null&&l.active?u+2:u+1;l!=null&&l.active&&r&&i.emit("begin.recording",{"recording.media.types":r,"start.recording.callback":d=>o({mediaRecordingUids:d})}),c=t[h]}o({currentPage:c,avStream:a})}})}function Ma({pages:e,userId:t,responseGroupUid:n,surveyId:r,questionId:o,next:i}){const{updatePage:a}=Pe.getState(),{eventEmitFn:l,recorderEventEmitter:c}=H.getState(),u={questionId:o,surveyId:r,visitorId:t,responseGroupUid:n};let h=0;c.emit("recorded.task.permission.screen"),l("recorded.task.permission.screen"),c.emit("permission.status",{"permission.status.callback":(p,m,g,f)=>{const x=e[h],{type:v}=x,_=["screen"];if(jt(x)){const{permissionDescriptors:b}=x,w=b==null?void 0:b.includes("microphone"),S=b==null?void 0:b.includes("camera");w&&_.push("audio"),S&&_.push("video");const R=(p==null?void 0:p.active)&&!S,E=(p==null?void 0:p.active)&&m;(R||E)&&h++}oi(e[h])&&g&&(h++,c.emit("begin.recording",{"recording.media.types":_,"start.recording.callback":b=>a({mediaRecordingUids:b})})),a({currentPage:e[h],avStream:p,screenPermissionRequested:g,nextQuestion:i,type:v,passthroughData:u,recordingMediaTypes:_,captureStream:f})}});const d=e[h];return d.type==="av_permission"&&Nn({currentPage:d,pages:e}),d}function Dn({status:e}){const{nextQuestion:t,passthroughData:n,mediaRecordingUids:r,reset:o}=Pe.getState(),{recorderEventEmitter:i,handleUploadUpdate:a,index:l}=H.getState(),c={value:{taskStatus:e},type:"recordedtask",questionId:(n==null?void 0:n.questionId)||1};n&&i.emit("finish.task",{"begin.callback":u=>{a({mediaRecordingUid:u,isSubmitted:!0,progressPct:0,isComplete:!1})},"progress.callback":(u,h)=>{a({mediaRecordingUid:u,progressPct:h.detail,isSubmitted:!1,isComplete:!1})},"upload.callback":u=>{u&&a({mediaRecordingUid:u,isComplete:!0,isSubmitted:!0,progressPct:100})},"passthrough.data":n,"current.index":l,"task.response":c,"task.complete.callback":u=>{c.value.taskDurationMillisecond=u,r&&(c.value.mediaRecordingUids=r),o(),t(c)}})}function jn({pages:e,setIsRequestingPermission:t}){const{recorderEventEmitter:n,eventEmitFn:r}=H.getState(),{updatePage:o,currentPage:i,recordingMediaTypes:a,screenPermissionRequested:l}=Pe.getState();if(!i)return;const c=e.indexOf(i);switch(i.type){case"av_permission":{const u=l?c+2:c+1;l&&a&&n.emit("begin.recording",{"recording.media.types":a,"start.recording.callback":h=>{o({mediaRecordingUids:h})}}),o({currentPage:e[u]});return}case"screen_permission":n.emit("screen.permission",{"screen.permission.requested":t,"stream.ready.callback":(u,h)=>{const d=h?e[c+1]:i;h&&a&&n.emit("begin.recording",{"recording.media.types":a,"start.recording.callback":p=>{o({captureStream:h,mediaRecordingUids:p})}}),o({currentPage:d,screenPermissionRequested:!0,captureStream:h})}});return;case"start_task":r("recorded.task.start"),n.emit("recorded.task.start"),n.emit("start.task"),o({currentPage:e[c+1],screenPermissionRequested:!0});return;case"complete_task":return}}const ai="ul-permission-graphics-container",li="ul-permission-body",ci=O(ai,"ul_recorded-task-inset-spacing"),At=O("ul-horizontal-button-container","ul-horizontal-button-container-left"),di=({richTextBody:e})=>s(Re,{className:"ul-rich-text-body",html:e,id:"ul-task-detail-container"}),Ot=({required:e,skipButtonText:t,bottom:n=!1})=>e?null:s(ie,{className:O(n&&"ul-skip-button-below","ul-button-inactive"),onClick:Dn.bind(null,{status:"abandoned"}),children:t||"Skip"}),An=e=>{const{avStream:t,captureStream:n,recordingMediaTypes:r,updatePage:o}=Pe.getState(),i=(r==null?void 0:r.includes("audio"))||(r==null?void 0:r.includes("video"));K(()=>{const a=setInterval(()=>{i&&t&&!t.active?o({avStream:null,currentPage:e[0]}):(!n||!n.active)&&o({captureStream:void 0,currentPage:e[i?1:0]})},1e3);return()=>clearInterval(a)},[t,n,i,e,r,o])},$a=({content:e,pages:t,required:n})=>{const{buttonText:r,skipButtonText:o,taskDetail:i}=e;return An(t),s("div",{className:"ul-task-page",children:[i&&s(di,{richTextBody:i}),s("div",{className:At,children:[s(ie,{onClick:jn.bind(null,{pages:t}),children:r}),s(Ot,{required:n,skipButtonText:o})]})]},"start-task")},Ua=({content:e,pages:t,properties:n})=>{const{buttonText:r,skipButtonText:o}=e;return An(t),s("div",{className:"ul-task-page",children:[e.taskDetail&&s(di,{richTextBody:e.taskDetail}),s(ue,{properties:n,children:s("div",{className:At,children:[s(ie,{className:"ul-complete-task-button",onClick:Dn.bind(null,{status:"completed"}),children:r}),s(ie,{className:O("ul-button-inactive"),onClick:Dn.bind(null,{status:"given.up"}),children:o})]})})]},"complete-task")},Ha=({content:e,pages:t,required:n})=>{const{buttonText:r,skipButtonText:o}=e,[i]=H(c=>[c.tabTitle]),[a,l]=q(!1);return s("div",{children:[s("div",{className:ci,children:[s("p",{style:{marginTop:"auto"},children:e.selectTabText}),s("div",{className:"ul-select-tab-container",children:s("p",{className:li,children:i})})]}),s("div",{className:n?"":At,children:[s(ie,{disabled:a,onClick:jn.bind(null,{pages:t,setIsRequestingPermission:l}),children:r}),s(Ot,{required:n,skipButtonText:o})]})]})},Fa=({content:e})=>s(Re,{className:O(ai,"ul_permission_svg_container","ul_recorded-task-inset-spacing","ul-center-horizontally"),html:e.svg},"ul-permission-request-graphic"),qa=({content:e,pages:t,required:n})=>{const{permissionDeniedHeadline:r,permissionDeniedBody:o,skipButtonText:i,tryAgainButtonText:a}=e,l=jt(t[0])?t[0]:null;return K(()=>{const c=setInterval(()=>{l!==null&&Nn({currentPage:l,pages:t})},1e3);return()=>clearInterval(c)},[l,t]),l?s("div",{children:[s("div",{className:ci,children:s("p",{className:"ul-av-permission-denied-paragraph",children:[s("span",{className:"ul-av-permission-denied-headline",children:r}),s("span",{className:li,children:o})]})}),s("div",{className:At,children:[s(ie,{onClick:Nn.bind(null,{currentPage:l,pages:t}),children:a}),s(Ot,{required:n,skipButtonText:i})]})]}):null},Ba=({stream:e})=>s("video",{autoPlay:!0,className:O("ul_recorded-task-inset-spacing"),id:"ul-record-task-video-preview",muted:!0,ref:t=>{t&&(t.srcObject=e||null)}}),Va=({content:e,pages:t,required:n})=>{const{skipButtonText:r}=e,{avStream:o}=Pe.getState();return An(t),s("div",{children:[s(Ba,{stream:o}),s("div",{className:"ul-vertical-button-container-center",children:[s(ie,{onClick:jn.bind(null,{pages:t}),children:e.buttonText}),s(Ot,{bottom:!0,required:n,skipButtonText:r})]})]})},za=({properties:e})=>{const{pages:t,required:n}=e,{avStream:r,currentPage:o}=Pe.getState();if(o===void 0)return null;switch(o==null?void 0:o.type){case"av_permission":{const i=ii(r,o);return i===Je.RequestNeeded?s(Fa,{content:o}):i===Je.TryAgain?s(qa,{content:o,pages:t,required:n}):s(Va,{content:o,pages:t,required:n})}case"screen_permission":return s(Ha,{content:o,pages:t,required:n});case"start_task":return s($a,{content:o,pages:t,required:n});case"complete_task":return s(Ua,{content:o,pages:t,properties:e});default:return null}},Qa=({className:e,properties:t,next:n,questionId:r})=>{const o=H(),{surveyId:i,responseGroupUid:a,userId:l}=o,c=Pe(),{screenPermissionRequested:u}=c,h=Pe(f=>f.avStream);let d=Pe(f=>f.currentPage);d||(d=Ma({questionId:r,surveyId:i,next:f=>{n(f,!0)},pages:t.pages,responseGroupUid:a,userId:l}));let p=d.headline,m=d.captionText;const g=ii(h,d);return oi(d)&&u&&(p=d.permissionDeniedHeadline,m=d.permissionDeniedCaptionText),jt(d)&&g===Je.Ready&&(p=d.permissionGrantedHeadline,m=d.permissionGrantedCaptionText),s("div",{className:O(e,"ul-center-horizontally","fade-in-transition"),children:[s(xe,{isRequired:t==null?void 0:t.required,message:p,properties:{captionText:m}}),s(ce,{children:s(za,{properties:t})})]})},Wa={"{{user_id}}":"externalUserId","{{email}}":"email"},Ga=e=>/^[a-zA-Z][a-zA-Z0-9+\-.]*:\/\//.test(e)?e:`http://${e}`,Za=(e,t,n)=>{let r=e;for(const[o,i]of Object.entries(Wa))if(r.toLowerCase().includes(o))if(t[i]){const a=new RegExp(o,"gi");r=r.replace(a,t[i])}else n.push(o);return r},Ya=(e,t)=>{if(!e.includes("?"))return e;const n=e.slice(0,e.indexOf("?")),o=e.slice(e.indexOf("?")+1).split("&").map(a=>a.split("=")).filter(a=>!t.includes(a[1]));if(o.length===0)return n;const i=o.map(a=>a.join("=")).join("&");return`${n}?${i}`},ui=(e=void 0,t={})=>{if(!e)return e;const n=["http:","https:","itms-apps:","market:"],r=Ga(e);if(!r)return;try{const a=new URL(r);if(!a.protocol||!n.includes(a.protocol))return}catch{return}const o=[],i=Za(r,t,o);return o.length===0?i:Ya(i,o)},Ka=({className:e,next:t,properties:n,questionId:r,type:o})=>{const{visitorAttributes:i,isLongFormSurvey:a}=H(d=>({visitorAttributes:d.visitorAttributes,isLongFormSurvey:ve(d.studyType)})),l=(d,p=!1)=>{t({value:p?{skipped:!0}:void 0,questionId:r,type:o},!0)},c=d=>{(d.key==="Enter"||d.key===" ")&&t({value:void 0,questionId:r,type:o},!0)},u=ui(n&&n.buttonUrl,i),h=a&&n.promptActionType===Pn.NO_BUTTON;return s("div",{className:O(e,"ul-card__text-url-prompt","fade-in-transition"),children:s(ue,{properties:n,children:!h&&s("div",{children:s("div",{className:"ul-card-button-group",children:[s("a",{className:"ul-card-text__button ul-card__text-url-prompt-button",href:u,id:"ul-card-text__button",onClick:l,onKeyPress:c,rel:"noreferrer",role:u?"link":"button",tabIndex:0,target:"_blank",children:fe(n)}),n.required===!1&&s("button",{className:"ul-card-skip__button",onClick:d=>l(d,!0),children:dt(n)})]})})})},r)},Ja=({className:e,questionId:t})=>{const{border:n,destroy:r,endCard:o,forceBrandedLogo:i}=H(c=>({border:c.border,destroy:c.destroy,endCard:c.endCard,forceBrandedLogo:c.forceBrandedLogo}));K(()=>{setTimeout(()=>{r(Oe)},i?4e3:2e3)},[r,i]);const a=o&&o.subheader?s("p",{className:"ul-caption",children:o.subheader}):null,l=o&&o.headline?o.headline:"";return s("div",{className:O(e,"ul-card--thanks","fade-in-transition"),children:s("div",{children:s("div",{className:"ul-card--thanks-content",children:[s("div",{className:"ul-thanks-check",children:s("svg",{"aria-labelledby":"title",fill:"none",height:"99",viewBox:"0 0 81 99",width:"81",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{clipRule:"evenodd",d:"M40.5 77C60.9345 77 77.5 60.4345 77.5 40C77.5 19.5655 60.9345 3 40.5 3C20.0655 3 3.5 19.5655 3.5 40C3.5 60.4345 20.0655 77 40.5 77ZM80.5 40C80.5 62.0914 62.5914 80 40.5 80C18.4086 80 0.5 62.0914 0.5 40C0.5 17.9086 18.4086 0 40.5 0C62.5914 0 80.5 17.9086 80.5 40Z",fill:n,fillRule:"evenodd"}),s("path",{clipRule:"evenodd",d:"M55.025 22.9046C55.6299 23.4705 55.6616 24.4198 55.0956 25.0247C54.8724 25.2634 54.6109 25.5285 54.3157 25.8277C52.2547 27.9168 48.5549 31.667 44.8135 39.6658C43.2818 42.9406 42.0864 45.8386 41.0823 48.2729C40.6539 49.3116 40.2603 50.2659 39.8902 51.129C39.287 52.5359 38.7248 53.7508 38.1744 54.625C37.8997 55.0613 37.5806 55.4905 37.2017 55.8245C36.8201 56.1607 36.2613 56.5 35.5457 56.5C34.6742 56.5 34.0892 55.9692 33.7774 55.6083C33.4502 55.2296 33.1752 54.7511 32.9396 54.301C32.7305 53.9013 32.5088 53.4367 32.2797 52.9565C32.2429 52.8794 32.2059 52.8019 32.1688 52.7243C31.8942 52.1499 31.5959 51.534 31.2537 50.8868C29.8886 48.305 27.8539 45.2878 24.2343 43.1382C23.522 42.7152 23.2875 41.7949 23.7105 41.0826C24.1335 40.3703 25.0539 40.1358 25.7662 40.5588C30.0556 43.1062 32.4149 46.6647 33.9058 49.4845C34.2776 50.1876 34.5973 50.8487 34.8753 51.4302C34.9147 51.5124 34.9529 51.5926 34.9902 51.6707C35.2222 52.1567 35.4164 52.5637 35.5978 52.9102C35.6151 52.9434 35.6321 52.9754 35.6485 53.0061C36.0565 52.3531 36.5341 51.3434 37.133 49.9468C37.4781 49.1418 37.8572 48.2229 38.2761 47.2074C39.2886 44.7532 40.5339 41.7347 42.0961 38.3948C46.0591 29.9221 50.0641 25.8648 52.1535 23.7482C52.4423 23.4556 52.6944 23.2002 52.9048 22.9753C53.4708 22.3703 54.42 22.3387 55.025 22.9046ZM35.1994 53.5892C35.1994 53.5892 35.2 53.5888 35.2012 53.5879C35.2 53.5889 35.1994 53.5893 35.1994 53.5892ZM36.0666 53.6682C36.0732 53.674 36.0765 53.6775 36.0765 53.6777C36.0765 53.678 36.0732 53.6751 36.0666 53.6682Z",fill:n,fillRule:"evenodd"}),s("path",{d:"M69.5 97C69.5 98.1046 56.2924 99 40 99C23.7076 99 10.5 98.1046 10.5 97C10.5 95.8954 23.7076 95 40 95C56.2924 95 69.5 95.8954 69.5 97Z",fill:"black",fillOpacity:"0.2"})]})}),s(xe,{message:l}),a]})})},t)},Xa=()=>s("div",{className:"thinking-dots-container",children:s("div",{className:"thinking-dot"})}),el=({className:e})=>{const{uploadProgress:t}=H(i=>({uploadProgress:i.uploadProgress}));let n,r;Object.values(t).filter(i=>i.isSubmitted).length>1?(n="Your responses are processing",r="Please keep this tab open until your responses are fully processed."):(n="Your response is processing",r="Please keep this tab open until your response is fully processed.");const o=Math.round(Math.min(99,...Object.values(t).filter(i=>i.isSubmitted).map(i=>i.progressPct||0)));return s("div",{className:O(e,"ul-card--uploading","fade-in-transition"),children:[s("div",{"aria-busy":"true","aria-label":"Processing...","aria-live":"polite",className:"ul-loading-spinner-container",role:"progressbar",children:s("div",{className:"ul-loading-spinner",children:[s("div",{className:"first"}),s("div",{className:"second"}),s("div",{className:"third"}),s("div",{className:"fourth"})]})}),s(xe,{message:`${n} (${o}% complete)`}),s("p",{className:"ul-caption",children:r})]})},tl="ul-card-video__skip_button",nl="ul-video-interview-form",rl="ul-video-btn",Mt={Question:0,Answer:1},ol=({className:e,next:t,properties:n,questionId:r,type:o})=>{const i=`ul-card-video__player_recorder-q${r}`,{apiURL:a,envId:l,handleUploadUpdate:c,headers:u,responseGroupUid:h,surveyId:d,viewDocument:p,visitorId:m}=H(y=>({apiURL:y.apiURL,envId:y.envId,handleUploadUpdate:y.handleUploadUpdate,headers:y.headers,responseGroupUid:y.responseGroupUid,surveyId:y.surveyId,viewDocument:y.viewDocument,visitorId:y.userId})),[g,f]=q(!1),[x,v]=q(null),[_,b]=q(null),[w,S]=q(Mt.Question),R=(y,P)=>{y===B.UPLOAD_STARTED?(v(P[B.UPLOAD_ID]),b(P[B.MEDIA_RECORDING_UID]),f(!0)):y===B.DELETE?(v(null),b(null),f(!1)):y===B.UPLOAD_PROGRESS?isNaN(P[B.UPLOAD_PROGRESS_PCT])?c({mediaRecordingUid:P[B.MEDIA_RECORDING_UID],isComplete:!0}):c({mediaRecordingUid:P[B.MEDIA_RECORDING_UID],progressPct:P[B.UPLOAD_PROGRESS_PCT]}):y===B.UPLOAD_FINISHED&&c({mediaRecordingUid:P[B.MEDIA_RECORDING_UID],isComplete:!0})},E=y=>{if(y&&y.children.length===0){const P=Xo(i,{surveyId:d,responseGroupUid:h,questionId:r,visitorId:m,envId:l},a,R,void 0,{...u,"x-ul-video-recorder-origin":"sdk"},n.mediaType===B.MEDIA_TYPE_AUDIO,p);y.appendChild(P)}},N=y=>{y.preventDefault(),y.stopPropagation(),document.getElementById(i)&&ei(i),x&&_?(c({mediaRecordingUid:_,isSubmitted:!0}),t({value:{mediaRecordingUid:_},questionId:r,type:o},!0)):t({value:null,questionId:r,type:o},!0)};return s("form",{className:O(e,"ul-card--video","fade-in-transition"),id:nl,children:[s(ce,{children:[s("div",{id:"ul-question-player-container",style:{display:w===Mt.Question?"":"none"},children:s(ue,{properties:n,children:s("button",{className:`${rl} ul-record-response-btn`,onClick:y=>{y.preventDefault(),y.stopPropagation(),document.getElementById(i)&&ti(i),S(Mt.Answer)}})})}),s("div",{style:{display:w===Mt.Answer?"block":"none"},children:s("div",{id:"ul-recorder-player-container",ref:E})})]}),s(me,{children:[s(Ke,{isDisabled:n.required?!g:!1,onClick:N,children:fe(n)}),s("button",{className:"ul-card-text__button ul-button-inactive ul-card-skip__button",id:tl,onClick:N,style:{...n.required?{display:"none"}:{},...g?{display:"none"}:{}},children:dt(n)})]})]})},il=1e3,pi=e=>e.type==="thanks"||e.type==="uploading",sl=e=>"properties"in e.props&&e.props.properties&&"questionHtml"in e.props.properties&&e.props.properties.questionHtml?{content:e.props.properties.questionHtml,isHtml:!0}:"message"in e.props?{content:e.props.message,isHtml:!1}:{content:"Question",isHtml:!1},al=e=>{if(!("properties"in e.props)||!e.props.properties||typeof e.props.properties!="object")return null;const t=e.props.properties,n=[{key:"captionHtml",isHtml:!0},{key:"captionText",isHtml:!1},{key:"richTextBody",isHtml:!0},{key:"body",isHtml:!1}];for(const{key:r,isHtml:o}of n){const i=t[r];if(typeof i!="string")continue;const a=i.trim();if(a&&!(o&&!a.replaceAll(/<[^>]*>/g,"").trim()))return{content:a,isHtml:o}}return null},ll=(e,t)=>{if(e.type==="open"&&t&&typeof t=="object"&&"value"in t)return t.value},cl=({viewDocument:e})=>{const t=oe(null),n=we(()=>{const r=e.querySelector(".ul-card-main-content");if(t.current&&r&&r instanceof HTMLElement){const i=t.current.offsetTop-r.offsetTop-16;r.scrollTo({top:Math.max(0,i),behavior:"smooth"})}},[]);return{currentQuestionBubbleRef:t,scrollToCurrentQuestion:n}},dl=()=>{const[e,t]=q(new Map),n=we((r,o)=>{t(i=>new Map(i).set(r,o))},[]);return{cardResponses:e,setCardResponse:n}},ul=(e,t,n)=>{const[r,o]=q(new Map);return K(()=>{if(e.length>0&&t<e.length){const i=e[t],a=`${i.name}`;if(t<=(n??0)||pi(i)){o(c=>new Map(c).set(a,!1));return}o(c=>new Map(c).set(a,!0));const l=setTimeout(()=>{o(c=>new Map(c).set(a,!1))},il);return()=>clearTimeout(l)}},[t,e,n]),r},pl=(e,t)=>{const[n,r]=q(new Set([0]));return K(()=>{r(o=>new Set(o).add(e))},[e]),K(()=>{const o=t??0;o>0&&r(i=>{const a=new Set(i);for(let l=0;l<=o;l++)a.add(l);return a})},[t]),n},hl=({card:e,avatars:t,isThinking:n,isCurrentQuestion:r,currentQuestionBubbleRef:o})=>{const i=sl(e);return s(ut,{avatars:t,isLeft:!0,message:{id:`question-${e.name}`,type:"question",content:i.content},ref:r?o:null,children:n?s(Xa,{}):s(ae,{children:[i.isHtml?s(Re,{className:"chat-message-text",html:i.content}):s("div",{className:"chat-message-text",children:i.content}),e.type==="videovoice"&&s(ka,{properties:e.props,questionId:e.name,surveyVideoUrl:e.props.properties.videoUrl})]})})},ml=({card:e,avatars:t})=>{const n=al(e);return n?s(ut,{avatars:t,hideAvatar:!0,isLeft:!0,message:{id:`caption-${e.name}`,type:"question",content:n.content},children:n.isHtml?s(Re,{className:"chat-message-text",html:n.content}):s("div",{className:"chat-message-text",children:n.content})}):null},fl=({card:e,userResponse:t,avatars:n})=>{const r=ll(e,t);return s("div",{className:"chat-bubble-container chat-right",children:[s("div",{className:"chat-bubble chat-bubble-right chat-bubble-text-only",children:s("div",{className:"chat-message-text",children:r||s("div",{className:"chat-message-no-response",children:"No response"})})}),s("img",{alt:"User Avatar",className:"chat-avatar chat-avatar-right",srcSet:`${n.respondentAvatar["1x"]} 1x, ${n.respondentAvatar["2x"]} 2x`})]})},gl=({card:e,avatars:t,isCurrentQuestion:n,currentQuestionBubbleRef:r})=>{const{endCard:o}=H(i=>({endCard:i.endCard}));return s(ae,{children:[s(ut,{avatars:t,isLeft:!0,message:{id:`thanks-${e.name}`,type:"question",content:(o==null?void 0:o.headline)??"Great! Thank you for your participation."},ref:n?r:null}),(o==null?void 0:o.subheader)&&s(ut,{avatars:t,hideAvatar:!0,isLeft:!0,message:{id:`caption-${e.name}`,type:"question",content:o.subheader}}),s(Ca,{})]})},vl=({card:e,cardIndex:t,index:n,avatars:r,cardResponses:o,questionThinkingStates:i,startingQuestionIdx:a,currentQuestionBubbleRef:l,handleCardResponse:c})=>{const u=t===n,h=t<n,d=pi(e);if(d)return s(gl,{avatars:r,card:e,currentQuestionBubbleRef:l,isCurrentQuestion:u});const p=`${e.name}`,m=o.get(p),g=e.type==="open",f=i.get(p),x=t>(a??0)&&e.type!=="thanks"&&e.type!=="uploading"&&(f===!0||f===void 0);return s(sn.Fragment,{children:[s(hl,{avatars:r,card:e,currentQuestionBubbleRef:l,isCurrentQuestion:u,isThinking:x}),!x&&s(ml,{avatars:r,card:e}),h&&g?s(fl,{avatars:r,card:e,userResponse:m}):(!h||!g)&&!x&&s(ut,{avatars:r,isLeft:!1,message:{id:`card-${e.name}`,type:"card",content:""},children:s("div",{className:"chat-card-container",children:s(_l,{card:e,className:d?"chat-thanks-card":"chat-card",isAnswered:h,next:u?c:()=>{}})})})]},`question-card-${e.name}`)},ut=sn.forwardRef(({message:e,isLeft:t=!1,children:n,avatars:r,hideAvatar:o=!1},i)=>{const a=t?"chat-bubble-left":"chat-bubble-right";return s("div",{className:`chat-bubble-container ${t?"chat-left":"chat-right"}${t&&o?" chat-no-avatar":""}`,ref:i,children:[t&&!o&&s("img",{alt:"AI Avatar",className:"chat-avatar chat-avatar-left",srcSet:`${r.agentAvatar["1x"]} 1x, ${r.agentAvatar["2x"]} 2x`}),s("div",{className:`chat-bubble ${a}`,children:n||s("div",{className:"chat-message-text",children:e.content})}),!t&&!o&&s("img",{alt:"User Avatar",className:"chat-avatar chat-avatar-right",srcSet:`${r.respondentAvatar["1x"]} 1x, ${r.respondentAvatar["2x"]} 2x`})]})});ut.displayName="ChatBubble";const bl=()=>{const e=H(r=>r.close),t=he(()=>()=>e(Oe),[e]);return s("div",{"aria-label":"Close button",className:"conversational-close-btn",onClick:t,onKeyPress:r=>{r.key==="Enter"&&t()},role:"button",tabIndex:0,children:s("svg",{fill:"none",height:"16px",viewBox:"0 0 13 13",width:"16px",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M2.54964 1.78369L1.78369 2.54964L5.73405 6.5L1.78369 10.4504L2.54964 11.2163L6.5 7.26595L10.4504 11.2163L11.2163 10.4504L7.26595 6.5L11.2163 2.54964L10.4504 1.78369L6.5 5.73405L2.54964 1.78369Z",fill:"#262136"})})})},_l=({card:e,next:t,className:n="",isAnswered:r=!1})=>{const o=()=>{},i={className:r?`${n} answered-card`:n,next:r?o:t,questionId:e.name,type:e.type,isAnswered:r};switch(e.type){case"consentlegal":return s(wa,{...i,...e.props});case"likert":return s(Ta,{...i,...e.props});case"matrix":return s(Ia,{...i,...e.props});case"multiplechoice":return s(Pa,{...i,...e.props});case"multipleselect":return s(Na,{...i,...e.props});case"nps":return s(Da,{...i,...e.props});case"open":return s(ja,{...i,...e.props});case"rankorder":return s(Aa,{...i,...e.props});case"recordedtask":return s(Qa,{...i,...e.props});case"texturlprompt":return s(Ka,{...i,...e.props});case"thanks":return s(Ja,{...i,...e.props});case"uploading":return s(el,{...i,...e.props});case"videovoice":return s(ol,{...i,...e.props});default:return null}},xl=Object.freeze(Object.defineProperty({__proto__:null,default:({cards:e,next:t,previousResponses:n})=>{const{cardResponses:r,setCardResponse:o}=dl(),{index:i,isLongFormSurvey:a,avatars:l,startingQuestionIdx:c,viewDocument:u,update:h}=H(b=>({index:b.index,isLongFormSurvey:ve(b.studyType),avatars:b.avatars,startingQuestionIdx:b.startingQuestionIdx,viewDocument:b.viewDocument,update:b.update})),{currentQuestionBubbleRef:d,scrollToCurrentQuestion:p}=cl({viewDocument:u}),m=ul(e,i,c),g=pl(i,c),f=he(()=>({...n,...kn(e.map((b,w)=>{var S,R;return{...b,value:w<i?((S=r.get(`${b.name}`))==null?void 0:S.value)??null:null,secondaryValue:w<i?((R=r.get(`${b.name}`))==null?void 0:R.secondaryValue)??null:null}}))}),[n,r,e,i]),x=Do(e,f);K(()=>{requestAnimationFrame(()=>{p()}),h()},[i,p,m,h]);const v=we((b,w)=>{if(!w)return;const S=x[i];if(!S)return;const R=`${S.name}`;o(R,b);const E={...b,questionText:wn(S)};t([E])},[x,i,t,o]),_=x.map((b,w)=>({card:b,cardIndex:w})).filter(({cardIndex:b})=>g.has(b));return s("div",{className:"conversational-ui ul-conversational-ui","data-testid":"ui-container",children:[!a&&s(bl,{}),s("div",{className:"chat-container",children:s("div",{className:"chat-messages",children:_.map(({card:b,cardIndex:w})=>s(vl,{avatars:l,card:b,cardIndex:w,cardResponses:r,currentQuestionBubbleRef:d,handleCardResponse:v,index:i,questionThinkingStates:m,startingQuestionIdx:c},`question-card-${b.name}`))})})]})}},Symbol.toStringTag,{value:"Module"})),yl=({className:e,message:t,next:n,properties:r,questionId:o,type:i})=>{const{useMobileStyling:a,border:l,isLongFormSurvey:c,focusedQuestionId:u}=H(T=>({useMobileStyling:T.useMobileStyling,border:T.border,isLongFormSurvey:ve(T.studyType),focusedQuestionId:T.focusedQuestionId})),[h,d]=q(!1),[p,m]=q(""),[g,f]=q(!1),x=c&&u===o,v=r==null?void 0:r.collectName,_=(r==null?void 0:r.nameLabelText)||"Full Name",b=(r==null?void 0:r.consentText)||"I agree to the stated conditions",w=(r==null?void 0:r.submitButtonText)||"Submit",S=!!p.trim(),R=h&&(!v||S),E=(T,C=!1)=>{T.preventDefault(),T.stopPropagation();let k=null;if(!C){if(!R){f(!0);return}k={submitted:!0},v&&(k.name=p)}n({value:k,questionId:o,type:i},R)},N=T=>{T.preventDefault(),T.stopPropagation(),m(T.currentTarget.value)},y=T=>{T.currentTarget.style.borderColor=g&&!S?Be:l},P=T=>{T.currentTarget.style.borderColor=g&&!S?Be:at};return s("div",{className:O(e,c&&!x&&"ul-card--unfocused","ul-card__consent-legal","fade-in-transition"),children:[s(xe,{isRequired:c&&(r==null?void 0:r.required),message:t,properties:{questionHtml:r.questionHtml}}),r!=null&&r.richTextBody?s(ce,{children:s(Re,{className:"ul-rich-text-body",html:r.richTextBody,id:"ul-card__consent-legal-body-container"})}):null,s(ue,{embeddedType:"pdf",properties:r,children:s(me,{children:[s("div",{className:"sprig-stretch",children:[s($e,{allowTextEntry:!1,border:l,error:g&&!h,id:"consent",isRadio:!1,isSelected:h,label:b,onUserInputChanged:({selected:T})=>{T!==h&&d(!h)},useMobileStyling:a}),v&&s("input",{"aria-label":_,"aria-placeholder":_,className:O(ne("ul-consent-legal__name-input",a)),"data-gramm":"false",maxLength:250,name:"name",onBlur:P,onFocus:y,onInput:N,placeholder:_,style:g&&!S?{borderColor:Be}:{},tabIndex:0,value:p})]}),s("div",{className:"ul-card__button-wrapper ul-card-vertical__button-wrapper",children:[s(ie,{className:R?"":"sprig-button-disabled",onClick:E,children:w}),r.required===!1&&!c&&s("button",{className:"ul-card-skip__button",onClick:T=>E(T,!0),children:dt(r)})]})]})})]},o)},kl=({icon:e,scaleLabelType:t,value:n,selectedValue:r})=>{if(t==="smiley"&&n===r){let o=0;return e.replace(/black/g,()=>++o===1?"black":"white")}return e},wl=({activeValue:e,border:t,icon:n,isPressed:r,onSubmit:o,range:i,scaleLabelType:a,selectedValue:l,setSelectedValue:c,setActiveValue:u,setIsPressed:h,useMobileStyling:d,value:p,viewDocument:m})=>{const{isLongFormSurvey:g,enableCspTrustedTypes:f}=H(T=>({isLongFormSurvey:ve(T.studyType),enableCspTrustedTypes:T.enableCspTrustedTypes})),x=`option-${p}`,v=a==="number",_=a==="star",b=a==="smiley",w=v&&p===e||p===l,[S,R]=(()=>{const T=_&&p<=e||b&&p===e,C=_&&l!==null&&p<=l;return T||C||p===e||p===l?[t,r||C||p===l?1:.3]:["",1]})(),E=()=>{switch(a){case"star":return O(ne("likert-star",d),ne(`likert-star-${p}`,d));case"smiley":return O(ne("likert-smiley",d),ne(`likert-smiley-${p}`,d));default:return p===i?O(ne("likert-number",d),ne(`likert-number-${p}`,d),ne("likert-last-option",d)):O(ne("likert-number",d),ne(`likert-number-${p}`,d))}},N=()=>{u(-1),h(!1)},y=he(()=>{const T={borderColor:w?S:"",fillOpacity:w?"":R,zIndex:w?3:"auto",color:l===p?"#fff":""};return v?{...T,backgroundColor:l===p?S:""}:{...T,color:_||b||l===p?S:""}},[w,S,R,l,p,v,_,b]),P=he(()=>Rt(kl({icon:n,scaleLabelType:a,value:p,selectedValue:l}),f),[f,n,a,l,p]);return s("button",{"aria-label":v?void 0:String(p),className:E(),dangerouslySetInnerHTML:{__html:P},id:x,onClick:T=>{g&&(T.preventDefault(),T.stopPropagation(),c(p)),o()},onKeyDown:T=>{var I,A;const C=m.querySelectorAll(`.likert-${a??"number"}`),k=p-1;T.key==="ArrowRight"?(I=C[k+1])==null||I.focus():T.key==="ArrowLeft"?(A=C[k-1])==null||A.focus():(T.key==="Enter"||T.key===" ")&&(g&&(T.preventDefault(),T.stopPropagation(),c(p)),o())},onPointerDown:()=>h(!0),onPointerEnter:()=>u(p),onPointerLeave:N,style:y,tabIndex:0})},Cl=({className:e,labels:t,message:n,next:r,properties:o,questionId:i,type:a})=>{const{border:l,useMobileStyling:c,viewDocument:u,isLongFormSurvey:h,focusedQuestionId:d}=H(C=>({border:C.border,useMobileStyling:C.useMobileStyling,viewDocument:C.viewDocument,isLongFormSurvey:ve(C.studyType),focusedQuestionId:C.focusedQuestionId})),[p,m]=q(-1),[g,f]=q(!1),[x,v]=q(null),_=h&&d===i,b=t&&t.left,w=t&&t.right;let S;const{range:R,scaleLabelType:E,ratingIcons:N}=o;R&&(S=Number(R));const y=S||5,P=C=>{var k,I;switch(E){case"star":return(k=N[0])==null?void 0:k.svg;case"smiley":return(I=N[C])==null?void 0:I.svg;default:return String(C+1)}},T=C=>{C.preventDefault(),C.stopPropagation(),r({value:null,questionId:i,type:a},!0)};return s("form",{className:O(e,"ul-card--likert","fade-in-transition",h&&!_&&"ul-card--unfocused"),children:[s(xe,{isRequired:h&&(o==null?void 0:o.required),message:n,properties:o}),s(ue,{properties:o,children:s(ae,{children:[s(ce,{children:[s("div",{"aria-label":`Rating (1 - ${y})`,className:"ul-card--likert__numbers",role:"radiogroup",children:[...Array(y)].map((C,k)=>{const I=k+1;return s(wl,{activeValue:p,border:l,icon:P(k),isPressed:g,onSubmit:()=>r({value:I,questionId:i,type:a},!0),range:y,scaleLabelType:E,selectedValue:x,setActiveValue:m,setIsPressed:f,setSelectedValue:v,useMobileStyling:c,value:I,viewDocument:u},k)})}),s("div",{className:"ul-card--likert__labels",children:[s("span",{children:b}),s("span",{children:w})]})]}),!o.required&&!h&&s(me,{children:s("div",{className:"ul-vertical-centered-container",children:s(ie,{onClick:T,children:fe(o)})})})]})})]},i)},hi=e=>!e||e.scrollHeight>e.offsetHeight?e:hi(e.parentElement),Sl=e=>e instanceof HTMLElement,El=e=>{if(!e||!Sl(e))return 0;const t=getComputedStyle(e),n=parseFloat(t.marginTop)+parseFloat(t.marginBottom),r=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth);return n+r},Tl=({columns:e,onSelect:t,options:n,selectedOptions:r})=>{const o=oe([]),{border:i,useMobileStyling:a}=H(p=>({border:p.border,useMobileStyling:p.useMobileStyling})),l=n.findIndex(p=>r[p.id]===null),[c,u]=q(l),h=we((p,m)=>{t(p,m);const g=c+1,f=n[g];if(f&&r[f.id]===null){u(g);const x=o.current[c];if(x!=null&&x.firstElementChild){const v=hi(x),_=x.firstElementChild,b=El(x)+_.clientHeight;v==null||v.scrollTo(0,x.offsetTop+b)}}},[t,n,r,c]),d=we((p,m)=>{const g=c===p;return s(bo,{animate:!0,header:m.label,isOpen:g,onClick:()=>{var f;return u(g&&!((f=window.UserLeap)!=null&&f.isMobileSDK)?-1:p)},ref:f=>{f&&(o.current[p]=f)},showHeaderCheck:r[m.id]!==null,children:s("div",{style:{paddingTop:"12px"},children:e.map(f=>s($e,{allowTextEntry:!1,ariaLabel:`${m.label}-${f.label}`,border:i,error:!1,id:`${m.id}-${f.value}`,isRadio:!0,isSelected:r[m.id]===f.value,label:f.label,onUserInputChanged:()=>h(m.id,f.value),useMobileStyling:a},f.label))})},m.id)},[i,e,c,h,r,a]);return s("div",{children:n.map((p,m)=>d(m,p))})},Rl=({columns:e,onSelect:t,options:n,selectedOptions:r})=>{const{border:o,useMobileStyling:i,isLongFormSurvey:a}=H(v=>({border:v.border,useMobileStyling:v.useMobileStyling,isLongFormSurvey:ve(v.studyType)})),l=n.length,c=e.length,u=oe(null),[h,d]=q(!1),[p,m]=q(!1),g=()=>{const v=u.current;v&&d(v.clientWidth+Math.abs(v.scrollLeft)<v.scrollWidth)};K(()=>{const v=u.current,_=new ResizeObserver(b=>{window.requestAnimationFrame(()=>{v&&(d(Math.round(b[0].contentRect.width)<v.scrollWidth),m(Math.round(b[0].contentRect.width)<v.scrollWidth))})});return v&&_.observe(v),()=>{v&&_.unobserve(v)}},[]);const f=v=>{v.preventDefault();const _=u.current;if(_){const b=getComputedStyle(_).direction==="rtl";_.scrollTo({left:b?_.clientWidth-_.scrollWidth:_.scrollWidth,behavior:"smooth"})}},x=v=>{v.preventDefault();const _=u.current;if(_){const b=getComputedStyle(_).direction==="rtl";_.scrollTo({left:b?_.scrollWidth-_.clientWidth:0,behavior:"smooth"})}};return s("div",{className:"ul-card--matrix_question_container",children:[s("div",{className:O("ul-card--matrix_container",h&&"ul-matrix-scroll-gradient"),onScroll:()=>{g()},ref:u,children:s("div",{className:O(a&&"ul-card--matrix_grid_longform","ul-card--matrix_grid"),style:`--numColumns: ${c}; --numRows: ${l+1};`,children:[s("div",{})," ",e.map(v=>s("div",{className:"ul-matrix-column-label",children:v.label},v.label)),n.map(v=>s(ae,{children:[s("div",{"aria-label":v.label,className:"ul-matrix-row-label",children:v.label},v.label),s("div",{className:"ul-matrix-row-options",role:"radiogroup",children:e.map((_,b)=>{const w=b===c-1;return s("div",{className:O("ul-matrix-option-wrapper",w&&"ul-matrix-last-option"),children:s($e,{allowTextEntry:!1,ariaLabel:`${v.label}-${_.label}`,border:o,choiceStyle:{background:"transparent",border:"none",marginBottom:"0",padding:"0"},error:!1,id:`${v.id}-${_.value}`,isRadio:!0,isSelected:r[v.id]===_.value,onUserInputChanged:()=>t(v.id,_.value),useMobileStyling:i})},_.value)})})]}))]})}),(h||p)&&s("button",{className:p&&!h?"ul-matrix-scroll-arrow left":"ul-matrix-scroll-arrow",onClick:p&&!h?x:f,children:p&&!h?s(Il,{}):s(Ll,{})})]})},Il=()=>s("svg",{fill:"currentColor",height:"32",transform:"matrix(-1,0,0,1,0,0)",version:"1.1",viewBox:"0 0 256 256",width:"32",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M221.66,133.66l-72,72a8,8,0,0,1-11.32-11.32L196.69,136H40a8,8,0,0,1,0-16H196.69L138.34,61.66a8,8,0,0,1,11.32-11.32l72,72A8,8,0,0,1,221.66,133.66Z"})}),Ll=()=>s("svg",{fill:"currentColor",height:"32",viewBox:"0 0 256 256",width:"32",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M221.66,133.66l-72,72a8,8,0,0,1-11.32-11.32L196.69,136H40a8,8,0,0,1,0-16H196.69L138.34,61.66a8,8,0,0,1,11.32-11.32l72,72A8,8,0,0,1,221.66,133.66Z"})}),Pl=({className:e,message:t,next:n,options:r,properties:o,questionId:i,type:a,showIndividualSubmit:l=!1,onSubmitButtonClick:c})=>{const{useMobileStyling:u,isLongFormSurvey:h,focusedQuestionId:d,setFocusedQuestionId:p}=H(N=>({useMobileStyling:N.useMobileStyling,isLongFormSurvey:ve(N.studyType),focusedQuestionId:N.focusedQuestionId,setFocusedQuestionId:N.setFocusedQuestionId})),m=o.matrixColumn,g=o.required,f=h&&d===i,x=()=>{f&&p(i)},v=N=>{N.preventDefault(),N.stopPropagation(),n({value:b,questionId:i,type:a},!0),c&&c()},_=r.reduce((N,y)=>(N[y.id]=null,N),{}),[b,w]=q(_),S=N=>g&&Object.values(N).every(y=>y==null),R=(N,y)=>{h&&n({value:{...b,[N]:y},questionId:i,type:a},!S({...b,[N]:y})),w(P=>({...P,[N]:y}))},E=o.displayMatrixAsAccordion||u;return s("form",{className:O(e,!h&&"ul-card__matrix","fade-in-transition",h&&!f&&"ul-card--unfocused"),id:"text-form",onClick:x,onSubmit:v,children:[s(xe,{isRequired:h&&(o==null?void 0:o.required),message:t,properties:o}),s(ue,{properties:o,children:[s(ce,{children:[E?s(Tl,{columns:m,onSelect:R,options:r,selectedOptions:b}):s(Rl,{columns:m,onSelect:R,options:r,selectedOptions:b}),l&&s(ct,{handleSubmit:v,isSubmitDisabled:S(b)})]}),!h&&s(me,{children:s("div",{className:"ul-card__button-wrapper",children:s(ie,{disabled:S(b),children:fe(o)})})})]})]},i)},mi=({className:e,message:t,onSubmit:n,options:r=[],properties:o,questionId:i,type:a,showIndividualSubmit:l=!1,onSubmitButtonClick:c})=>{const{border:u,useMobileStyling:h,isLongFormSurvey:d,focusedQuestionId:p,setFocusedQuestionId:m}=H(D=>({border:D.border,useMobileStyling:D.useMobileStyling,isLongFormSurvey:ve(D.studyType),focusedQuestionId:D.focusedQuestionId,setFocusedQuestionId:D.setFocusedQuestionId})),g=d&&p===i,f=()=>{d&&p!==i&&a==="multipleselect"&&m(i)},x=r.reduce((D,Q)=>(D[Q.id]={isSelected:!1},D),{}),[v,_]=q(x),b=a==="multiplechoice",w=o.required,S=r.find(D=>{var Q;return(Q=D.optionProperties)==null?void 0:Q.noneOfTheAbove}),R=D=>Object.entries(D).some(([Q,M])=>{var _e;const X=r.find(ge=>`${ge.id}`===Q),J=M.userText===void 0||M.userText.trim()==="";return((_e=X==null?void 0:X.optionProperties)==null?void 0:_e.allowsTextEntry)&&J&&M.isSelected}),E=D=>Object.values(D).filter(Q=>Q.isSelected).length,N=D=>{const{minSelect:Q=0,maxSelect:M=1/0,maxSelectMode:X}=o,J=E(D);switch(X){case He.Maximum:return J<=M;case He.Range:return J!==0?J>=Q:!0;default:return!0}},y=o.minSelect&&o.minSelect>0&&o.maxSelectMode===He.Range&&E(v)<o.minSelect&&(w||E(v)>0),P=D=>R(D)||w&&!E(D)||!N(D),T=D=>R(D),C=Object.entries(v).some(([D,Q])=>{var M,X;return Q.isSelected&&((X=(M=r.find(J=>`${J.id}`===D))==null?void 0:M.optionProperties)==null?void 0:X.allowsTextEntry)}),k=l&&(!b||C),I=D=>{L(D.id,D.selected,D.userText,D.noneOfTheAbove),D.selected&&d&&!b&&!g&&m(i)},A=D=>{var Q;return(o==null?void 0:o.maxSelectMode)!==He.Unlimited&&E(v)===(o==null?void 0:o.maxSelect)&&!((Q=v[D])!=null&&Q.isSelected)},$=D=>{D.preventDefault(),D.stopPropagation(),n(v,!0),c&&c()},L=(D,Q,M,X)=>{const J=Object.assign({},v);if((b||X)&&Q)for(const le of Object.values(J))le.isSelected=!1,delete le.userText;else S&&!X&&v[S.id].isSelected&&(J[S.id].isSelected=!1);J[D]={isSelected:Q,userText:M};const _e=b&&Object.entries(J).some(([le,pe])=>{var F,z;return pe.isSelected&&((z=(F=r.find(Y=>`${Y.id}`===le))==null?void 0:F.optionProperties)==null?void 0:z.allowsTextEntry)}),ge=!P(J);d&&(n(J,ge),b&&!_e&&ge&&c&&c()),_(J)};return s("form",{className:O(e,"ul-card--multiple","fade-in-transition",d&&!g&&"ul-card--unfocused"),id:"text-form",onClick:a==="multipleselect"?f:void 0,onSubmit:$,children:[s(xe,{isRequired:d&&(o==null?void 0:o.required),message:t,properties:o}),s(ue,{properties:o,children:s(ae,{children:[s(ce,{children:[o.isDropdown?s(ni,{disabledOptions:r.filter(D=>A(D.id)),dropdownFooter:y?s("div",{className:"ul-card__min-select-counter",style:{marginLeft:"16px"},children:[E(v),"/",o.minSelect]}):void 0,isMultiSelect:!b,multiselectText:o.dropdownMultiselectedText??"choices selected",onChange:D=>{const Q={...v};for(const M of r)D.includes(M)?Q[M.id].isSelected=!0:Q[M.id].isSelected=!1;d&&n(Q,!P(Q)),_(Q)},options:r,placeholderText:o.dropdownPlaceholderText??(b?"Select choice":"Select choice(s)"),value:r.filter(D=>v[D.id].isSelected)}):s("div",{className:O(ne("ul-card__choices",h)),role:b?"radiogroup":"group",children:[r.map(({id:D,label:Q,value:M,optionProperties:X})=>{var le,pe;const J=`${D}`,{allowsTextEntry:_e,noneOfTheAbove:ge}={allowsTextEntry:!1,noneOfTheAbove:!1,...X};return s($e,{allowTextEntry:_e,border:u,disabled:A(J),error:T(v),id:J,isRadio:b,isSelected:!!((le=v[J])!=null&&le.isSelected),label:Q,noneOfTheAbove:ge,onUserInputChanged:I,promptText:"Please specify",text:(pe=v[D])==null?void 0:pe.userText,useMobileStyling:h,value:M},J)}),!!y&&s("div",{className:"ul-card__min-select-counter",children:[E(v),"/",o.minSelect]})]}),k&&s(ct,{handleSubmit:$,isSubmitDisabled:P(v)})]}),!d&&s(me,{children:s("div",{className:"ul-card__button-wrapper",children:s(ie,{disabled:P(v),onClick:$,children:fe(o)})})})]})})]},i)},Nl=e=>{const{questionId:t,type:n,next:r,options:o}=e,{setFocusedQuestionId:i}=H(l=>({setFocusedQuestionId:l.setFocusedQuestionId}));return s(mi,{...e,onSubmit:(l,c)=>{var g;const u=Object.entries(l).find(([,f])=>f.isSelected)||[void 0,void 0],[h,d]=u,p=o.find(f=>`${f.id}`===h);(g=p==null?void 0:p.optionProperties)!=null&&g.allowsTextEntry&&(!(d!=null&&d.userText)||d.userText.trim()==="")&&i(t);const m=d!=null&&d.userText?{[h]:{userText:d.userText}}:null;r({value:p&&h?{[h]:p.value}:{},secondaryValue:m,questionId:t,type:n},c)}})},Dl=e=>{const{questionId:t,type:n,next:r}=e;return s(mi,{...e,onSubmit:(i,a)=>{const l={},c=Object.entries(i).reduce((h,[d,p])=>(h[d]=p.isSelected,h),l),u=Object.entries(i).reduce((h,[d,p])=>{if(!p.userText)return h;const m=h||{};return m[d]={userText:p.userText},m},null);r({value:c,secondaryValue:u,questionId:t,type:n},a)}})},jl=({className:e,labels:t,message:n,properties:r,next:o,questionId:i,type:a})=>{const[l,c]=q(null),{border:u,useMobileStyling:h,viewDocument:d,isLongFormSurvey:p,focusedQuestionId:m}=H(_=>({border:_.border,useMobileStyling:_.useMobileStyling,viewDocument:_.viewDocument,isLongFormSurvey:ve(_.studyType),focusedQuestionId:_.focusedQuestionId})),g=p&&m===i,f=t&&t.left,x=t&&t.right,v=_=>{_.preventDefault(),_.stopPropagation(),o({value:null,questionId:i,type:a},!0)};return s("form",{className:O(e,"ul-card--nps","fade-in-transition",p&&!g&&"ul-card--unfocused"),children:[s(xe,{isRequired:p&&(r==null?void 0:r.required),message:n,properties:r}),s(ue,{properties:r,children:[s(ce,{children:[s("div",{className:"ul-card--nps__numbers",children:[...Array(11)].map((_,b)=>s("button",{className:O(ne("nps-number",h),ne(`nps-number-${b}`,h)),id:`option-${b}`,onClick:w=>{p&&(w.preventDefault(),w.stopPropagation(),c(b)),o({value:b,questionId:i,type:a},!0)},onKeyDown:w=>{var R,E;const S=d.querySelectorAll("button.nps-number");w.key==="ArrowRight"?(R=S[b+1])==null||R.focus():w.key==="ArrowLeft"?(E=S[b-1])==null||E.focus():(w.key==="Enter"||w.key===" ")&&(p&&(w.preventDefault(),w.stopPropagation(),c(b)),o({value:b,questionId:i,type:a},!0))},onPointerDown:w=>{w.currentTarget.style.zIndex="2",w.currentTarget.style.borderColor=u},onPointerLeave:w=>{w.currentTarget.style.zIndex="auto",w.currentTarget.style.borderColor=at},style:l===b?{backgroundColor:u,color:"#fff"}:void 0,tabIndex:0,children:b},b))}),s("div",{className:"ul-card--nps__labels",children:[s("span",{children:f}),s("span",{children:x})]})]}),!r.required&&!p&&s(me,{children:s("div",{className:"ul-vertical-centered-container",children:s(ie,{onClick:v,children:fe(r)})})})]})]},i)},Al=({className:e,message:t,next:n,properties:r,questionId:o,type:i,showIndividualSubmit:a=!1,onSubmitButtonClick:l})=>{const{border:c,useMobileStyling:u,update:h,isLongFormSurvey:d,focusedQuestionId:p,setFocusedQuestionId:m,isPreview:g}=H(C=>({border:C.border,useMobileStyling:C.useMobileStyling,update:C.update,isLongFormSurvey:ve(C.studyType),focusedQuestionId:C.focusedQuestionId,setFocusedQuestionId:C.setFocusedQuestionId,isPreview:C.isPreview})),[f,x]=q(""),v=oe(null),_=d&&p===o,b=()=>{d&&p!==o&&m(o)};K(()=>{var C,k;d&&!g&&(_?(C=v.current)==null||C.focus():(k=v.current)==null||k.blur())},[d,_,g]);const w=f.trim(),S=r.required===!0&&!w,R=_n(v,()=>h()),E=C=>{const{value:k}=C.currentTarget;if(R(),C.preventDefault(),C.stopPropagation(),x(k),d){const I=k.trim().length>0;n({value:k,questionId:o,type:i},I)}},N=C=>{C.preventDefault(),C.stopPropagation(),n({value:f,questionId:o,type:i},!r.required||w.length>0),l&&l()},y=r&&r.openTextPlaceholder?r.openTextPlaceholder:"",P=C=>{C.currentTarget.style.borderColor=c,m(o)},T=C=>{C.currentTarget.style.borderColor=at};return s("form",{className:O(e,"ul-card-text","fade-in-transition",d&&!_&&"ul-card--unfocused"),id:"text-form",onClick:b,children:[s(xe,{isRequired:d&&(r==null?void 0:r.required),message:t,properties:r}),s(ue,{properties:r,children:s("div",{className:"ul-card-text",children:s(ce,{children:[s("div",{className:"ul-card-text__container",children:s("textarea",{"aria-describedby":"ul-caption","aria-labelledby":"ul-question","aria-multiline":"true","aria-placeholder":y,className:O(ne("ul-card-text__input",u)),"data-gramm":"false",maxLength:5e3,name:"text",onBlur:T,onChange:E,onFocus:P,placeholder:y,ref:v,role:"textbox",tabIndex:0})}),r.footerHtml&&s(Re,{className:"footer",html:r.footerHtml}),a&&s(ct,{handleSubmit:N,isSubmitDisabled:S}),s(me,{children:!d&&s(ie,{disabled:S,onClick:N,children:fe(r)})})]})})})]},o)},Xe={RequestNeeded:1,TryAgain:2,Ready:3},$t=e=>e.type==="av_permission",fi=e=>e.type==="screen_permission",Ol=(e,t)=>!($t(t)?t.permissionDescriptors:[]).includes("camera")||e.getVideoTracks().length>0,gi=(e,t)=>{if(e===void 0)return Xe.RequestNeeded;if(e){if(!Ol(e,t))return Xe.RequestNeeded}else return Xe.TryAgain;return Xe.Ready},vi={avStream:null,currentPage:null,mediaRecordingUids:null,nextQuestion:()=>{},passthroughData:void 0,recordingMediaTypes:void 0,screenPermissionRequested:!1,type:void 0},Ne=un(e=>({...vi,reset:()=>{e(vi)},updatePage:t=>{e(t)}}));function On({currentPage:e,pages:t}){const{avStream:n,recordingMediaTypes:r,updatePage:o}=Ne.getState(),{recorderEventEmitter:i}=H.getState();i.emit("av.permission",{"permission.descriptors":e.permissionDescriptors,"stream.ready":(a,l)=>{if(n===a)return;let c=e;if(a&&!e.permissionDescriptors.includes("camera")){const u=t.indexOf(e),h=l!=null&&l.active?u+2:u+1;l!=null&&l.active&&r&&i.emit("begin.recording",{"recording.media.types":r,"start.recording.callback":d=>o({mediaRecordingUids:d})}),c=t[h]}o({currentPage:c,avStream:a})}})}function Ml({pages:e,userId:t,responseGroupUid:n,surveyId:r,questionId:o,next:i}){const{updatePage:a}=Ne.getState(),{eventEmitFn:l,recorderEventEmitter:c}=H.getState(),u={questionId:o,surveyId:r,visitorId:t,responseGroupUid:n};let h=0;c.emit("recorded.task.permission.screen"),l("recorded.task.permission.screen"),c.emit("permission.status",{"permission.status.callback":(p,m,g,f)=>{const x=e[h],{type:v}=x,_=["screen"];if($t(x)){const{permissionDescriptors:b}=x,w=b==null?void 0:b.includes("microphone"),S=b==null?void 0:b.includes("camera");w&&_.push("audio"),S&&_.push("video");const R=(p==null?void 0:p.active)&&!S,E=(p==null?void 0:p.active)&&m;(R||E)&&h++}fi(e[h])&&g&&(h++,c.emit("begin.recording",{"recording.media.types":_,"start.recording.callback":b=>a({mediaRecordingUids:b})})),a({currentPage:e[h],avStream:p,screenPermissionRequested:g,nextQuestion:i,type:v,passthroughData:u,recordingMediaTypes:_,captureStream:f})}});const d=e[h];return d.type==="av_permission"&&On({currentPage:d,pages:e}),d}function Mn({status:e}){const{nextQuestion:t,passthroughData:n,mediaRecordingUids:r,reset:o}=Ne.getState(),{recorderEventEmitter:i,handleUploadUpdate:a,index:l}=H.getState(),c={value:{taskStatus:e},type:"recordedtask",questionId:(n==null?void 0:n.questionId)||1};n&&i.emit("finish.task",{"begin.callback":u=>{a({mediaRecordingUid:u,isSubmitted:!0,progressPct:0,isComplete:!1})},"progress.callback":(u,h)=>{a({mediaRecordingUid:u,progressPct:h.detail,isSubmitted:!1,isComplete:!1})},"upload.callback":u=>{u&&a({mediaRecordingUid:u,isComplete:!0,isSubmitted:!0,progressPct:100})},"passthrough.data":n,"current.index":l,"task.response":c,"task.complete.callback":u=>{c.value.taskDurationMillisecond=u,r&&(c.value.mediaRecordingUids=r),o(),t(c)}})}function $n({pages:e,setIsRequestingPermission:t}){const{recorderEventEmitter:n,eventEmitFn:r}=H.getState(),{updatePage:o,currentPage:i,recordingMediaTypes:a,screenPermissionRequested:l}=Ne.getState();if(!i)return;const c=e.indexOf(i);switch(i.type){case"av_permission":{const u=l?c+2:c+1;l&&a&&n.emit("begin.recording",{"recording.media.types":a,"start.recording.callback":h=>{o({mediaRecordingUids:h})}}),o({currentPage:e[u]});return}case"screen_permission":n.emit("screen.permission",{"screen.permission.requested":t,"stream.ready.callback":(u,h)=>{const d=h?e[c+1]:i;h&&a&&n.emit("begin.recording",{"recording.media.types":a,"start.recording.callback":p=>{o({captureStream:h,mediaRecordingUids:p})}}),o({currentPage:d,screenPermissionRequested:!0,captureStream:h})}});return;case"start_task":r("recorded.task.start"),n.emit("recorded.task.start"),n.emit("start.task"),o({currentPage:e[c+1],screenPermissionRequested:!0});return;case"complete_task":return}}const bi="ul-permission-graphics-container",_i="ul-permission-body",xi=O(bi,"ul_recorded-task-inset-spacing"),Ut=O("ul-horizontal-button-container","ul-horizontal-button-container-left"),yi=({richTextBody:e})=>s(Re,{className:"ul-rich-text-body",html:e,id:"ul-task-detail-container"}),Ht=({required:e,skipButtonText:t,bottom:n=!1})=>e?null:s(ie,{className:O(n&&"ul-skip-button-below","ul-button-inactive"),onClick:Mn.bind(null,{status:"abandoned"}),children:t||"Skip"}),Un=e=>{const{avStream:t,captureStream:n,recordingMediaTypes:r,updatePage:o}=Ne.getState(),i=(r==null?void 0:r.includes("audio"))||(r==null?void 0:r.includes("video"));K(()=>{const a=setInterval(()=>{i&&t&&!t.active?o({avStream:null,currentPage:e[0]}):(!n||!n.active)&&o({captureStream:void 0,currentPage:e[i?1:0]})},1e3);return()=>clearInterval(a)},[t,n,i,e,r,o])},$l=({content:e,pages:t,required:n})=>{const{buttonText:r,skipButtonText:o,taskDetail:i}=e;return Un(t),s("div",{className:"ul-task-page",children:[i&&s(yi,{richTextBody:i}),s("div",{className:Ut,children:[s(ie,{onClick:$n.bind(null,{pages:t}),children:r}),s(Ht,{required:n,skipButtonText:o})]})]},"start-task")},Ul=({content:e,pages:t,properties:n})=>{const{buttonText:r,skipButtonText:o}=e;return Un(t),s("div",{className:"ul-task-page",children:[e.taskDetail&&s(yi,{richTextBody:e.taskDetail}),s(ue,{properties:n,children:s("div",{className:Ut,children:[s(ie,{className:"ul-complete-task-button",onClick:Mn.bind(null,{status:"completed"}),children:r}),s(ie,{className:O("ul-button-inactive"),onClick:Mn.bind(null,{status:"given.up"}),children:o})]})})]},"complete-task")},Hl=({content:e,pages:t,required:n})=>{const{buttonText:r,skipButtonText:o}=e,[i]=H(c=>[c.tabTitle]),[a,l]=q(!1);return s("div",{children:[s("div",{className:xi,children:[s("p",{style:{marginTop:"auto"},children:e.selectTabText}),s("div",{className:"ul-select-tab-container",children:s("p",{className:_i,children:i})})]}),s("div",{className:n?"":Ut,children:[s(ie,{disabled:a,onClick:$n.bind(null,{pages:t,setIsRequestingPermission:l}),children:r}),s(Ht,{required:n,skipButtonText:o})]})]})},Fl=({content:e})=>s(Re,{className:O(bi,"ul_permission_svg_container","ul_recorded-task-inset-spacing","ul-center-horizontally"),html:e.svg},"ul-permission-request-graphic"),ql=({content:e,pages:t,required:n})=>{const{permissionDeniedHeadline:r,permissionDeniedBody:o,skipButtonText:i,tryAgainButtonText:a}=e,l=$t(t[0])?t[0]:null;return K(()=>{const c=setInterval(()=>{l!==null&&On({currentPage:l,pages:t})},1e3);return()=>clearInterval(c)},[l,t]),l?s("div",{children:[s("div",{className:xi,children:s("p",{className:"ul-av-permission-denied-paragraph",children:[s("span",{className:"ul-av-permission-denied-headline",children:r}),s("span",{className:_i,children:o})]})}),s("div",{className:Ut,children:[s(ie,{onClick:On.bind(null,{currentPage:l,pages:t}),children:a}),s(Ht,{required:n,skipButtonText:i})]})]}):null},Bl=({stream:e})=>s("video",{autoPlay:!0,className:O("ul_recorded-task-inset-spacing"),id:"ul-record-task-video-preview",muted:!0,ref:t=>{t&&(t.srcObject=e||null)}}),Vl=({content:e,pages:t,required:n})=>{const{skipButtonText:r}=e,{avStream:o}=Ne.getState();return Un(t),s("div",{children:[s(Bl,{stream:o}),s("div",{className:"ul-vertical-button-container-center",children:[s(ie,{onClick:$n.bind(null,{pages:t}),children:e.buttonText}),s(Ht,{bottom:!0,required:n,skipButtonText:r})]})]})},zl=({properties:e})=>{const{pages:t,required:n}=e,{avStream:r,currentPage:o}=Ne.getState();if(o===void 0)return null;switch(o==null?void 0:o.type){case"av_permission":{const i=gi(r,o);return i===Xe.RequestNeeded?s(Fl,{content:o}):i===Xe.TryAgain?s(ql,{content:o,pages:t,required:n}):s(Vl,{content:o,pages:t,required:n})}case"screen_permission":return s(Hl,{content:o,pages:t,required:n});case"start_task":return s($l,{content:o,pages:t,required:n});case"complete_task":return s(Ul,{content:o,pages:t,properties:e});default:return null}},Ql=({className:e,properties:t,next:n,questionId:r})=>{const o=H(),{surveyId:i,responseGroupUid:a,userId:l,update:c}=o,u=Ne(),{screenPermissionRequested:h}=u,d=Ne(x=>x.avStream);let p=Ne(x=>x.currentPage);p||(p=Ml({questionId:r,surveyId:i,next:x=>{n(x,!0)},pages:t.pages,responseGroupUid:a,userId:l}));let m=p.headline,g=p.captionText;const f=gi(d,p);return fi(p)&&h&&(m=p.permissionDeniedHeadline,g=p.permissionDeniedCaptionText),$t(p)&&f===Xe.Ready&&(m=p.permissionGrantedHeadline,g=p.permissionGrantedCaptionText),K(()=>{c()},[c]),s("div",{className:O(e,"ul-center-horizontally","fade-in-transition"),children:[s(xe,{isRequired:t==null?void 0:t.required,message:m,properties:{captionText:g}}),s(ce,{children:s(zl,{properties:t})})]})},Wl=({richTextBody:e,plaintextBody:t})=>e?s(Re,{className:"ul-rich-text-body",html:e,id:"ul-card__text-url-body-container"}):t?s("div",{className:"ul-rich-text-body",id:"ul-card__text-url-body-container",children:(t?t.split(/\n\s*\n/g):[]).map((n,r)=>s("p",{children:n},r))}):null,Gl=({className:e,message:t,next:n,properties:r,questionId:o,type:i})=>{const{visitorAttributes:a,isLongFormSurvey:l}=H(p=>({visitorAttributes:p.visitorAttributes,isLongFormSurvey:ve(p.studyType)})),c=(p,m=!1)=>{n({value:m?{skipped:!0}:void 0,questionId:o,type:i},!0)},u=p=>{(p.key==="Enter"||p.key===" ")&&n({value:void 0,questionId:o,type:i},!0)},h=ui(r&&r.buttonUrl,a),d=l&&r.promptActionType===Pn.NO_BUTTON;return s("div",{className:O(e,"ul-card__text-url-prompt","fade-in-transition"),children:[s(xe,{isRequired:l&&(r==null?void 0:r.required),message:t,properties:{questionHtml:r.questionHtml}}),s(ce,{children:s(Wl,{plaintextBody:r==null?void 0:r.body,richTextBody:r==null?void 0:r.richTextBody})}),s(ue,{properties:r,children:!d&&s(me,{children:s("div",{className:"ul-card-button-group",children:[s("a",{className:"ul-card-text__button ul-card__text-url-prompt-button",href:h,id:"ul-card-text__button",onClick:c,onKeyPress:u,rel:"noreferrer",role:h?"link":"button",tabIndex:0,target:"_blank",children:fe(r)}),r.required===!1&&s("button",{className:"ul-card-skip__button",onClick:p=>c(p,!0),children:dt(r)})]})})})]},o)},Zl=({className:e,questionId:t})=>{const{border:n,destroy:r,endCard:o,forceBrandedLogo:i,update:a}=H(u=>({border:u.border,destroy:u.destroy,endCard:u.endCard,forceBrandedLogo:u.forceBrandedLogo,update:u.update}));K(()=>{setTimeout(()=>{r(Oe)},i?4e3:2e3)},[r,i]);const l=o&&o.subheader?s("p",{className:"ul-caption",children:o.subheader}):null,c=o&&o.headline?o.headline:"";return K(()=>{a()},[a]),s("div",{className:O(e,"ul-card--thanks","fade-in-transition"),children:s("div",{children:s("div",{className:"ul-card--thanks-content",children:[s("div",{className:"ul-thanks-check",children:s("svg",{"aria-labelledby":"title",fill:"none",height:"99",viewBox:"0 0 81 99",width:"81",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{clipRule:"evenodd",d:"M40.5 77C60.9345 77 77.5 60.4345 77.5 40C77.5 19.5655 60.9345 3 40.5 3C20.0655 3 3.5 19.5655 3.5 40C3.5 60.4345 20.0655 77 40.5 77ZM80.5 40C80.5 62.0914 62.5914 80 40.5 80C18.4086 80 0.5 62.0914 0.5 40C0.5 17.9086 18.4086 0 40.5 0C62.5914 0 80.5 17.9086 80.5 40Z",fill:n,fillRule:"evenodd"}),s("path",{clipRule:"evenodd",d:"M55.025 22.9046C55.6299 23.4705 55.6616 24.4198 55.0956 25.0247C54.8724 25.2634 54.6109 25.5285 54.3157 25.8277C52.2547 27.9168 48.5549 31.667 44.8135 39.6658C43.2818 42.9406 42.0864 45.8386 41.0823 48.2729C40.6539 49.3116 40.2603 50.2659 39.8902 51.129C39.287 52.5359 38.7248 53.7508 38.1744 54.625C37.8997 55.0613 37.5806 55.4905 37.2017 55.8245C36.8201 56.1607 36.2613 56.5 35.5457 56.5C34.6742 56.5 34.0892 55.9692 33.7774 55.6083C33.4502 55.2296 33.1752 54.7511 32.9396 54.301C32.7305 53.9013 32.5088 53.4367 32.2797 52.9565C32.2429 52.8794 32.2059 52.8019 32.1688 52.7243C31.8942 52.1499 31.5959 51.534 31.2537 50.8868C29.8886 48.305 27.8539 45.2878 24.2343 43.1382C23.522 42.7152 23.2875 41.7949 23.7105 41.0826C24.1335 40.3703 25.0539 40.1358 25.7662 40.5588C30.0556 43.1062 32.4149 46.6647 33.9058 49.4845C34.2776 50.1876 34.5973 50.8487 34.8753 51.4302C34.9147 51.5124 34.9529 51.5926 34.9902 51.6707C35.2222 52.1567 35.4164 52.5637 35.5978 52.9102C35.6151 52.9434 35.6321 52.9754 35.6485 53.0061C36.0565 52.3531 36.5341 51.3434 37.133 49.9468C37.4781 49.1418 37.8572 48.2229 38.2761 47.2074C39.2886 44.7532 40.5339 41.7347 42.0961 38.3948C46.0591 29.9221 50.0641 25.8648 52.1535 23.7482C52.4423 23.4556 52.6944 23.2002 52.9048 22.9753C53.4708 22.3703 54.42 22.3387 55.025 22.9046ZM35.1994 53.5892C35.1994 53.5892 35.2 53.5888 35.2012 53.5879C35.2 53.5889 35.1994 53.5893 35.1994 53.5892ZM36.0666 53.6682C36.0732 53.674 36.0765 53.6775 36.0765 53.6777C36.0765 53.678 36.0732 53.6751 36.0666 53.6682Z",fill:n,fillRule:"evenodd"}),s("path",{d:"M69.5 97C69.5 98.1046 56.2924 99 40 99C23.7076 99 10.5 98.1046 10.5 97C10.5 95.8954 23.7076 95 40 95C56.2924 95 69.5 95.8954 69.5 97Z",fill:"black",fillOpacity:"0.2"})]})}),s(xe,{message:c}),l]})})},t)},et="ul-card-video__player_recorder",Yl="ul-card-video__skip_button",Kl="ul-video-interview-form",ki="ul-video-btn",vt={Question:0,Answer:1},Jl=({className:e,message:t,next:n,properties:r,questionId:o,type:i})=>{const{apiURL:a,envId:l,handleUploadUpdate:c,headers:u,responseGroupUid:h,surveyId:d,update:p,viewDocument:m,visitorId:g}=H(L=>({apiURL:L.apiURL,envId:L.envId,handleUploadUpdate:L.handleUploadUpdate,headers:L.headers,responseGroupUid:L.responseGroupUid,surveyId:L.surveyId,update:L.update,viewDocument:L.viewDocument,visitorId:L.userId})),[f,x]=q(!1),[v,_]=q(null),[b,w]=q(null),[S,R]=q(vt.Question),[E,N]=q(null),[y,P]=q(null),T=r&&r.videoUrl,C=we(L=>{L&&N(L)},[N]);K(()=>{const L=new ResizeObserver(()=>{setTimeout(p,0)});return y&&L.observe(y),E&&L.observe(E),()=>{L.disconnect()}},[p,y,E]);const k=(L,D)=>{L===B.UPLOAD_STARTED?(_(D[B.UPLOAD_ID]),w(D[B.MEDIA_RECORDING_UID]),x(!0)):L===B.DELETE?(_(null),w(null),x(!1)):L===B.UPLOAD_PROGRESS?isNaN(D[B.UPLOAD_PROGRESS_PCT])?c({mediaRecordingUid:D[B.MEDIA_RECORDING_UID],isComplete:!0}):c({mediaRecordingUid:D[B.MEDIA_RECORDING_UID],progressPct:D[B.UPLOAD_PROGRESS_PCT]}):L===B.UPLOAD_FINISHED&&c({mediaRecordingUid:D[B.MEDIA_RECORDING_UID],isComplete:!0})},I=L=>{if(L&&L.children.length===0&&!r.hideRecordedPrompt){P(L);const D=Jo(et,{src:T,type:"application/x-mpegURL"},void 0,r.mediaType===B.MEDIA_TYPE_AUDIO,a,m);L.appendChild(D)}},A=L=>{if(L&&L.children.length===0){P(L);const D=Xo(et,{surveyId:d,responseGroupUid:h,questionId:o,visitorId:g,envId:l},a,k,void 0,{...u,"x-ul-video-recorder-origin":"sdk"},r.mediaType===B.MEDIA_TYPE_AUDIO,m);L.appendChild(D)}},$=L=>{L.preventDefault(),L.stopPropagation(),document.getElementById(et)&&ei(et),v&&b?(c({mediaRecordingUid:b,isSubmitted:!0}),n({value:{mediaRecordingUid:b},questionId:o,type:i},!0)):n({value:null,questionId:o,type:i},!0)};return s("form",{className:O(e,"ul-card--video","fade-in-transition"),id:Kl,children:[s(xe,{isRequired:r==null?void 0:r.required,message:t,properties:r}),s(ce,{children:[s("div",{id:"ul-question-player-container",ref:C,style:{display:S===vt.Question?"":"none"},children:[s("div",{id:et,ref:I}),s(ue,{properties:r,children:s("button",{className:`${ki} ul-record-response-btn`,onClick:L=>{L.preventDefault(),L.stopPropagation(),document.getElementById(et)&&ti(et),R(vt.Answer)}})})]}),s("div",{style:{display:S===vt.Answer?"block":"none"},children:[s("button",{className:`${ki} ul-back-question-btn`,onClick:L=>{L.preventDefault(),L.stopPropagation(),R(vt.Question)},style:{display:r.hideRecordedPrompt?"none":"block"}}),s("div",{id:"ul-recorder-player-container",ref:A})]})]}),s(me,{children:[s(ie,{disabled:!f,onClick:$,children:fe(r)}),s("button",{className:"ul-card-text__button ul-button-inactive ul-card-skip__button",id:Yl,onClick:$,style:{display:r.required?"none":"block",...f?{display:"none"}:{}},children:dt(r)})]})]})},Xl=({className:e})=>{const{uploadProgress:t}=H(i=>({uploadProgress:i.uploadProgress}));let n,r;Object.values(t).filter(i=>i.isSubmitted).length>1?(n="Your responses are processing",r="Please keep this tab open until your responses are fully processed."):(n="Your response is processing",r="Please keep this tab open until your response is fully processed.");const o=Math.round(Math.min(99,...Object.values(t).filter(i=>i.isSubmitted).map(i=>i.progressPct||0)));return s("div",{className:O(e,"ul-card--uploading","fade-in-transition"),children:[s("div",{"aria-busy":"true","aria-label":"Processing...","aria-live":"polite",className:"ul-loading-spinner-container",role:"progressbar",children:s("div",{className:"ul-loading-spinner",children:[s("div",{className:"first"}),s("div",{className:"second"}),s("div",{className:"third"}),s("div",{className:"fourth"})]})}),s(xe,{message:`${n} (${o}% complete)`}),s("p",{className:"ul-caption",children:r})]})},wi=Qt(void 0),ec=()=>{const e=Zt(wi);if(e===void 0)throw new Error("usePreviousResponses must be used within a PreviousResponsesProvider");return e},tc=({value:e,children:t})=>s(wi.Provider,{value:e,children:t}),nc=({isRightLabel:e,isLeftLabel:t})=>e?Te.RIGHT:t?Te.LEFT:null,rc=500,Ci={LEFT:"Best",RIGHT:"Worst"},oc=({className:e,labels:t,message:n,properties:r,options:o,questionId:i,type:a,next:l})=>{var S,R,E,N;const[c,u]=q(o.map((y,P)=>({...y,label:y.label===""?`Item ${P+1}`:y.label,isRightLabel:!1,isLeftLabel:!1}))),h=ec(),d={padding:"24px",display:"flex",cursor:"pointer",width:"auto"},[p,m]=q(!1);K(()=>{const y=c.findIndex(L=>L.isRightLabel),P=c.findIndex(L=>L.isLeftLabel),T=y!==-1&&P!==-1;m(T);const C=!r.required||r.required&&T,k=c.map(L=>({id:L.id,option:L.label,selected:nc(L)})),I=Math.floor(i),A=Object.keys(h).filter(L=>L.startsWith(I.toString())).map(Number).sort((L,D)=>L-D).at(-1),$=[];if(typeof A=="number"){const L=h[A],D=JSON.parse(L);$.push(...D)}$.push(k),setTimeout(()=>{l({value:$,questionId:i,type:a},C,T),m(!1)},T?rc:0)},[c]);const{border:g,useMobileStyling:f,enableCspTrustedTypes:x}=H(y=>({border:y.border,useMobileStyling:y.useMobileStyling,enableCspTrustedTypes:y.enableCspTrustedTypes})),v=(y,P,T)=>y.map(C=>C.id===P?{...C,isRightLabel:T===Te.RIGHT,isLeftLabel:T===Te.LEFT}:T===Te.RIGHT&&C.isRightLabel||T===Te.LEFT&&C.isLeftLabel?{...C,isRightLabel:!1,isLeftLabel:!1}:C),_=(y,P)=>()=>{p||u(T=>v(T,y,P))},b=(S=r.ratingIcons)==null?void 0:S[0].svg,w=(R=r.ratingIcons)==null?void 0:R[1].svg;return s("form",{className:O(e,"ul-card-maxdiff","fade-in-transition"),children:[s(xe,{isRequired:r==null?void 0:r.required,message:n,properties:r}),s(ce,{children:s("div",{className:"ul-card--maxdiff__question-inner-container",children:[s("div",{className:"ul-card-maxdiff__label",children:(t==null?void 0:t.left)||((E=r==null?void 0:r.labels)==null?void 0:E.left)||Ci.LEFT}),s("div",{children:""}),s("div",{className:"ul-card-maxdiff__label",children:(t==null?void 0:t.right)||((N=r==null?void 0:r.labels)==null?void 0:N.right)||Ci.RIGHT}),c.map(({id:y,label:P,isLeftLabel:T,isRightLabel:C})=>s(ae,{children:[s("div",{className:`ul-card-maxdiff__option-control ${w?"smiley":""}`,children:w?s(Si,{ariaPressed:T,className:T?"ul-card-maxdiff__option-btn ul-card-maxdiff__option-selected good":"ul-card-maxdiff__option-btn",enableCspTrustedTypes:x,html:w,id:`smiley-good-${y}`,onClick:_(y,Te.LEFT)}):s($e,{allowTextEntry:!1,ariaLabel:`bestLabel-${P}`,border:g,choiceStyle:d,error:!1,id:`${y}`,isRadio:!0,isSelected:T,onUserInputChanged:_(y,Te.LEFT),useMobileStyling:f})}),s("div",{className:"ul-card-maxdiff__option-label",children:P}),s("div",{className:`ul-card-maxdiff__option-control ${b?"smiley":""}`,children:b?s(Si,{ariaPressed:C,className:C?"ul-card-maxdiff__option-btn ul-card-maxdiff__option-selected bad":"ul-card-maxdiff__option-btn",enableCspTrustedTypes:x,html:b,id:`smiley-bad-${y}`,onClick:_(y,Te.RIGHT)}):s($e,{allowTextEntry:!1,ariaLabel:`worstLabel-${P}`,border:g,choiceStyle:d,error:!1,id:`${y}`,isRadio:!0,isSelected:C,onUserInputChanged:_(y,Te.RIGHT),useMobileStyling:f})})]}))]})})]},i)},Si=({enableCspTrustedTypes:e,ariaPressed:t,className:n,html:r,id:o,onClick:i})=>{const a=he(()=>Rt(r,e),[e,r]);return s("span",{"aria-pressed":t,className:n,dangerouslySetInnerHTML:{__html:a},id:o,onClick:i,tabIndex:0,type:"button"})},ic=({className:e,labels:t,message:n,next:r,properties:o,questionId:i,type:a,onSubmitButtonClick:l,options:c,showIndividualSubmit:u=!1})=>{const h=oe(null),d=oe(0),p=oe(0),m=oe(null),g=oe(!1),f=oe([]),[x,v]=q(()=>(o==null?void 0:o.required)===!0),[_,b]=q(()=>c.map(j=>({...j,rank:null}))),w=he(()=>Array.from({length:c.length},(j,G)=>G+1),[c.length]),{isLongFormSurvey:S,focusedQuestionId:R,setFocusedQuestionId:E,useMobileStyling:N,isPreview:y,headers:P}=H(j=>({useMobileStyling:j.useMobileStyling,isLongFormSurvey:ve(j.studyType),focusedQuestionId:j.focusedQuestionId,setFocusedQuestionId:j.setFocusedQuestionId,isPreview:j.isPreview,headers:j.headers})),T=(P==null?void 0:P["userleap-platform"])==="android",C=N&&!y&&!T,k=!C&&!T,I=S&&R===i,A=j=>{j.preventDefault(),ge(_),l&&l()},$=(j,G)=>{b(te=>{const Z=parseInt(G),re=te.map(de=>({...de}));re.some(de=>de.rank==null)&&re.forEach((de,Hn)=>de.rank=Hn+1);const tt=re.findIndex(de=>de.id===j);if(tt===-1)return te;const pt=re[tt].rank;return Z<pt?re.forEach(de=>{de.id!==j&&de.rank>=Z&&de.rank<pt&&(de.rank=de.rank+1)}):Z>pt&&re.forEach(de=>{de.id!==j&&de.rank>pt&&de.rank<=Z&&(de.rank=de.rank-1)}),re[tt].rank=Z,re.sort((de,Hn)=>de.rank-Hn.rank),le(re),re})},L=(j,G)=>{for(let te=0;te<f.current.length;te++){const Z=f.current[te];if(!Z||Z===m.current)continue;const re=Z.getBoundingClientRect();if(j>=re.left&&j<=re.right&&G>=re.top&&G<=re.bottom)return{element:Z,index:te}}return null},D=j=>G=>{if(!C)return;G.preventDefault(),G.stopPropagation(),g.current=!0,h.current=j;const te=G.touches[0];d.current=te.clientY,p.current=te.clientY;const Z=G.currentTarget.closest(".ul-card-rank__option");Z&&(m.current=Z,Z.classList.add("is-dragging"))},Q=j=>{if(!C||!g.current||h.current===null)return;j.preventDefault(),j.stopPropagation();const G=j.touches[0];p.current=G.clientY;const te=p.current-d.current;m.current&&(m.current.style.transform=`translateY(${te}px)`,m.current.style.zIndex="1000"),f.current.forEach(re=>{re&&re!==m.current&&re.classList.remove("is-drop-target")});const Z=L(G.clientX,G.clientY);Z&&Z.element.classList.add("is-drop-target")},M=j=>{if(!C||!g.current||h.current===null)return;j.preventDefault(),j.stopPropagation();const G=j.changedTouches[0],te=L(G.clientX,G.clientY);m.current&&(m.current.style.transform="",m.current.style.zIndex="",m.current.classList.remove("is-dragging")),f.current.forEach(Z=>{Z&&Z.classList.remove("is-drop-target")}),te&&te.index!==h.current&&X(h.current,te.index),h.current=null,m.current=null,g.current=!1},X=(j,G)=>{b(te=>{const Z=te.map(tt=>({...tt})),[re]=Z.splice(j,1);return Z.splice(G,0,re),Z.forEach((tt,pt)=>{tt.rank=pt+1}),le(Z),Z})},J=j=>{j.preventDefault(),j.dataTransfer&&(j.dataTransfer.dropEffect="move")},_e=j=>G=>{var Z,re;G.preventDefault(),G.currentTarget.classList.remove("is-drop-target");const te=h.current;h.current=null,(re=(Z=G.currentTarget.closest(".ul-card-rank__list"))==null?void 0:Z.querySelector(".is-dragging"))==null||re.classList.remove("is-dragging"),!(te==null||te===j)&&X(te,j)},ge=j=>{const G={};j.reduce((te,Z)=>(te[Z.id]=Z.rank,te),G),r({value:G,questionId:i,type:a},!0)},le=j=>{v(!1),S&&ge(j)},{left:pe,right:F}=t,z=c.length,Y=j=>{j.preventDefault(),j.currentTarget.classList.add("is-drop-target")},W=j=>{j.currentTarget.classList.remove("is-drop-target")},ee=j=>{h.current=null,j.currentTarget.classList.remove("is-dragging")},Fe=j=>G=>{h.current=j,G.dataTransfer&&(G.dataTransfer.effectAllowed="move",G.dataTransfer.setData("text/plain",String(j)),G.currentTarget.classList.add("is-dragging"))},ze=()=>{S&&R!==i&&E(i)};return s("form",{className:O(e,"ul-card-rank","fade-in-transition",S&&!I&&"ul-card--unfocused"),onClick:S?ze:void 0,onSubmit:A,children:[s(xe,{isRequired:o==null?void 0:o.required,message:n,properties:o}),s(ue,{properties:o,children:T?s(ae,{children:[s(ce,{children:[s("div",{className:"ul-card--rank__question-inner-container",children:[s("div",{className:"ul-card-rank__labels",children:s("span",{children:["1 - ",pe]})}),s("ol",{className:"ul-card-rank__list",children:_.map(({id:j,label:G,rank:te})=>s("li",{className:"ul-card-rank__option",children:[s("select",{"aria-label":`Rank for ${G}`,className:O("ul-card-rank__select",te==null&&"ul-card-rank__select--placeholder"),name:`rank[${j}]`,onChange:Z=>$(j,Z.currentTarget.value),value:te??"",children:[te==null&&s("option",{className:"ul-card-rank__select-option",disabled:!0,value:"",children:"-"}),w.map(Z=>s("option",{className:"ul-card-rank__select-option",value:Z,children:Z},`${Z}-${i}`))]}),s("span",{children:G})]},j))}),s("div",{className:"ul-card-rank__labels",children:s("span",{children:[z," - ",F]})})]}),u&&s(ct,{handleSubmit:A,isSubmitDisabled:x})]}),!S&&s(me,{children:s("div",{className:"ul-card__button-wrapper",children:s(ie,{disabled:x,children:fe(o)})})})]}):s(ae,{children:[s(ce,{children:[s("div",{className:"ul-card--rank__question-inner-container",children:[s("div",{className:"ul-card-rank__labels",children:s("span",{children:["1 - ",pe]})}),s("ol",{className:"ul-card-rank__list",onDragOver:T?void 0:J,children:_.map(({id:j,label:G,rank:te},Z)=>s("li",{className:"ul-card-rank__option",draggable:k?!0:void 0,onDragEnd:k?ee:void 0,onDragEnter:k?Y:void 0,onDragLeave:k?W:void 0,onDragStart:k?Fe(Z):void 0,onDrop:k?_e(Z):void 0,ref:re=>f.current[Z]=re,children:[s("select",{"aria-label":`Rank for ${G}`,className:O("ul-card-rank__select",te==null&&"ul-card-rank__select--placeholder"),name:`rank[${j}]`,onChange:re=>$(j,re.currentTarget.value),value:te??"",children:[te==null&&s("option",{className:"ul-card-rank__select-option",disabled:!0,value:"",children:"-"}),w.map(re=>s("option",{className:"ul-card-rank__select-option",value:re,children:re},`${re}-${i}`))]}),s("span",{children:G}),!T&&s("button",{"aria-label":`Drag ${G} to reorder`,className:"ul-card-rank__drag-btn",onTouchEnd:C?M:void 0,onTouchMove:C?Q:void 0,onTouchStart:C?D(Z):void 0,title:"Drag to reorder",type:"button",children:s("svg",{fill:"none",height:"17",viewBox:"0 0 16 17",width:"16",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M5.75 11.625C6.37132 11.625 6.875 12.1287 6.875 12.75C6.875 13.3713 6.37132 13.875 5.75 13.875C5.12868 13.875 4.625 13.3713 4.625 12.75C4.625 12.1287 5.12868 11.625 5.75 11.625ZM10.25 11.625C10.8713 11.625 11.375 12.1287 11.375 12.75C11.375 13.3713 10.8713 13.875 10.25 13.875C9.62868 13.875 9.125 13.3713 9.125 12.75C9.125 12.1287 9.62868 11.625 10.25 11.625ZM5.75 7.375C6.37132 7.375 6.875 7.87868 6.875 8.5C6.875 9.12132 6.37132 9.625 5.75 9.625C5.12868 9.625 4.625 9.12132 4.625 8.5C4.625 7.87868 5.12868 7.375 5.75 7.375ZM10.25 7.375C10.8713 7.375 11.375 7.87868 11.375 8.5C11.375 9.12132 10.8713 9.625 10.25 9.625C9.62868 9.625 9.125 9.12132 9.125 8.5C9.125 7.87868 9.62868 7.375 10.25 7.375ZM5.75 3.125C6.37132 3.125 6.875 3.62868 6.875 4.25C6.875 4.87132 6.37132 5.375 5.75 5.375C5.12868 5.375 4.625 4.87132 4.625 4.25C4.625 3.62868 5.12868 3.125 5.75 3.125ZM10.25 3.125C10.8713 3.125 11.375 3.62868 11.375 4.25C11.375 4.87132 10.8713 5.375 10.25 5.375C9.62868 5.375 9.125 4.87132 9.125 4.25C9.125 3.62868 9.62868 3.125 10.25 3.125Z",fill:"currentColor"})})})]},j))}),s("div",{className:"ul-card-rank__labels",children:s("span",{children:[z," - ",F]})})]}),u&&s(ct,{handleSubmit:A,isSubmitDisabled:x})]}),!S&&s(me,{children:s("div",{className:"ul-card__button-wrapper",children:s(ie,{disabled:x,children:fe(o)})})})]})})]},i)},sc=new Set(["open","matrix","multipleselect","multiplechoice","rankorder"]),Ei=({cardInstance:e,moveToNextQuestion:t,showIndividualSubmit:n,submitQuestion:r,updateCardValues:o})=>{const{isLongFormSurvey:i}=H(p=>({isLongFormSurvey:ve(p.studyType)}));if(!e)return null;const{name:a,type:l,props:c}=e,u=n&&sc.has(l),h={className:"ul-card",next:(p,m,g=!0)=>r(p,m&&g),questionId:a,type:l,showIndividualSubmit:n,...u?{next:(p,m)=>{o(p.questionId,p,m??!0)},onSubmitButtonClick:()=>t(a)}:{}},d=(()=>{switch(l){case"consentlegal":return s(yl,{...h,...c});case"likert":return s(Cl,{...h,...c});case"matrix":return s(Pl,{...h,...c});case"maxdiff":return s(oc,{...h,...c});case"multiplechoice":return s(Nl,{...h,...c});case"multipleselect":return s(Dl,{...h,...c});case"nps":return s(jl,{...h,...c});case"open":return s(Al,{...h,...c});case"rankorder":return s(ic,{...h,...c});case"recordedtask":return s(Ql,{...h,...c});case"texturlprompt":return s(Gl,{...h,...c});case"thanks":return s(Zl,{...h,...c});case"uploading":return s(Xl,{...h,...c});case"videovoice":return s(Jl,{...h,...c});default:return null}})();return d?i?s("div",{className:"ul-card-scroll-wrapper",children:d},a):d:null},ac=({isSubmitDisabled:e=!1,onSubmit:t,buttonText:n})=>{var m;const{cards:r,forceBrandedLogo:o,index:i,marketingUrl:a,showSurveyBrand:l,slugName:c,surveyId:u,useMobileStyling:h}=H(g=>({cards:g.cards,forceBrandedLogo:g.forceBrandedLogo,index:g.index,marketingUrl:g.marketingUrl,showSurveyBrand:g.showSurveyBrand,slugName:g.slugName,surveyId:g.surveyId,useMobileStyling:g.useMobileStyling})),d=((m=r[i])==null?void 0:m.type)==="thanks",p=Io({marketingUrl:a,slugName:c,surveyId:u,forceBrandedLogo:o});return s("footer",{className:O("long-form-question-footer-container",h&&"long-form-question-footer-container--mobile",d&&"long-form-question-footer-container-center"),children:[d&&o?s(Ro,{marketingUrlLink:p}):s("div",{className:"long-form-question-footer-container-logo",children:l?s(To,{forceBrandedLogo:o,marketingUrlLink:p}):null}),!d&&s("div",{className:O("ul-card__button-wrapper","ul-card-vertical__button-wrapper","long-form-question-footer-container-actions"),children:s(ie,{className:O("long-form-button",e&&"sprig-button-disabled"),disabled:e,onClick:t,children:s("span",{className:"long-form-button-text-container",children:n??s(bn,{stroke:"white"})})})})]})},lc=Object.freeze(Object.defineProperty({__proto__:null,PageCard:({cards:e,next:t,previousResponses:n})=>{var C;const[r,o]=q({}),[i,a]=q({}),l=he(()=>({...n,...kn(e.map(k=>{var I,A;return{...k,value:((I=r[k.name])==null?void 0:I.value)??null,secondaryValue:((A=r[k.name])==null?void 0:A.secondaryValue)??null}}))}),[n,r,e]),c=Do(e,l),{isLongFormSurvey:u,focusedQuestionId:h,setFocusedQuestionId:d}=H(k=>({isLongFormSurvey:ve(k.studyType),focusedQuestionId:k.focusedQuestionId,setFocusedQuestionId:k.setFocusedQuestionId})),p=oe(null),m=oe(!1),g=oe(null),f=we(k=>{var L,D;m.current=!0;const I=e.findIndex(Q=>Q.name===k);if(!u||k===null||I===-1){m.current=!1;return}const A=(L=p.current)==null?void 0:L.querySelectorAll(".ul-card-scroll-wrapper")[I],$=(D=p.current)==null?void 0:D.closest(".ul-card-main-content");if(!A||!$){m.current=!1;return}if(A&&$){const Q=A.getBoundingClientRect(),M=$.getBoundingClientRect(),X=Q.top-M.top+$.scrollTop,J=X+Q.height/2,ge=window.innerHeight-157;let le;if(Q.height>=ge)le=X;else{const Y=$.clientHeight;le=J-Y/2}const pe=$.clientHeight,F=$.scrollHeight-pe,z=Math.max(0,Math.min(le,F));$.scrollTo({top:z,behavior:"smooth"}),setTimeout(()=>{m.current=!1},500)}},[u,e]);K(()=>{(h===null||e.findIndex(k=>k.name===h)===-1)&&d(e[0].name)},[e,h,d]);function x(){const k=v(e,r);t(k)}function v(k,I){return k.map(A=>{const $=I[A.name],L=c.find(D=>D.name===A.name);return{...$,questionText:L?wn(L):void 0}})}const _=k=>{if(!u)return;const A=e.findIndex($=>$.name===k)+1;if(A<e.length){const $=e[A].name;d($)}else d(k)};K(()=>{if(!(!u||h===null)){if(g.current===h){g.current=null;return}f(h)}},[h,u,f]);const b=we(()=>{var M,X;if(m.current)return;const k=(M=p.current)==null?void 0:M.closest(".ul-card-main-content");if(!k)return;const I=(X=p.current)==null?void 0:X.querySelectorAll(".ul-card-scroll-wrapper");if(!I||I.length===0)return;const A=k.getBoundingClientRect(),$=A.top+A.height/2;let L=0,D=1/0;I.forEach((J,_e)=>{const ge=J.getBoundingClientRect(),le=ge.top+ge.height/2,pe=Math.abs($-le);pe<D&&(D=pe,L=_e)});const Q=e[L];g.current=Q.name,d(Q.name)},[e,d]);K(()=>{var I;if(!u)return;const k=((I=p.current)==null?void 0:I.closest(".ul-card__container"))||null;return k&&k.addEventListener("scroll",b,{passive:!0}),()=>{k&&k.removeEventListener("scroll",b)}},[b,u]);const w=he(()=>Object.values(i).every((k,I)=>{var $;const A=e[I];return A!=null&&A.props&&"properties"in A.props&&(($=A.props.properties)==null?void 0:$.required)===!1?!0:k}),[i,e]),S=k=>new Promise(I=>{o(A=>{const $=k(A);return I($),$})}),R=async(k,I,A)=>(a($=>({...$,[k]:A})),await S($=>({...$,[k]:I})));K(()=>{if(!u)return;const k={};e.forEach(I=>{var $,L;const A=I;(L=($=A.props)==null?void 0:$.properties)!=null&&L.required||(k[A.name]={value:null,questionId:A.name,type:A.type})}),o(k),a({})},[e,u]);const E=async(k,I)=>{if(u){const A=await R(k.questionId,k,I),$=N(k.type),L=y(k.type);if($&&_(k.questionId),L&&I){const D=v(e,A);t(D)}}else{const A=c.find(L=>L.name===k.questionId),$={...k,questionText:A?wn(A):void 0};t([$])}},N=k=>new Set(["nps","likert","multiplechoice"]).has(k),y=k=>new Set(["videovoice","consentlegal","texturlprompt","maxdiff"]).has(k),P=()=>Object.keys(r).length<e.length||!w,T=((C=e[0])==null?void 0:C.type)==="thanks";return u?s("div",{className:"ul-card-list-container--longform","data-testid":"ui-container",ref:p,children:[s(tc,{value:n,children:c.map((k,I)=>s(Ei,{cardInstance:k,moveToNextQuestion:_,showIndividualSubmit:u&&e.length>1&&I<e.length-1,submitQuestion:E,updateCardValues:R},(k==null?void 0:k.name)||I))}),!T&&s(ac,{isSubmitDisabled:P(),onSubmit:x})]}):s(ae,{children:[s("div",{"data-testid":"ui-container",style:{display:"none"}}),c.map((k,I)=>s(Ei,{cardInstance:k,moveToNextQuestion:_,showIndividualSubmit:u&&e.length>1&&I<e.length-1,submitQuestion:E,updateCardValues:R},(k==null?void 0:k.name)||I))]})}},Symbol.toStringTag,{value:"Module"})),cc=Object.freeze(Object.defineProperty({__proto__:null,default:'html,body,p,ol,ul,li,dl,dt,dd,blockquote,figure,fieldset,legend,textarea,pre,iframe,hr,h1,h2,h3,h4,h5,h6{margin:0;padding:0}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:400}button,input,select,textarea{margin:0}html{box-sizing:border-box}*,*:before,*:after{box-sizing:inherit}ol,ul{padding-inline-start:1em}.ul-card-text__button{background-color:var(--theme);border-radius:3px;border:none;color:#fff;cursor:pointer;font-size:15px;font-weight:500;line-height:18px;padding:10.5px 21px}.ul-card-text__button:disabled,.ul-card-text__button.sprig-button-disabled{background-color:#0000001a;color:#0003}.ul-card-text__button:disabled>svg path,.ul-card-text__button.sprig-button-disabled>svg path{stroke:#0003}.ul-card-text__button.ul-button-inactive{background-color:#fff;color:#5d696f}.ul-card-skip__button{color:#00000080;background:none;border:none;font-size:15px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;cursor:pointer}.ul-card-button-group{align-items:center;display:flex;gap:15px;justify-content:center}.sprig-question-footer-container{align-items:center}.ul-card__button-checkmark{display:flex;align-items:center;gap:8px;padding:8px 16px;border-radius:8px;background-color:var(--theme);color:#fff}.ul-card__button-checkmark:disabled{background-color:var(--theme);opacity:.5;color:#fff}.ul-card__button-checkmark:disabled>svg path{stroke:#fff}.ul-conversational-ui{width:100%;height:100%;display:flex;flex-direction:column;min-height:500px;font-size:15px;position:relative}.conversational-close-btn{position:fixed;top:16px;right:16px;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;cursor:pointer;z-index:1000}.conversational-close-btn:hover{background:#ffffff80}.chat-container{flex:1;display:flex;flex-direction:column;align-items:center}.chat-messages{flex:1;padding:80px 20px 360px;display:flex;flex-direction:column;gap:10px;max-width:1000px;width:100%}.chat-message-no-response{font-style:italic;color:#666}.chat-bubble-container{display:flex;flex-direction:row;align-items:flex-start;width:100%;animation:fadeInUp .3s ease-out}.chat-left{align-self:flex-start;width:auto;justify-content:flex-start}.chat-right{align-self:flex-end;width:auto;justify-content:flex-end}.chat-avatar{width:32px;height:32px;border-radius:100%;flex-shrink:0}.chat-avatar-left{margin-right:10px}.chat-avatar-right{margin-left:10px}.chat-bubble{border-radius:20px;word-wrap:break-word;position:relative}.chat-bubble-left{background:#f9f9f8;border-radius:2px 24px 24px;padding:12px 16px;border:1px solid #e2e3e1}.chat-bubble-right{background:#fff;color:#333;border-radius:24px 2px 24px 24px;border:1px solid #cbcbcb}.chat-message-text{font-size:15px;line-height:1.4;margin:0;text-align:left}.chat-bubble-left .chat-message-text{color:#333}.chat-bubble-right .chat-message-text{color:#333;padding:12px 16px}.chat-card-container{padding:0;background:transparent;min-width:400px}.chat-thanks-card{background:transparent;box-shadow:none;text-align:center}.end-of-survey-text{text-align:center;color:#999;font-size:12px;margin-top:8px;font-weight:400}.answered-card{pointer-events:none;opacity:.7;position:relative}.answered-card:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:#ffffff4d;pointer-events:none;border-radius:inherit}.answered-card button,.answered-card input,.answered-card textarea,.answered-card select{pointer-events:none}.answered-card:not(.ul-card__consent-legal):not(.ul-card__text-url-prompt) .ul-card-button-group *{display:none}.sprig-question-footer-container{align-items:end;padding:8px 10px}.sprig-question-body{padding:10px 10px 0;overflow:unset}.ul-card-text__button{font-size:13px}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.chat-bubble-container.chat-left.chat-no-avatar .chat-bubble{margin-left:42px}@media (max-width: 768px){.chat-messages{padding:16px}.chat-bubble-left{padding:10px 14px}.chat-right{width:100%}.chat-bubble-right{width:100%;max-width:286px}.chat-bubble-text-only{width:auto;min-width:60px;max-width:286px}.chat-avatar{width:28px;height:28px}.chat-avatar-left{margin-right:8px}.chat-avatar-right{margin-left:8px}.chat-card-container{min-width:0}.chat-card .choice,.chat-message-text{font-size:12px}.chat-bubble-container.chat-left.chat-no-avatar .chat-bubble{margin-left:36px}}.ul-card-vertical__button-wrapper{align-items:end}.ul-card-skip__button{padding:0 16px}.chat-card-container:has(.ul-card__matrix),.chat-card-container:has([class*=matrix]){min-width:600px;max-width:900px}.chat-card-container .ul-card--matrix_container{max-width:100%;overflow-x:auto}.chat-card-container .ul-card--matrix_grid{min-width:100%}@media (max-width: 768px){.sprig-header-label-container,.sprig-header-label,.choice{font-size:12px}.chat-card-container:has(.ul-card__matrix),.chat-card-container:has([class*=matrix]){min-width:0;max-width:100%;width:100%}.chat-card-container .ul-card--matrix_container{overflow-x:auto;-webkit-overflow-scrolling:touch}}.select-label{cursor:pointer;flex:1;overflow-wrap:anywhere;text-align:start}@media (max-width: 768px){.ul-conversational-ui .nps-number{font-size:12px;height:35px}.ul-conversational-ui .ul-card--nps__labels{font-size:12px}}.ul-card-rank__option{text-align:left}@media (max-width: 768px){.ul-card--rank__question-inner-container,.ul-card-rank__labels{font-size:12px}.ul-card-rank__option>span{font-size:12px}.ul-card-rank__option>select{font-size:12px}}.select-button{align-items:center;background-color:transparent;border-radius:8px;border:1px solid #0b2330;box-shadow:0 0 0 2px #c8cccc;cursor:pointer;display:flex;font-size:15px;justify-content:space-between;margin-bottom:8px;padding:4px 8px 4px 16px;width:100%}.select-button:hover{background-color:#f3f3f3}.select-button:active{background-color:#eee}.select-button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.select-button.select-button-placeholder{color:#b0b5b7}.select-button svg{flex-shrink:0}.select-list{position:relative;height:fit-content;padding:4px 0;z-index:100;background-color:#fff;border:1px solid #E2E3E1;box-shadow:0 16px 24px #0b23300d,0 4px 12px #0b233008;border-radius:8px;overflow-y:scroll;width:100%}.select-option{align-items:center;cursor:pointer;display:flex;font-size:15px;gap:16px;line-height:20px;padding:8px 16px}.select-option:hover{background-color:#f3f3f3}.ul-card-text{margin-top:2px;margin-bottom:3px;display:flex;flex-direction:column;justify-content:center;padding:0;width:100%}.ul-card-text__container{align-items:center;box-sizing:border-box;border-radius:3px;display:flex;justify-content:center;margin-bottom:12px;flex:1 0 100%}.ul-card-text__input--mobile{border:2px solid #e6e6e6;max-height:63px}.ul-card-text__input--desktop{border:1px solid #e6e6e6;max-height:150px}.ul-card-text__input{background:#fff;box-sizing:border-box;color:#343442;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;min-height:63px;overflow:auto;padding:8px;resize:none;width:100%;border-radius:3px;line-height:20px;overflow-wrap:break-word}.ul-card-text__input::placeholder{color:#6c6c6e80}.ul-card-text__input:focus{outline:none;background:#fff}.ul-card-text__input--desktop:hover:not(:focus){background-color:#fff}@media (max-width: 768px){.ul-card-text__input{font-size:12px}}.ul-card__text-url-prompt .sprig-question-body{padding:0}.ul-card__text-url-prompt .ul-card-button-group{padding:10px}@keyframes flashingDot{0%{background-color:#262136}50%,to{background-color:#f8f9fa}}.thinking-dots-container{display:flex;justify-content:center;align-items:flex-end;position:relative;width:18px;margin-top:.5em}.thinking-dot{position:relative;width:3px;height:3px;border-radius:5px;background-color:#262136;color:#262136;animation:flashingDot 1s infinite linear alternate;animation-delay:.5s}.thinking-dot:before,.thinking-dot:after{content:"";display:inline-block;position:absolute;top:0;width:3px;height:3px;border-radius:5px;background-color:#262136;color:#262136;animation:flashingDot 1s infinite alternate}.thinking-dot:before{left:-5px;animation-delay:0s}.thinking-dot:after{left:5px;animation-delay:1s}[id^=ul-card-video__player_recorder],[id^=ul-card-video__question_player]{width:100%;width:-moz-available;width:-webkit-fill-available;width:fill-available}.answered-card [id^=ul-card-video__player_recorder] .ul-control-panel{display:none!important}'},Symbol.toStringTag,{value:"Module"}))})();
